"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[771],{771:(vt,pe,W)=>{W.d(pe,{A:()=>H,B:()=>we,C:()=>ve,D:()=>j,E:()=>_,F:()=>Ye,G:()=>f,H:()=>ce,I:()=>Ge,J:()=>de,K:()=>Ke,L:()=>ue,M:()=>fe,N:()=>C,O:()=>We,S:()=>Re,V:()=>ge,a:()=>M,b:()=>ke,c:()=>F,d:()=>be,e:()=>_e,f:()=>Z,g:()=>X,h:()=>b,i:()=>A,j:()=>z,k:()=>y,l:()=>S,m:()=>gt,n:()=>J,o:()=>q,p:()=>Ue,q:()=>ye,r:()=>Ve,s:()=>$,t:()=>$e,u:()=>Be,v:()=>Se,w:()=>x,x:()=>ee,y:()=>xe,z:()=>Me});var D=W(489);const _={PRODUCTION:"production",PREVIEW:"preview",DEV:"dev",TEST:"test",LOCAL:"local"};function X(t){switch(t){case _.DEV.toString():return _.DEV;case _.PREVIEW.toString():return _.PREVIEW;case _.TEST.toString():return _.TEST;case _.LOCAL.toString():return _.LOCAL;case _.PRODUCTION.toString():default:return _.PRODUCTION}}const _e={GENERAL_LOAD:"PAGHomeNav_General_Load",IDS_LOAD:"PAGHomeNav_Ids_Load",COUNTRY_RECOMMENDER_LOAD:"PAGHomeNav_CountryRecommender_Load",COUNTRY_RECOMMENDER_CHANGE:"PAGHomeNav_CountryRecommenderChange_Click",COUNTRY_RECOMMENDER_CLOSE:"PAGHomeNav_CountryRecommenderClose_Click",CREST_CLICK:"PAGHomeNav_Crest_Click",NAVIGATION_LOAD:"PAGHomeNav_Navigation_Load",MODEL_OVERLAY_LOAD:"PAGHomeNav_ModelRangeOverlay_Load",MENU_BACK_CLICK:"PAGHomeNav_MenuBack_Click",MENU_CLOSE_CLICK:"PAGHomeNav_MenuClose_Click",META_FUNCTION_CLICK:"PAGHomeNav_MetaFunction_Click",MODEL_CLICK:"PAGHomeNav_Model_Click",MODEL_META_FUNCTION_CLICK:"PAGHomeNav_ModelMetaFunction_Click",MODEL_CTA_CLICK:"PAGHomeNav_ModelCTA_Click",MODEL_RANGE_CLICK:"PAGHomeNav_ModelRange_Click",MORE_CLICK:"PAGHomeNav_More_Click",NAVIGATION_CLICK:"PAGHomeNav_Navigation_Click",NAVIGATION_LINK_CLICK:"PAGHomeNav_NavigationLink_Click",DEALER_SEARCH_SCREEN_LOAD:"PAGHomeNav_FindADealerSearchScreen_Load",DEALER_RESULTS_SCREEN_LOAD:"PAGHomeNav_FindADealerResultsScreen_Load",DEALER_SEARCH_CLICK:"PAGHomeNav_FindADealerSearch_Click",DEALER_DROPDOWN_CLICK:"PAGHomeNav_FindADealerDropdown_Click",DEALER_DROPDOWN_SELECT_CLICK:"PAGHomeNav_FindADealerDropdownSelect_Click",DEALER_GEOLOCATION_CLICK:"PAGHomeNav_FindADealerLocateMe_Click",DEALER_RESULT_CLICK:"PAGHomeNav_FindADealerDealer_Click",DEALER_DETAILS_SCREEN_LOAD:"PAGHomeNav_FindADealerDealerScreen_Load",DEALER_CONTACT_CLICK:"PAGHomeNav_FindADealerDealerContact_Click",DEALER_MAP_CLICK:"PAGHomeNav_FindADealerMap_Click",CONTEXTUAL_BUTTON_CLICK:"PAGHomeNav_IconContextLink_Click",DRAWER_LOAD:"PAGHomeNav_Drawer_Load",PCOM_SEARCH_CLICK:"PAGHomeNav_IconGlobalLink_Click"},de={Link:"link",Button:"button",Image:"image"},S={hero:"hero",navbar:"navbar",transparent:"transparent"},y={light:"light",dark:"dark"},j="dev",ue="loggedIn",b="loginOrRegister",Ne="loading",ge="3.5.0",Z=0,Re="nav_saved_dealer",fe=7776e6,ve="porsche.com",z="";class C extends Error{constructor(e,n){super(e),this.type=n,Object.setPrototypeOf(this,C.prototype)}}const M={NO_INPUT:"NO_INPUT",INVALID_INPUT:"INVALID_INPUT",NO_RESULTS:"NO_RESULTS",GENERAL:"GENERAL",RETRY:"RETRY",GEOLOCATION_DENIED:"GEOLOCATION_DENIED",UNAUTHORIZED:"UNAUTHORIZED"},x={base:0,xs:480,s:760,m:1e3,l:1300,xl:1760,xxl:1920},Ae=t=>!("isConnected"in t)||t.isConnected,Q=((t,e)=>{let n;return(...s)=>{n&&clearTimeout(n),n=setTimeout(()=>{n=0,(t=>{for(let e of t.keys())t.set(e,t.get(e).filter(Ae))})(...s)},2e3)}})(),k=t=>"function"==typeof t?t():t,F=(t,e)=>{const n=((t,e=((n,s)=>n!==s))=>{const n=k(t);let s=new Map(Object.entries(n??{}));const o={dispose:[],get:[],set:[],reset:[]},i=()=>{var r;s=new Map(Object.entries(null!==(r=k(t))&&void 0!==r?r:{})),o.reset.forEach(c=>c())},T=r=>(o.get.forEach(c=>c(r)),s.get(r)),g=(r,c)=>{const p=s.get(r);e(c,p,r)&&(s.set(r,c),o.set.forEach(u=>u(r,c,p)))},N=typeof Proxy>"u"?{}:new Proxy(n,{get:(r,c)=>T(c),ownKeys:r=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(r,c)=>s.has(c),set:(r,c,p)=>(g(c,p),!0)}),l=(r,c)=>(o[r].push(c),()=>{((t,e)=>{const n=t.indexOf(e);n>=0&&(t[n]=t[t.length-1],t.length--)})(o[r],c)});return{state:N,get:T,set:g,on:l,onChange:(r,c)=>{const p=l("set",(Rt,ft)=>{Rt===r&&c(ft)}),u=l("reset",()=>c(k(t)[r]));return()=>{p(),u()}},use:(...r)=>{const c=r.reduce((p,u)=>(u.set&&p.push(l("set",u.set)),u.get&&p.push(l("get",u.get)),u.reset&&p.push(l("reset",u.reset)),u.dispose&&p.push(l("dispose",u.dispose)),p),[]);return()=>c.forEach(p=>p())},dispose:()=>{o.dispose.forEach(r=>r()),i()},reset:i,forceUpdate:r=>{const c=s.get(r);o.set.forEach(p=>p(r,c,c))}}})(t,e);return n.use((()=>{if("function"!=typeof D.a)return{};const t=new Map;return{dispose:()=>t.clear(),get:e=>{const n=(0,D.a)();n&&((t,e,n)=>{const s=t.get(e);s?s.includes(n)||s.push(n):t.set(e,[n])})(t,e,n)},set:e=>{const n=t.get(e);n&&t.set(e,n.filter(D.f)),Q(t)},reset:()=>{t.forEach(e=>e.forEach(D.f)),Q(t)}}})()),n},H={shop:"shop",pcom:"pcom",finder:"finder",icc:"icc","connect-store":"connect-store",default:"default"},Pe={loggedInState:b,unreadMessagesCount:Z,userConsent:!1,env:X(j),app:H.default,usingKeyboard:!1,locale:z,theme:y.light,mode:S.navbar},J=F(Pe),De={test:{CONTENT_URL:"http://v4/content/url",CONTENT_CN_URL:"http://v4/content/url",SHOP_CONTENT_URL:"http://shop-content/url",ASSETS_URL:"http://assets/url",PROFILE_API_URL:"http://profile-api/url",FINDER_URL:"http://finder/url",FOOTER_ASSETS_URL:"http://footer/assets",COUNTRY_SELECTOR_URL:"http://select/countries",UNREAD_MESSAGES_COUNT_API_URL:"http://unread-messages-count-api/url",LOGIN_BASE_URL:"http://login-base/url",CLIENT_ID:"client-id",IDENTITY_PROVIDER_URL:"http://identity-redirect/url",IDENTITY_CLIENT_ID:"identity-client-id",IDENTITY_AUDIENCE:"https://identity-audience/url",IDENTITY_USER_SCOPES:"openid pid:user_profile.name:read pid:user_profile.porscheid:read",DEALER_API_URL:"https://dealer-search",BFF_ENDPOINT:"https://bff-endpoint",BFF_CN_ENDPOINT:"https://china-bff-endpoint"},local:{CONTENT_URL:"https://preview-nav.porsche.com/v4/content",CONTENT_CN_URL:"https://preview-navigation.porsche.cn/v4/content",SHOP_CONTENT_URL:"https://shop.porsche-preview.com/api/content",ASSETS_URL:".",ASSETS_CN_URL:".",PHN_DRAWER_CDN_URL:"https://local.porsche.com:3334/build",PHN_DRAWER_CN_CDN_URL:"https://local.porsche.com:3334/build",FOOTER_ASSETS_URL:"https://footer.pchomenav.aws.porsche.cloud/assets",COUNTRY_SELECTOR_URL:"https://preview.ppn.porsche.com/countries",PROFILE_API_URL:"https://api.porsche-preview.com/profiles/mydata",FINDER_URL:"https://finder.porsche.com",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche-preview.com/inbox/pp/rest/messages/unreadCount",LOGIN_BASE_URL:"https://preview-login.porsche.com",CLIENT_ID:"V5yfGusXVALiypCMRFBfM4IAHaZ0IA4A",IDENTITY_PROVIDER_URL:"https://identity.porsche-preview.com",IDENTITY_CLIENT_ID:"6nPQZTTgpN6HEgvb9gswJyduzgVfy7Cr",IDENTITY_AUDIENCE:"https://api.porsche-preview.com",IDENTITY_USER_SCOPES:"openid pid:user_profile.name:read pid:user_profile.porscheid:read",DEALER_API_URL:"https://configurator-dev.porsche.com/api/dealer-search",BFF_ENDPOINT:"https://resources-preview-nav.porsche.services",BFF_CN_ENDPOINT:"https://preview-navigation.porsche.cn"},preview:{CONTENT_URL:"https://preview-nav.porsche.com/v4/content",CONTENT_CN_URL:"https://preview-navigation.porsche.cn/v4/content",SHOP_CONTENT_URL:"https://shop.porsche-preview.com/api/content",ASSETS_URL:"https://preview-nav.porsche.com",ASSETS_CN_URL:"https://preview-navigation.porsche.cn",PHN_DRAWER_CDN_URL:"https://preview-nav.porsche.com/preview/navigation-drawer",PHN_DRAWER_CN_CDN_URL:"https://preview-navigation.porsche.cn/preview/navigation-drawer",FOOTER_ASSETS_URL:"https://footer.pchomenav.aws.porsche.cloud/assets",COUNTRY_SELECTOR_URL:"https://preview.ppn.porsche.com/countries",PROFILE_API_URL:"https://api.porsche-preview.com/profiles/mydata",FINDER_URL:"https://finder.porsche.com",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche-preview.com/inbox/pp/rest/messages/unreadCount",LOGIN_BASE_URL:"https://preview-login.porsche.com",CLIENT_ID:"V5yfGusXVALiypCMRFBfM4IAHaZ0IA4A",IDENTITY_PROVIDER_URL:"https://identity.porsche-preview.com",IDENTITY_CLIENT_ID:"6nPQZTTgpN6HEgvb9gswJyduzgVfy7Cr",IDENTITY_AUDIENCE:"https://api.porsche-preview.com",IDENTITY_USER_SCOPES:"openid pid:user_profile.name:read pid:user_profile.porscheid:read",DEALER_API_URL:"https://configurator.porsche.com/api/dealer-search",BFF_ENDPOINT:"https://resources-preview-nav.porsche.services",BFF_CN_ENDPOINT:"https://preview-navigation.porsche.cn"},dev:{CONTENT_URL:"https://preview-nav.porsche.com/v4/content",CONTENT_CN_URL:"https://preview-navigation.porsche.cn/v4/content",SHOP_CONTENT_URL:"https://shop.porsche-preview.com/api/content",ASSETS_URL:"https://preview-nav.porsche.com",ASSETS_CN_URL:"https://preview-navigation.porsche.cn",PHN_DRAWER_CDN_URL:"https://preview-nav.porsche.com/dev/navigation-drawer",PHN_DRAWER_CN_CDN_URL:"https://preview-navigation.porsche.cn/dev/navigation-drawer",FOOTER_ASSETS_URL:"https://footer.pchomenav.aws.porsche.cloud/assets",COUNTRY_SELECTOR_URL:"https://preview.ppn.porsche.com/countries",PROFILE_API_URL:"https://api.porsche-preview.com/profiles/mydata",FINDER_URL:"https://finder.porsche.com",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche-preview.com/inbox/pp/rest/messages/unreadCount",LOGIN_BASE_URL:"https://preview-login.porsche.com",CLIENT_ID:"V5yfGusXVALiypCMRFBfM4IAHaZ0IA4A",IDENTITY_PROVIDER_URL:"https://identity.porsche-preview.com",IDENTITY_CLIENT_ID:"6nPQZTTgpN6HEgvb9gswJyduzgVfy7Cr",IDENTITY_AUDIENCE:"https://api.porsche-preview.com",IDENTITY_USER_SCOPES:"openid pid:user_profile.name:read pid:user_profile.porscheid:read",DEALER_API_URL:"https://configurator.porsche.com/api/dealer-search",BFF_ENDPOINT:"https://resources-preview-nav.porsche.services",BFF_CN_ENDPOINT:"https://preview-navigation.porsche.cn"},production:{CONTENT_URL:"https://nav.porsche.com/00BC524/v4/content",CONTENT_CN_URL:"https://navigation.porsche.cn/v4/content",SHOP_CONTENT_URL:"https://shop.porsche.com/api/content",ASSETS_URL:"https://nav.porsche.com/00BC524",ASSETS_CN_URL:"https://navigation.porsche.cn",PHN_DRAWER_CDN_URL:"https://nav.porsche.com/00BC524/navigation-drawer",PHN_DRAWER_CN_CDN_URL:"https://navigation.porsche.cn/navigation-drawer",FOOTER_ASSETS_URL:"https://nav.porsche.com/00BC524/footer/assets",PROFILE_API_URL:"https://api.porsche.com/profiles/mydata",FINDER_URL:"https://finder.porsche.com",COUNTRY_SELECTOR_URL:"https://www.porsche.com/countries",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche.com/inbox/p/rest/messages/unreadCount",LOGIN_BASE_URL:"https://login.porsche.com",CLIENT_ID:"QPw3VOLAMfI7r0nmRY8ELq4RzZpZeXEE",IDENTITY_PROVIDER_URL:"https://identity.porsche.com",IDENTITY_CLIENT_ID:"fFp1mRfLwaUkbrAFv7QYeubkPofNYvWY",IDENTITY_AUDIENCE:"https://api.porsche.com",IDENTITY_USER_SCOPES:"openid pid:user_profile.name:read pid:user_profile.porscheid:read",DEALER_API_URL:"https://configurator.porsche.com/api/dealer-search",BFF_ENDPOINT:"https://resources-nav.porsche.services",BFF_CN_ENDPOINT:"https://navigation.porsche.cn"}};let G=null;function q(){if(null===G)throw new Error("No root element present");return G}function Se(t){G=t}function we(t){return q().querySelector(t)}function Ue(t){return!!t&&"function"==typeof t.then&&"Promise"===t[Symbol.toStringTag]}function A(t){return"string"==typeof t&&t.length>0}function ye(t){return t instanceof HTMLElement?t:null}function ee(t,e){return t&&"object"==typeof t&&e in t}function be(t){return"string"==typeof t?t:""}function Me(t){return t.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`)}function xe(t,e,n=((s,o)=>s[o])){return Object.entries(e).reduce((s,[o,i])=>{const a=n(t,o);return s[o]="string"==typeof a?a:i,s},{})}function ke(t){const{locale:e}=J.state,n=De[t];return"en-CN"===e||"zh-CN"===e?{...n,CONTENT_URL:n.CONTENT_CN_URL,ASSETS_URL:n.ASSETS_CN_URL,PHN_DRAWER_CDN_URL:n.PHN_DRAWER_CN_CDN_URL}:n}function Ge(t){return!function Fe(t){return t===Ne}(t)&&!function He(t){return t===b}(t)}function Ye(...t){return t.join("---")}function Be(t){return t>=x.s}function Ve(t){return t<=x.xs}const Ke=(t,e)=>e===S.transparent||e===S.hero?t:y.light;function $e(t){return 0===t.x&&0===t.y}function We(t,e){return e in t?e:H.default}var Xe=Object.defineProperty,h=(t,e,n)=>(((t,e,n)=>{e in t?Xe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n);const w={clean:{enabled:!1,executionPlace:"AFTER_MERGE",values:["",void 0,null]},logging:{enabled:!0,level:"warn"},validation:{enabled:!1,allowUnknown:!1,verbose:!0},webProperties:{enabled:!0,eventNamePattern:/.*/,reactiveUrl:!0,reactiveDimensions:!0}};class Ze{create(e){return"string"!=typeof e.event||0===e.event.length?{}:{context:{eventAction:e.event}}}}const te=(t,e,n=!1)=>{if(!t)return!1;let s;for(s in t)if((t[s]||n)&&!1===e(t[s],s))return!1;return!0},U=(t,e)=>te(t,(n,s)=>{for(const o in t[s])if(!1===e(n[o],o,n,s))return!1;return!0}),L=t=>{for(const e in t)return!1;return!0},B=(t,e=(n=>null==(n=w.clean)?void 0:n.values)()||[])=>{let n;for(n in U(t,(s,o,i,a)=>{e.includes(s)&&(delete i[o],L(i)&&delete t[a])}),t){const s=t[n];(typeof s>"u"||L(s))&&delete t[n]}return t},V=t=>(te(t,(e,n)=>("function"!=typeof e||(t[n]=e()),!0)),U(t,(e,n,s)=>("function"!=typeof e||(s[n]=e()),!0)),t),Qe=(t,e,...n)=>{const s=e.split(".");if(2!==s.length)return;const[o,i]=s,a=Je(t[o],...n);return a?a[i]:void 0},Je=(t,...e)=>"function"==typeof t?t(...e):t,et=w.logging;var K=(t=>(t[t.error=0]="error",t[t.warn=1]="warn",t[t.log=2]="log",t))(K||{});const ne=class le{constructor(e,n){h(this,"prefix"),h(this,"settings"),this.prefix=e,this.settings={...et,...n}}_getMergedSettings(e){return e?{...this.settings,...e}:this.settings}_isAllowed(e,n){if(!le.isAvailable||!n.enabled)return!1;const s=K[n.level];switch(e){case"error":case"warn":return s>=K[e];case"info":case"log":case"debug":case"dir":return s>=2;default:return!1}}_log(e,n="log",s){const o=this._getMergedSettings(s);this._isAllowed(n,o)&&("dir"===n?(console.log(`[${this.prefix}] ${n}:`),console[n](e)):console[n](`[${this.prefix}] ${e}`))}log(e,n){this._log(e,"log",n)}dir(e,n){this._log(e,"dir",n)}debug(e,n){this._log(e,"debug",n)}error(e,n){this._log(e,"error",n)}info(e,n){this._log(e,"info",n)}warn(e,n){this._log(e,"warn",n)}};h(ne,"isAvailable",typeof console<"u");let tt=ne;const I=(...t)=>{const e={};return t.forEach(n=>{if(L(n))return;const s={...e,...n};let o;for(o in s)e[o]="object"!=typeof s[o]||Array.isArray(s[o])?s[o]:{...e[o],...n[o]}}),e};class nt{create(e){return B({context:{timestamp:e.timestamp,server:e.hostname},pageExperience:{pageId:e.url},visitor:{deviceBrowserBreakpoint:e.breakpoint,deviceBrowserHeight:e.height,deviceBrowserOrientation:e.orientation,deviceBrowserWidth:e.width,deviceType:e.deviceType,useragent:e.userAgent}},[void 0])}}const st=w.webProperties,se=()=>window.location.href.replace(/[?#].*/,""),oe=()=>window.innerHeight.toString(),re=()=>window.innerHeight>window.innerWidth?"p":"l",ie=()=>window.innerWidth.toString(),ct=t=>{if(!t.breakpoints||t.breakpoints.length<1)return;const{breakpoints:e}=t,n=()=>{const s=window.innerWidth;let o=0,i=0;for(;i<e.length&&s>=e[i];)o=e[i],i++;return o.toString()};return t.reactiveDimensions?n:n()},pt=(t,e)=>{switch(e){case"string":case"number":case"boolean":return typeof t===e;case"any[]":return Array.isArray(t)&&t.length>0;case"Record<string, any>":return"object"==typeof t&&!Array.isArray(t)&&Object.keys(t).length>0;case"any":return!0;default:if(("boolean"==typeof t||"number"==typeof t||"string"==typeof t)&&e.indexOf("|")>0)return e.split("|").map(n=>{const s=n.trim();return/^'.*'$/.test(s)?s.replace(/(^ ?'?|'? ?$)/g,""):/^(true|false)$/.test(s)?"true"===s:/^-?(\d*\.)?\d+$/.test(s)?Number.parseFloat(s):s.replace(/(^ ?'?|'? ?$)/g,"")}).includes(t)}return!0};class ht{constructor(e,n,s="GlobalDataLayer"){h(this,"_className"),h(this,"_settings"),h(this,"_defaultProperties"),h(this,"_defaultPropertiesCache"),h(this,"_logger"),h(this,"_webPropertiesHandled",!1),h(this,"_dataLayerStore"),h(this,"_extensions",new Map);const o=I(w,e||{});this._className=s,this._logger=new tt(this._className,o.logging),this._settings=o,n?this._dataLayerStore=n:typeof window<"u"?(this._dataLayerStore=window.pagData=window.pagData||[],this._logger.info("`dataLayerStore` was set to default `window.pagData`")):(this._dataLayerStore=[],this._logger.info("`dataLayerStore` was set to default `[]`")),this._defaultProperties=[],this._defaultPropertiesCache=new Map}setup(){this._handleDefaultWebProperties()}get Settings(){return this._settings}get DataLayerStore(){return this._dataLayerStore}getRegisteredExtension(e){const n=new e;return this.getRegisteredExtensionByClassName(n.className)}getRegisteredExtensionByClassName(e){return this._extensions.has(e)?this._extensions.get(e):void 0}getRegisteredExtensions(){const e=[];for(const n of this._extensions.values())e.push(n);return e}registerExtension(e,n=!1){n||!this._extensions.has(e.className)?(e.dataLayerInstance=this,this._extensions.set(e.className,e),this._logger.info(n?`Overriden registration for extension class <${e.className}>.`:`Registered extension class <${e.className}>.`)):this._logger.warn(`Tried to register extension class <${e.className}> which already exists.`)}removeExtension(e){const n=new e;this._extensions.has(n.className)?this._extensions.delete(n.className):this._logger.warn(`Tried to remove not existing extension class <${n.className}>.`)}removeExtensionByClassName(e){this._extensions.has(e)?this._extensions.delete(e):this._logger.warn(`Tried to remove not existing extension class <${e}>.`)}push(e,n=[{}],s){var o,i;if(0===e.length)return!1;const a=s&&!L(s)?I(this._settings,s):this._settings;Array.isArray(n)||(n=[n]),n.forEach(V);const T=this._eventNamePayloadFactory.create({event:e}),g=V(this.getDefaultProperties(e));a.clean.enabled&&"BEFORE_MERGE"===a.clean.executionPlace&&[g||{},...n].forEach(l=>B(l,a.clean.values));const N=I(T,g||{},...n);if(a.clean.enabled&&"AFTER_MERGE"===a.clean.executionPlace&&B(N,a.clean.values),null!=(o=a?.validation)&&o.enabled&&null!=(i=a?.validation)&&i.eventMatrix){const l=((t,e,n)=>{const s={level:null,issues:[]};if(!n.enabled||!n.eventMatrix)return s;const{events:o,...i}=n.eventMatrix,a=o.indexOf(t);if(-1===a)return s.level="error",s.issues.push({level:"error",type:"EVENT_NOT_FOUND",name:t,message:`'${t}': Event does not exist.`}),s;const T=(t=>{if(!t)return[];const e=[];return U(V(t),(n,s,o,i)=>{e.push(`${i.toString()}.${s.toString()}`)}),e})(e),g=Object.keys(i),N=T.filter(E=>!g.includes(E));let l;for(l in N.length>0&&(n.allowUnknown||((t,e)=>{t&&U(t,(n,s,o,i)=>{e.includes(`${i.toString()}.${s.toString()}`)&&(delete o[s],L(o)&&delete t[i])})})(e,N),N.forEach(E=>{s.level=s.level??"warn",s.issues.push({level:"warn",type:"PROPERTY_DOES_NOT_EXIST",name:E,message:`'${E}': Property does not exist in the given Event Matrix.${n.allowUnknown?"":" It was omitted from the DataLayer payload."}`})})),i){const E=i[l],R=typeof E.e[a]<"u",P=1===E.r,r=e?Qe(e,l):void 0,c=typeof r<"u";if(R&&P&&!c&&(s.level="error",s.issues.push({level:"error",type:"REQUIRED_PROPERTY_MISSING",name:l,message:`'${l}': The required property is missing.`}),!n.verbose)||c&&!pt(r,E.t)&&(s.level="error",s.issues.push({level:"error",type:"WRONG_PROPERTY_TYPE",name:l,message:`'${l}': Wrong type detected. Expected '${E.t}', got '${typeof r}'.`}),!n.verbose))return s}return s})(e,N,a.validation),E=l.issues.sort((R,P)=>R.level!==P.level&&"warn"===P.level?-1:0).map(R=>`- [${R.level}]: ${R.message}`).join("\n");switch(l.level){case"error":return this._logger.error(`Validation failed for event '${e}' with errors/warnings: \n${E}`,a.logging),!1;case"warn":this._logger.warn(`Validation success for event '${e}' with warnings: \n${E}`,a.logging);break;default:this._logger.info(`Validation success for event '${e}'.`,a.logging)}}return this._dataLayerStore.push(N),!0}getDefaultProperties(e){if(this._defaultPropertiesCache.has(e))return this._defaultPropertiesCache.get(e);const n={byName:[],byArray:[],byRegex:[]};this._defaultProperties.forEach(o=>o.identifier===e?n.byName.push(o.data):Array.isArray(o.identifier)&&o.identifier.includes(e)?n.byArray.push(o.data):o.identifier instanceof RegExp&&o.identifier.test(e)?n.byRegex.push(o.data):void 0);const s=[...n.byRegex,...n.byArray,...n.byName];return s.length?(this._defaultPropertiesCache.set(e,I(...s)),this._defaultPropertiesCache.get(e)):void 0}setDefaultProperties(e,n){this._defaultPropertiesCache.clear();const s=this._defaultProperties.find(o=>o.identifier===e);s?s.data=I(s.data,n):this._defaultProperties.push({identifier:e,data:n})}_handleDefaultWebProperties(){if(this._webPropertiesHandled||!this._settings.webProperties.enabled)return;const e=((t,e)=>{const n={...st,...this._settings.webProperties},s={breakpoint:ct(n),timestamp:(new Date).toISOString(),hostname:window.location.hostname,url:n.reactiveUrl?se:se(),height:n.reactiveDimensions?oe:oe(),orientation:n.reactiveDimensions?re:re(),width:n.reactiveDimensions?ie:ie(),deviceType:window.matchMedia("(hover: none), (pointer: coarse)").matches?"mobile":"desktop",userAgent:window.navigator.userAgent};return e?e.create(s):s})(0,this._webPayloadFactory);this.setDefaultProperties(this._settings.webProperties.eventNamePattern,e),this._webPropertiesHandled=!0}}class Et extends ht{constructor(e,n,s="GlobalDataLayer"){super(e,n,s),h(this,"_eventNamePayloadFactory"),h(this,"_webPayloadFactory"),this._eventNamePayloadFactory=new Ze,this._webPayloadFactory=new nt,this.setup()}setup(){super.setup()}}const m={ASIA_PACIFIC:"asia-pacific",EASTERN_EUROPE:"eastern-europe",MIDDLE_EAST:"middle-east",LATIN_AMERICA:"latin-america",INTERNATIONAL:"international"},ae={AP:m.ASIA_PACIFIC,CE:m.EASTERN_EUROPE,LL:m.LATIN_AMERICA,WW:m.INTERNATIONAL};function ce(t){return Object.values(m).includes(t)}function $(t){if(!A(t))throw new C("empty locale passed",M.NO_INPUT);const e=t.substring(0,t.indexOf("-")).toLowerCase();let n=t.substring(t.indexOf("-")+1).toLowerCase();if(ce(n)||(n=n.toUpperCase()),!A(e)||!A(n))throw new C(`invalid locale ${t} passed`,M.INVALID_INPUT);return{language:e,country:ee(ae,n)?ae[n]:n}}function dt(t){switch(t){case _.PRODUCTION:return"P";case _.PREVIEW:return"PP";default:return"K"}}class f{constructor(){this.homeNavEventId=/^PAGHomeNav_/,this.initialise()}static getInstance(){return f.instance||(f.instance=new f),f.instance}initialise(){this.gdl=new Et}pushDataLayerEvent(e,n){n?this.gdl.push(e,n):this.gdl.push(e)}setEnvironment(e){this.gdl.setDefaultProperties(this.homeNavEventId,{context:{environment:dt(e)}})}setPageName(e){this.gdl.setDefaultProperties(this.homeNavEventId,{pageExperience:{pageName:e}})}setUser(e,n,s){this.gdl.setDefaultProperties(this.homeNavEventId,{ids:{userId:e,ciamId:n},visitor:{loginStatus:s}})}setLocale(e){try{const{country:n,language:s}=$(e);this.gdl.setDefaultProperties(this.homeNavEventId,{context:{country:n,language:s}})}catch{}}setDefaultProperties(e,n){let s={context:{applicationId:"nav"},visitor:{loginStatus:!1}};try{const{country:o,language:i}=$(e);s={...s,context:{...s.context,country:o,language:i,applicationName:"edgecast_CDN"}}}catch{}A(n)&&(s={...s,pageExperience:{pageName:n}}),this.gdl.setDefaultProperties(this.homeNavEventId,s)}}const d={id:"",text:"",link:"",icon:"",description:""},v={id:"",text:"",description:""},O={id:"",text:"",link:"",children:[]},gt=F({menu:v,crest:d,back:v,close:v,accessibilityStatement:d,countryRecommender:{statement:"",region:"",language:"",change:v},contextualButtons:{},contextualLinks:{},models:{text:"",id:"",all:{id:"",text:"",link:"",icon:"",description:""},series:[]},dealer:{id:"",text:"",numberOfDealers:42,search:{id:"",text:"",form:{inputPlaceholder:"",inputDescription:""},clear:v,or:"",geolocation:v,dropdown:{province:"",city:"",selectAProvince:"",selectACity:""},load:"",map:d,outboundLink:d},details:{id:"",finder:d,bookService:d,testDrive:d,backToSearch:""},openingHours:null},myPorsche:{id:"",text:"",link:"",loggedInFallback:"",login:d,loginText:"",logout:d,messages:d,more:null,signup:d,signupText:"",links:[],savedSearches:null,savedVehicles:null,onlineOrderHistory:null},vehiclePurchase:O,shop:{cart:"",wishlist:null,additionalContent:[],id:"",text:"",link:"",children:[],availableLocales:[],availableLocalesOnlyForShop:[],logoLinksToShopLocales:[]},externalShop:d,experience:O,services:O,error:{wrong:"",retry:"",noResults:"",noInput:"",invalidInput:"",geolocationDenied:""},loadingDescription:"",legacyMore:O,legacyShop:O,level0:{},connect:{cart:"",id:"",text:"",link:"",children:[]}})}}]);