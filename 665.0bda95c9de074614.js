"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[665],{9665:(Y,T,C)=>{C.d(T,{g:()=>ie});var v=C(8314),d=C(5928),M=C(4164),x=Object.defineProperty,E=(n,e,t)=>(((n,e,t)=>{e in n?x(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t})(n,"symbol"!=typeof e?e+"":e,t),t);const D={clean:{enabled:!1,executionPlace:"AFTER_MERGE",values:["",void 0,null]},logging:{enabled:!0,level:"warn"},validation:{enabled:!1,allowUnknown:!1,verbose:!0},webProperties:{enabled:!0,eventNamePattern:/.*/,reactiveUrl:!0,reactiveDimensions:!0}};class p{create(e){return"string"!=typeof e.event||0===e.event.length?{}:{context:{eventAction:e.event}}}}const w=(n,e)=>((n,e)=>{let t;for(t in n)if(n&&n[t]&&!1===e(n[t],t))return!1;return!0})(n,(t,s)=>{for(const i in n[s])if(!1===e(t[i],i,t,s))return!1;return!0}),R=n=>{for(const e in n)return!1;return!0},r=(n,e=(t=>null==(t=D.clean)?void 0:t.values)()||[])=>(w(n,(t,s,i,_)=>{e.includes(t)&&(delete i[s],R(i)&&delete n[_])}),n),o=n=>(w(n,(e,t,s)=>("function"!=typeof e||(s[t]=e()),!0)),n),g=(n,e)=>{const t=e.split(".");if(2!==t.length)return;const s=n[t[0]];return s?s[t[1]]:void 0},U=D.logging;var G=(n=>(n[n.error=0]="error",n[n.warn=1]="warn",n[n.log=2]="log",n))(G||{});const k=class{constructor(n,e){E(this,"prefix"),E(this,"settings"),this.prefix=n,this.settings={...U,...e}}_getMergedSettings(n){return n?{...this.settings,...n}:this.settings}_isAllowed(n,e){if(!k.isAvailable||!e.enabled)return!1;const t=G[e.level];switch(n){case"error":case"warn":return t>=G[n];case"info":case"log":case"debug":case"dir":return t>=2;default:return!1}}_log(n,e="log",t){const s=this._getMergedSettings(t);this._isAllowed(e,s)&&("dir"===e?(console.log(`[${this.prefix}] ${e}:`),console[e](n)):console[e](`[${this.prefix}] ${n}`))}log(n,e){this._log(n,"log",e)}dir(n,e){this._log(n,"dir",e)}debug(n,e){this._log(n,"debug",e)}error(n,e){this._log(n,"error",e)}info(n,e){this._log(n,"info",e)}warn(n,e){this._log(n,"warn",e)}};let H=k;E(H,"isAvailable",typeof console<"u");const O=(...n)=>{const e={};return n.forEach(t=>{if(R(t))return;const s={...e,...t};let i;for(i in s)e[i]="object"!=typeof s[i]||Array.isArray(s[i])?s[i]:{...e[i],...t[i]}}),e};class N{create(e){return r({context:{timestamp:e.timestamp,server:e.hostname},pageExperience:{pageId:e.url},visitor:{deviceBrowserBreakpoint:e.breakpoint,deviceBrowserHeight:e.height,deviceBrowserOrientation:e.orientation,deviceBrowserWidth:e.width,deviceType:e.deviceType,useragent:e.userAgent}},[void 0])}}const X=D.webProperties,$=()=>window.location.href.replace(/[?#].*/,""),l=()=>window.innerHeight.toString(),u=()=>window.innerHeight>window.innerWidth?"p":"l",f=()=>window.innerWidth.toString(),J=n=>{if(!n.breakpoints||n.breakpoints.length<1)return;const{breakpoints:e}=n,t=()=>{const s=window.innerWidth;let i=0,_=0;for(;_<e.length&&s>=e[_];)i=e[_],_++;return i.toString()};return n.reactiveDimensions?t:t()},q=(n,e)=>{switch(e){case"string":case"number":case"boolean":return typeof n===e;case"any[]":return Array.isArray(n)&&n.length>0;case"Record<string, any>":return"object"==typeof n&&!Array.isArray(n)&&Object.keys(n).length>0;case"any":return!0;default:if(e.indexOf("|")>0){const t=e.split("|").map(s=>s.trim().replace(/(^ ?'?|'? ?$)/g,""));return"string"==typeof n&&t.includes(n)}}return!0};class te{constructor(e,t,s="GlobalDataLayer"){E(this,"_className"),E(this,"_settings"),E(this,"_defaultProperties"),E(this,"_logger"),E(this,"_webPropertiesHandled",!1),E(this,"_dataLayerStore"),E(this,"_extensions",new Map);const i=O(D,e||{});this._className=s,this._logger=new H(this._className,i.logging),this._settings=i,t?this._dataLayerStore=t:typeof window<"u"?(this._dataLayerStore=window.pagData=window.pagData||[],this._logger.info("`dataLayerStore` was set to default `window.pagData`")):(this._dataLayerStore=[],this._logger.info("`dataLayerStore` was set to default `[]`")),this._defaultProperties=[]}setup(){this._handleDefaultWebProperties()}get Settings(){return this._settings}get DataLayerStore(){return this._dataLayerStore}getRegisteredExtension(e){const t=new e;return this.getRegisteredExtensionByClassName(t.className)}getRegisteredExtensionByClassName(e){return this._extensions.has(e)?this._extensions.get(e):void 0}getRegisteredExtensions(){const e=[];for(const t of this._extensions.values())e.push(t);return e}registerExtension(e,t=!1){t||!this._extensions.has(e.className)?(e.dataLayerInstance=this,this._extensions.set(e.className,e),this._logger.info(t?`Overriden registration for extension class <${e.className}>.`:`Registered extension class <${e.className}>.`)):this._logger.warn(`Tried to register extension class <${e.className}> which already exists.`)}removeExtension(e){const t=new e;this._extensions.has(t.className)?this._extensions.delete(t.className):this._logger.warn(`Tried to remove not existing extension class <${t.className}>.`)}removeExtensionByClassName(e){this._extensions.has(e)?this._extensions.delete(e):this._logger.warn(`Tried to remove not existing extension class <${e}>.`)}push(e,t=[{}],s){var i,_;if(0===e.length)return!1;const h=s&&!R(s)?O(this._settings,s):this._settings;Array.isArray(t)||(t=[t]),t.forEach(o);const W=this._eventNamePayloadFactory.create({event:e}),F=o(this.getDefaultProperties(e));h.clean.enabled&&"BEFORE_MERGE"===h.clean.executionPlace&&[F||{},...t].forEach(A=>r(A,h.clean.values));const b=O(W,F||{},...t);if(h.clean.enabled&&"AFTER_MERGE"===h.clean.executionPlace&&r(b,h.clean.values),(null==(i=h?.validation)?void 0:i.enabled)&&(null==(_=h?.validation)?void 0:_.eventMatrix)){const A=((n,e,t)=>{const s={level:null,issues:[]};if(!t.enabled||!t.eventMatrix)return s;const{events:i,..._}=t.eventMatrix,h=i.indexOf(n);if(-1===h)return s.level="error",s.issues.push({level:"error",type:"EVENT_NOT_FOUND",name:n,message:`'${n}': Event does not exist.`}),s;const W=(n=>{if(!n)return[];const e=[];return w(n,(t,s,i,_)=>{e.push(`${_.toString()}.${s.toString()}`)}),e})(e),F=Object.keys(_),b=W.filter(m=>!F.includes(m));let A;for(A in b.length>0&&(t.allowUnknown||((n,e)=>{n&&w(n,(t,s,i,_)=>{!e.includes(`${_.toString()}.${s.toString()}`)||(delete i[s],R(i)&&delete n[_])})})(e,b),b.forEach(m=>{var y;s.level=null!=(y=s.level)?y:"warn",s.issues.push({level:"warn",type:"PROPERTY_DOES_NOT_EXIST",name:m,message:`'${m}': Property does not exist in the given Event Matrix.${t.allowUnknown?"":" It was omitted from the DataLayer payload."}`})})),_){const m=_[A],y=typeof m.e[h]<"u",K=1===m.r,V=e?g(e,A):void 0,z=typeof V<"u";if(y&&K&&!z&&(s.level="error",s.issues.push({level:"error",type:"REQUIRED_PROPERTY_MISSING",name:A,message:`'${A}': The required property is missing.`}),!t.verbose)||z&&!q(V,m.t)&&(s.level="error",s.issues.push({level:"error",type:"WRONG_PROPERTY_TYPE",name:A,message:`'${A}': Wrong type detected. Expected '${m.t}', got '${typeof V}'.`}),!t.verbose))return s}return s})(e,b,h.validation),m=A.issues.sort((y,K)=>y.level!==K.level&&"warn"===K.level?-1:0).map(y=>`- [${y.level}]: ${y.message}`).join("\n");switch(A.level){case"error":return this._logger.error(`Validation failed for event '${e}' with errors/warnings: \n${m}`,h.logging),!1;case"warn":this._logger.warn(`Validation success for event '${e}' with warnings: \n${m}`,h.logging);break;default:this._logger.info(`Validation success for event '${e}'.`,h.logging)}}return this._dataLayerStore.push(b),!0}getDefaultProperties(e){const t={byName:[],byArray:[],byRegex:[]};this._defaultProperties.forEach(i=>i.identifier===e?t.byName.push(i.data):Array.isArray(i.identifier)&&i.identifier.includes(e)?t.byArray.push(i.data):i.identifier instanceof RegExp&&i.identifier.test(e)?t.byRegex.push(i.data):void 0);const s=[...t.byRegex,...t.byArray,...t.byName];if(s.length)return O(...s)}setDefaultProperties(e,t){const s=this._defaultProperties.find(i=>i.identifier===e);s?s.data=O(s.data,t):this._defaultProperties.push({identifier:e,data:t})}_handleDefaultWebProperties(){if(this._webPropertiesHandled||!this._settings.webProperties.enabled)return;const e=((n,e)=>{const t={...X,...this._settings.webProperties},s={breakpoint:J(t),timestamp:(new Date).toISOString(),hostname:window.location.hostname,url:t.reactiveUrl?$:$(),height:t.reactiveDimensions?l:l(),orientation:t.reactiveDimensions?u:u(),width:t.reactiveDimensions?f:f(),deviceType:window.matchMedia("(hover: none), (pointer: coarse)").matches?"mobile":"desktop",userAgent:window.navigator.userAgent};return e?e.create(s):s})(0,this._webPayloadFactory);this.setDefaultProperties(this._settings.webProperties.eventNamePattern,e),this._webPropertiesHandled=!0}}class ne extends te{constructor(e,t,s="GlobalDataLayer"){super(e,t,s),E(this,"_eventNamePayloadFactory"),E(this,"_webPayloadFactory"),this._eventNamePayloadFactory=new p,this._webPayloadFactory=new N,this.setup()}setup(){super.setup()}}function se(n){switch(n){case v.E.PRODUCTION:return"P";case v.E.PREVIEW:return"PP";default:return"K"}}const ie=new class re{constructor(){this.homeNavEventId=/^PAGHomeNav_/,this.initialise()}initialise(){this.gdl=new ne}pushDataLayerEvent(e,t){t?this.gdl.push(e,t):this.gdl.push(e)}setEnvironment(e){this.gdl.setDefaultProperties(this.homeNavEventId,{context:{environment:se(e)}})}setPageName(e){this.gdl.setDefaultProperties(this.homeNavEventId,{pageExperience:{pageName:e}})}setUser(e,t){this.gdl.setDefaultProperties(this.homeNavEventId,{ids:{userId:e},visitor:{loginStatus:t}})}setLocale(e){try{const{country:t,language:s}=(0,d.s)(e);this.gdl.setDefaultProperties(this.homeNavEventId,{context:{country:t,language:s}})}catch{}}setDefaultProperties(e,t){let s={context:{applicationId:d.a},visitor:{loginStatus:!1}};try{const{country:i,language:_}=(0,d.s)(e);s=Object.assign(Object.assign({},s),{context:Object.assign(Object.assign({},s.context),{country:i,language:_,applicationName:d.D})})}catch{}(0,M.i)(t)&&(s=Object.assign(Object.assign({},s),{pageExperience:{pageName:t}})),this.gdl.setDefaultProperties(this.homeNavEventId,s)}}},8314:(Y,T,C)=>{C.d(T,{E:()=>d,c:()=>R,g:()=>M});var v=C(1502);const d={PRODUCTION:"production",PREVIEW:"preview",TEST:"test",LOCAL:"local"};function M(r){switch(r){case d.PREVIEW.toString():return d.PREVIEW;case d.TEST.toString():return d.TEST;case d.LOCAL.toString():return d.LOCAL;case d.PRODUCTION.toString():default:return d.PRODUCTION}}const E=r=>!("isConnected"in r)||r.isConnected,L=((r,c)=>{let o;return(...g)=>{o&&clearTimeout(o),o=setTimeout(()=>{o=0,(r=>{for(let c of r.keys())r.set(c,r.get(c).filter(E))})(...g)},2e3)}})(),p=r=>"function"==typeof r?r():r,R=(r,c)=>{const o=((r,c=((o,g)=>o!==g))=>{const o=p(r);let g=new Map(Object.entries(o??{}));const P={dispose:[],get:[],set:[],reset:[]},U=()=>{var a;g=new Map(Object.entries(null!==(a=p(r))&&void 0!==a?a:{})),P.reset.forEach(l=>l())},k=a=>(P.get.forEach(l=>l(a)),g.get(a)),H=(a,l)=>{const u=g.get(a);c(l,u,a)&&(g.set(a,l),P.set.forEach(f=>f(a,l,u)))},O=typeof Proxy>"u"?{}:new Proxy(o,{get:(a,l)=>k(l),ownKeys:a=>Array.from(g.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(a,l)=>g.has(l),set:(a,l,u)=>(H(l,u),!0)}),N=(a,l)=>(P[a].push(l),()=>{((r,c)=>{const o=r.indexOf(c);o>=0&&(r[o]=r[r.length-1],r.length--)})(P[a],l)});return{state:O,get:k,set:H,on:N,onChange:(a,l)=>{const u=N("set",(B,j)=>{B===a&&l(j)}),f=N("reset",()=>l(p(r)[a]));return()=>{u(),f()}},use:(...a)=>{const l=a.reduce((u,f)=>(f.set&&u.push(N("set",f.set)),f.get&&u.push(N("get",f.get)),f.reset&&u.push(N("reset",f.reset)),f.dispose&&u.push(N("dispose",f.dispose)),u),[]);return()=>l.forEach(u=>u())},dispose:()=>{P.dispose.forEach(a=>a()),U()},reset:U,forceUpdate:a=>{const l=g.get(a);P.set.forEach(u=>u(a,l,l))}}})(r,c);return o.use((()=>{if("function"!=typeof v.d)return{};const r=new Map;return{dispose:()=>r.clear(),get:c=>{const o=(0,v.d)();o&&((r,c,o)=>{const g=r.get(c);g?g.includes(o)||g.push(o):r.set(c,[o])})(r,c,o)},set:c=>{const o=r.get(c);o&&r.set(c,o.filter(v.f)),L(r)},reset:()=>{r.forEach(c=>c.forEach(v.f)),L(r)}}})()),o}},5928:(Y,T,C)=>{C.d(T,{C:()=>L,D:()=>S,E:()=>M,R:()=>p,a:()=>x,b:()=>D,c:()=>E,i:()=>w,s:()=>R});var v=C(4164),d=C(908);const M={GENERAL_LOAD:"PAGHomeNav_General_Load",COUNTRY_RECOMMENDER_LOAD:"PAGHomeNav_CountryRecommender_Load",COUNTRY_RECOMMENDER_CHANGE:"PAGHomeNav_CountryRecommenderChange_Click",COUNTRY_RECOMMENDER_CLOSE:"PAGHomeNav_CountryRecommenderClose_Click",CREST_CLICK:"PAGHomeNav_Crest_Click",NAVIGATION_LOAD:"PAGHomeNav_Navigation_Load",MODEL_OVERLAY_LOAD:"PAGHomeNav_ModelRangeOverlay_Load",MENU_BACK_CLICK:"PAGHomeNav_MenuBack_Click",MENU_CLOSE_CLICK:"PAGHomeNav_MenuClose_Click",META_FUNCTION_CLICK:"PAGHomeNav_MetaFunction_Click",MODEL_CLICK:"PAGHomeNav_Model_Click",MODEL_META_FUNCTION_CLICK:"PAGHomeNav_ModelMetaFunction_Click",MODEL_CTA_CLICK:"PAGHomeNav_ModelCTA_Click",MODEL_RANGE_CLICK:"PAGHomeNav_ModelRange_Click",MORE_CLICK:"PAGHomeNav_More_Click",NAVIGATION_CLICK:"PAGHomeNav_Navigation_Click",NAVIGATION_LINK_CLICK:"PAGHomeNav_NavigationLink_Click",DEALER_SEARCH_SCREEN_LOAD:"PAGHomeNav_FindADealerSearchScreen_Load",DEALER_RESULTS_SCREEN_LOAD:"PAGHomeNav_FindADealerResultsScreen_Load",DEALER_SEARCH_CLICK:"PAGHomeNav_FindADealerSearch_Click",DEALER_GEOLOCATION_CLICK:"PAGHomeNav_FindADealerLocateMe_Click",DEALER_RESULT_CLICK:"PAGHomeNav_FindADealerDealer_Click",DEALER_DETAILS_SCREEN_LOAD:"PAGHomeNav_FindADealerDealerScreen_Load",DEALER_CONTACT_CLICK:"PAGHomeNav_FindADealerDealerContact_Click",DEALER_MAP_CLICK:"PAGHomeNav_FindADealerMap_Click",CONTEXTUAL_BUTTON_CLICK:"PAGHomeNav_IconContextLink_Click",DRAWER_LOAD:"PAGHomeNav_Drawer_Load",PCOM_SEARCH_CLICK:"PAGHomeNav_IconGlobalLink_Click"},x="nav",S="edgecast_CDN",E={closeButton:"close-button",backdrop:"backdrop",backButton:"back-button",menuItem:"menu-item",sideDrawerItem:"side-drawer-item",doubleDrawer:"double-drawer",singleDrawer:"single-drawer",bodyTypeButton:"body-type-button",myPorscheDrawer:"my-porsche-drawer",dealerSearchForm:"dealer-search-form"},L={Link:"link",Button:"button",Image:"image"},D={SingleDrawer:"singleDrawer",DoubleDrawer:"doubleDrawer"},p={ASIA_PACIFIC:"asia-pacific",EASTERN_EUROPE:"eastern-europe",MIDDLE_EAST:"middle-east",LATIN_AMERICA:"latin-america",INTERNATIONAL:"international"},I={AP:p.ASIA_PACIFIC,CE:p.EASTERN_EUROPE,LL:p.LATIN_AMERICA,WW:p.INTERNATIONAL};function w(r){return Object.values(p).includes(r)}function R(r){if(!(0,v.i)(r))throw new d.N("empty locale passed",d.a.NO_INPUT);const c=r.substring(0,r.indexOf("-")).toLowerCase();let o=r.substring(r.indexOf("-")+1).toLowerCase();if(w(o)||(o=o.toUpperCase()),!(0,v.i)(c)||!(0,v.i)(o))throw new d.N(`invalid locale ${r} passed`,d.a.INVALID_INPUT);return{language:c,country:(0,v.u)(I,o)?I[o]:o}}}}]);