!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=o(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function o(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[754],{3754:function(t,o,a){a.r(o),a.d(o,{phn_header:function(){return ae}});var c=a(8239),l=a(4397),p=a(8605),h=a(599),d=a(5305),f=a(4239),v=a(5364),g=a(1342),m=a(837),_=a(7171),y=a(6967),w=a(6430),k=a(1454);a(8082);var R,b,x={test:{CONTENT_URL:"http://content/url",ASSETS_URL:"http://assets/url",PROFILE_API_URL:"http://profile-api/url",FOOTER_ASSETS_URL:"http://footer/assets",COUNTRY_SELECTOR_URL:"http://select/countries",UNREAD_MESSAGES_COUNT_API_URL:"http://unread-messages-count-api/url",LOGIN_BASE_URL:"http://login-base/url",LOGIN_REDIRECT_URL:"http://login-redirect/url",CLIENT_ID:"client-id",PORSCHE_COM_URL:["http://porsche-com/url"],DEALER_API_URL:"https://configurator-dev.porsche.com/api/dealer-search/dealers"},local:{CONTENT_URL:"https://preview-nav.porsche.com/content",ASSETS_URL:".",FOOTER_ASSETS_URL:"https://footer.pchomenav.aws.porsche.cloud/assets",COUNTRY_SELECTOR_URL:"https://preview.ppn.porsche.com/countries",PROFILE_API_URL:"https://api.porsche-preview.com/profiles/mydata",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche-preview.com/inbox/pp/rest/messages/unreadCount",LOGIN_BASE_URL:"https://preview-login.porsche.com",LOGIN_REDIRECT_URL:"https://preview-nav.porsche.com/authIframe.html",CLIENT_ID:"V5yfGusXVALiypCMRFBfM4IAHaZ0IA4A",PORSCHE_COM_URL:["http://localhost:3333","http://localhost:3334","http://localhost:3335"],DEALER_API_URL:"https://configurator-dev.porsche.com/api/dealer-search/dealers"},preview:{CONTENT_URL:"https://preview-nav.porsche.com/content",ASSETS_URL:"https://preview-nav.porsche.com",FOOTER_ASSETS_URL:"https://footer.pchomenav.aws.porsche.cloud/assets",COUNTRY_SELECTOR_URL:"https://preview.ppn.porsche.com/countries",PROFILE_API_URL:"https://api.porsche-preview.com/profiles/mydata",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche-preview.com/inbox/pp/rest/messages/unreadCount",LOGIN_BASE_URL:"https://preview-login.porsche.com",LOGIN_REDIRECT_URL:"https://preview-nav.porsche.com/authIframe.html",CLIENT_ID:"V5yfGusXVALiypCMRFBfM4IAHaZ0IA4A",PORSCHE_COM_URL:["https://vanillajs.preview-nav.porsche.com","https://angular.preview-nav.porsche.com","https://react.preview-nav.porsche.com","https://vanillajs.pchomenav.aws.porsche.cloud","https://react.pchomenav.aws.porsche.cloud","https://angular.pchomenav.aws.porsche.cloud","https://preview.ppn.porsche.com"],DEALER_API_URL:""},production:{CONTENT_URL:"https://nav.porsche.com/00BC524/content",ASSETS_URL:"https://nav.porsche.com/00BC524",FOOTER_ASSETS_URL:"https://nav.porsche.com/00BC524/footer/assets",PROFILE_API_URL:"https://api.porsche.com/profiles/mydata",COUNTRY_SELECTOR_URL:"https://porsche.com/countries",UNREAD_MESSAGES_COUNT_API_URL:"https://api.porsche.com/inbox/p/rest/messages/unreadCount",LOGIN_BASE_URL:"https://login.porsche.com",LOGIN_REDIRECT_URL:"https://nav.porsche.com/00BC524/auth/authIframe.html",CLIENT_ID:"QPw3VOLAMfI7r0nmRY8ELq4RzZpZeXEE",PORSCHE_COM_URL:["https://www.porsche.com"],DEALER_API_URL:""}},S=(R=(0,c.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,"/").concat(n.toString(),".json"),{headers:{"Cache-Control":"no-cache","Content-Type":"application/json"}});case 3:r=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",((0,f.e)("content","Failed to fetch content with error: ".concat(e.t0)),d.D));case 9:if(404!==r.status){e.next=11;break}throw new Error("No content for locale ".concat(n," found"));case 11:return e.abrupt("return",r.ok?r.json():d.D);case 12:case"end":return e.stop()}},e,null,[[0,6]])})),function(e,t){return R.apply(this,arguments)}),E=function(t){i(a,t);var o=s(a);function a(t){var n;return e(this,a),(n=o.call(this,t)).context.eventAction="PAGHomeNav_General_Load",n}return n(a,[{key:"event",value:function(){return r(u(a.prototype),"event",this).call(this)}}]),a}(v.L),T=new Uint8Array(16);function A(){if(!b&&!(b="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return b(T)}var C=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function L(e){return"string"==typeof e&&C.test(e)}for(var O=[],I=0;I<256;++I)O.push((I+256).toString(16).substr(1));function U(e,t,n){var r=(e=e||{}).random||(e.rng||A)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]).toLowerCase();if(!L(n))throw TypeError("Stringified UUID is invalid");return n}(r)}for(var P=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AppAuthError=void 0,t.AppAuthError=function(e,t){this.message=e,this.extras=t}}),N=(0,y.c)(function(e,t){var n,r=y.a&&y.a.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.TestRequestor=t.FetchRequestor=t.JQueryRequestor=t.Requestor=void 0;var o=function(){};t.Requestor=o;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.xhr=function(e){var t=$.ajax(e);return new Promise(function(e,n){t.then(function(t,n,r){e(t)},function(e,t,r){n(new P.AppAuthError(r))})})},t}(o);t.JQueryRequestor=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.xhr=function(e){if(!e.url)return Promise.reject(new P.AppAuthError("A URL must be provided."));var t=new URL(e.url),n={};if(n.method=e.method,n.mode="cors",e.data&&(e.method&&"POST"===e.method.toUpperCase()?n.body=e.data:new URLSearchParams(e.data).forEach(function(e,n){t.searchParams.append(n,e)})),n.headers={},e.headers)for(var r in e.headers)e.headers.hasOwnProperty(r)&&(n.headers[r]=e.headers[r]);var o=e.dataType&&"json"===e.dataType.toLowerCase();return o&&(n.headers.Accept="application/json, text/javascript, */*; q=0.01"),fetch(t.toString(),n).then(function(e){if(e.status>=200&&e.status<300){var t=e.headers.get("content-type");return o||t&&-1!==t.indexOf("application/json")?e.json():e.text()}return Promise.reject(new P.AppAuthError(e.status.toString(),e.statusText))})},t}(o);t.FetchRequestor=a;var s=function(e){function t(t){var n=e.call(this)||this;return n.promise=t,n}return r(t,e),t.prototype.xhr=function(e){return this.promise},t}(o);t.TestRequestor=s}),j=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationServiceConfiguration=void 0;var n=function(){function e(e){this.authorizationEndpoint=e.authorization_endpoint,this.tokenEndpoint=e.token_endpoint,this.revocationEndpoint=e.revocation_endpoint,this.userInfoEndpoint=e.userinfo_endpoint,this.endSessionEndpoint=e.end_session_endpoint}return e.prototype.toJson=function(){return{authorization_endpoint:this.authorizationEndpoint,token_endpoint:this.tokenEndpoint,revocation_endpoint:this.revocationEndpoint,end_session_endpoint:this.endSessionEndpoint,userinfo_endpoint:this.userInfoEndpoint}},e.fetchFromIssuer=function(t,n){var r=t+"/.well-known/openid-configuration";return(n||new N.JQueryRequestor).xhr({url:r,dataType:"json",method:"GET"}).then(function(t){return new e(t)})},e}();t.AuthorizationServiceConfiguration=n}),D=[],q=[],z=("undefined"!=typeof Uint8Array&&Uint8Array,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),M=0,B=z.length;M<B;++M)D[M]=z[M],q[z.charCodeAt(M)]=M;function H(e){return D[e>>18&63]+D[e>>12&63]+D[e>>6&63]+D[63&e]}function F(e,t,n){for(var r=[],o=t;o<n;o+=3)r.push(H((e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2])));return r.join("")}q["-".charCodeAt(0)]=62,q["_".charCodeAt(0)]=63;var G=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultCrypto=t.textEncodeLite=t.urlSafe=t.bufferToString=void 0;var n="undefined"!=typeof window&&!!window.crypto,r=n&&!!window.crypto.subtle,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function i(e){for(var t=[],n=0;n<e.byteLength;n+=1)t.push(o[e[n]%o.length]);return t.join("")}function a(e){return function(e){for(var t,n=e.length,r=n%3,o=[],i=16383,a=0,s=n-r;a<s;a+=i)o.push(F(e,a,a+i>s?s:a+i));return 1===r?o.push(D[(t=e[n-1])>>2]+D[t<<4&63]+"=="):2===r&&o.push(D[(t=(e[n-2]<<8)+e[n-1])>>10]+D[t>>4&63]+D[t<<2&63]+"="),o.join("")}(new Uint8Array(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function s(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}t.bufferToString=i,t.urlSafe=a,t.textEncodeLite=s;var c=function(){function e(){}return e.prototype.generateRandom=function(e){var t=new Uint8Array(e);if(n)window.crypto.getRandomValues(t);else for(var r=0;r<e;r+=1)t[r]=Math.random()*o.length|0;return i(t)},e.prototype.deriveChallenge=function(e){return e.length<43||e.length>128?Promise.reject(new P.AppAuthError("Invalid code length.")):r?new Promise(function(t,n){crypto.subtle.digest("SHA-256",s(e)).then(function(e){return t(a(new Uint8Array(e)))},function(e){return n(e)})}):Promise.reject(new P.AppAuthError("window.crypto.subtle is unavailable."))},e}();t.DefaultCrypto=c}),Z=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.IS_PROFILE=t.IS_LOG=void 0,t.IS_LOG=!0,t.IS_PROFILE=!1}),J=(0,y.c)(function(e,t){var n=y.a&&y.a.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function r(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Z.IS_LOG){var o=t?t.length:0;o>0?console.log.apply(console,n([e],t)):console.log(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.profile=t.log=void 0,t.log=r;var o="undefined"!=typeof window&&!!window.performance&&!!console.profile;t.profile=function(e,t,i){return Z.IS_PROFILE?function(e,t,i){var a=i.value,s=a.name;return s||(s="anonymous function"),i.value=o?function(e){console.profile(s);var t=window.performance.now(),r=a.call.apply(a,n([this||window],e)),o=window.performance.now()-t;return console.log(s+" took "+o+" ms"),console.profileEnd(),r}:function(e){r("Profile start "+s);var t=Date.now(),o=a.call.apply(a,n([this||window],e)),i=Date.now()-t;return r("Profile end "+s+" took "+i+" ms."),o},i}(0,0,i):i}}),V=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationRequest=void 0;var n=function(){function e(t,n,r){void 0===n&&(n=new G.DefaultCrypto),void 0===r&&(r=!0),this.crypto=n,this.usePkce=r,this.clientId=t.client_id,this.redirectUri=t.redirect_uri,this.scope=t.scope,this.responseType=t.response_type||e.RESPONSE_TYPE_CODE,this.state=t.state||function(e){return e.generateRandom(10)}(n),this.extras=t.extras,this.internal=t.internal}return e.prototype.setupCodeVerifier=function(){var e=this;if(this.usePkce){var t=this.crypto.generateRandom(128);return this.crypto.deriveChallenge(t).catch(function(e){J.log("Unable to generate PKCE challenge. Not using PKCE",e)}).then(function(n){n&&(e.internal=e.internal||{},e.internal.code_verifier=t,e.extras=e.extras||{},e.extras.code_challenge=n,e.extras.code_challenge_method="S256")})}return Promise.resolve()},e.prototype.toJson=function(){var e=this;return this.setupCodeVerifier().then(function(){return{response_type:e.responseType,client_id:e.clientId,redirect_uri:e.redirectUri,scope:e.scope,state:e.state,extras:e.extras,internal:e.internal}})},e.RESPONSE_TYPE_TOKEN="token",e.RESPONSE_TYPE_CODE="code",e}();t.AuthorizationRequest=n}),Y=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationRequestHandler=t.BUILT_IN_PARAMETERS=t.AuthorizationNotifier=void 0;var n=function(){function e(){this.listener=null}return e.prototype.setAuthorizationListener=function(e){this.listener=e},e.prototype.onAuthorizationComplete=function(e,t,n){this.listener&&this.listener(e,t,n)},e}();t.AuthorizationNotifier=n,t.BUILT_IN_PARAMETERS=["redirect_uri","client_id","response_type","state","scope"];var r=function(){function e(e,t){this.utils=e,this.crypto=t,this.notifier=null}return e.prototype.buildRequestUrl=function(e,n){var r={redirect_uri:n.redirectUri,client_id:n.clientId,response_type:n.responseType,state:n.state,scope:n.scope};if(n.extras)for(var o in n.extras)n.extras.hasOwnProperty(o)&&t.BUILT_IN_PARAMETERS.indexOf(o)<0&&(r[o]=n.extras[o]);var i=this.utils.stringify(r);return e.authorizationEndpoint+"?"+i},e.prototype.completeAuthorizationRequestIfPossible=function(){var e=this;return J.log("Checking to see if there is an authorization response to be delivered."),this.notifier||J.log("Notifier is not present on AuthorizationRequest handler.\n          No delivery of result will be possible"),this.completeAuthorizationRequest().then(function(t){t||J.log("No result is available yet."),t&&e.notifier&&e.notifier.onAuthorizationComplete(t.request,t.response,t.error)})},e.prototype.setAuthorizationNotifier=function(e){return this.notifier=e,this},e}();t.AuthorizationRequestHandler=r}),Q=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthorizationError=t.AuthorizationResponse=void 0;var n=function(){function e(e){this.code=e.code,this.state=e.state}return e.prototype.toJson=function(){return{code:this.code,state:this.state}},e}();t.AuthorizationResponse=n;var r=function(){function e(e){this.error=e.error,this.errorDescription=e.error_description,this.errorUri=e.error_uri,this.state=e.state}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri,state:this.state}},e}();t.AuthorizationError=r}),K=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BasicQueryStringUtils=void 0;var n=function(){function e(){}return e.prototype.parse=function(e,t){return this.parseQueryString(t?e.hash:e.search)},e.prototype.parseQueryString=function(e){for(var t={},n=(e=e.trim().replace(/^(\?|#|&)/,"")).split("&"),r=0;r<n.length;r+=1){var o=n[r].split("=");if(o.length>=2){var i=decodeURIComponent(o.shift()),a=o.length>0?o.join("="):null;a&&(t[i]=decodeURIComponent(a))}}return t},e.prototype.stringify=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},e}();t.BasicQueryStringUtils=n}),W=(0,y.c)(function(e,t){var n,r=y.a&&y.a.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageBackend=t.StorageBackend=void 0;var o=function(){};t.StorageBackend=o;var i=function(e){function t(t){var n=e.call(this)||this;return n.storage=t||window.localStorage,n}return r(t,e),t.prototype.getItem=function(e){var t=this;return new Promise(function(n,r){n(t.storage.getItem(e)||null)})},t.prototype.removeItem=function(e){var t=this;return new Promise(function(n,r){t.storage.removeItem(e),n()})},t.prototype.clear=function(){var e=this;return new Promise(function(t,n){e.storage.clear(),t()})},t.prototype.setItem=function(e,t){var n=this;return new Promise(function(r,o){n.storage.setItem(e,t),r()})},t}(o);t.LocalStorageBackend=i}),X=(0,y.c)(function(e,t){var n,r=y.a&&y.a.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectRequestHandler=void 0;var o=function(e){return e+"_appauth_authorization_request"},i=function(e){return e+"_appauth_authorization_service_configuration"},a="appauth_current_authorization_request",s=function(e){function t(t,n,r,o){void 0===t&&(t=new W.LocalStorageBackend),void 0===n&&(n=new K.BasicQueryStringUtils),void 0===r&&(r=window.location),void 0===o&&(o=new G.DefaultCrypto);var i=e.call(this,n,o)||this;return i.storageBackend=t,i.locationLike=r,i}return r(t,e),t.prototype.performAuthorizationRequest=function(e,t){var n=this,r=this.crypto.generateRandom(10);Promise.all([this.storageBackend.setItem(a,r),t.toJson().then(function(e){return n.storageBackend.setItem(o(r),JSON.stringify(e))}),this.storageBackend.setItem(i(r),JSON.stringify(e.toJson()))]).then(function(){var r=n.buildRequestUrl(e,t);J.log("Making a request to ",t,r),n.locationLike.assign(r)})},t.prototype.completeAuthorizationRequest=function(){var e=this;return this.storageBackend.getItem(a).then(function(t){return t?e.storageBackend.getItem(o(t)).then(function(e){return JSON.parse(e)}).then(function(e){return new V.AuthorizationRequest(e)}).then(function(n){var r=""+e.locationLike.origin+e.locationLike.pathname,s=e.utils.parse(e.locationLike,!0),c=s.state,u=s.code,l=s.error;J.log("Potential authorization request ",r,s,c,u,l);var p=null,h=null;return c===n.state?(l?h=new Q.AuthorizationError({error:l,error_description:s.error_description,error_uri:s.error_uri,state:c}):p=new Q.AuthorizationResponse({code:u,state:c}),Promise.all([e.storageBackend.removeItem(a),e.storageBackend.removeItem(o(t)),e.storageBackend.removeItem(i(t))]).then(function(){return J.log("Delivering authorization response"),{request:n,response:p,error:h}})):(J.log("Mismatched request (state and request_uri) dont match."),Promise.resolve(null))}):null})},t}(Y.AuthorizationRequestHandler);t.RedirectRequestHandler=s}),ee=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TokenError=t.TokenResponse=t.nowInSeconds=void 0,t.nowInSeconds=function(){return Math.round((new Date).getTime()/1e3)};var n=function(){function e(e){this.accessToken=e.access_token,this.tokenType=e.token_type||"bearer",e.expires_in&&(this.expiresIn=parseInt(e.expires_in,10)),this.refreshToken=e.refresh_token,this.scope=e.scope,this.idToken=e.id_token,this.issuedAt=e.issued_at||t.nowInSeconds()}return e.prototype.toJson=function(){var e;return{access_token:this.accessToken,id_token:this.idToken,refresh_token:this.refreshToken,scope:this.scope,token_type:this.tokenType,issued_at:this.issuedAt,expires_in:null===(e=this.expiresIn)||void 0===e?void 0:e.toString()}},e.prototype.isValid=function(e){return void 0===e&&(e=-600),!this.expiresIn||t.nowInSeconds()<this.issuedAt+this.expiresIn+e},e}();t.TokenResponse=n;var r=function(){function e(e){this.error=e.error,this.errorDescription=e.error_description,this.errorUri=e.error_uri}return e.prototype.toJson=function(){return{error:this.error,error_description:this.errorDescription,error_uri:this.errorUri}},e}();t.TokenError=r}),te=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTokenRequestHandler=void 0;var n=function(){function e(e,t){void 0===e&&(e=new N.JQueryRequestor),void 0===t&&(t=new K.BasicQueryStringUtils),this.requestor=e,this.utils=t}return e.prototype.isTokenResponse=function(e){return void 0===e.error},e.prototype.performRevokeTokenRequest=function(e,t){return this.requestor.xhr({url:e.revocationEndpoint,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(t.toStringMap())}).then(function(e){return!0})},e.prototype.performTokenRequest=function(e,t){var n=this;return this.requestor.xhr({url:e.tokenEndpoint,method:"POST",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.utils.stringify(t.toStringMap())}).then(function(e){return n.isTokenResponse(e)?new ee.TokenResponse(e):Promise.reject(new P.AppAuthError(e.error,new ee.TokenError(e)))})},e}();t.BaseTokenRequestHandler=n}),ne=(0,y.c)(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRequest=t.GRANT_TYPE_REFRESH_TOKEN=t.GRANT_TYPE_AUTHORIZATION_CODE=void 0,t.GRANT_TYPE_AUTHORIZATION_CODE="authorization_code",t.GRANT_TYPE_REFRESH_TOKEN="refresh_token";var n=function(){function e(e){this.clientId=e.client_id,this.redirectUri=e.redirect_uri,this.grantType=e.grant_type,this.code=e.code,this.refreshToken=e.refresh_token,this.extras=e.extras}return e.prototype.toJson=function(){return{grant_type:this.grantType,code:this.code,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,client_id:this.clientId,extras:this.extras}},e.prototype.toStringMap=function(){var e={grant_type:this.grantType,client_id:this.clientId,redirect_uri:this.redirectUri};if(this.code&&(e.code=this.code),this.refreshToken&&(e.refresh_token=this.refreshToken),this.extras)for(var t in this.extras)this.extras.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=this.extras[t]);return e},e}();t.TokenRequest=n}),re=function(t){i(o,t);var r=s(o);function o(t,n,i){var a;return e(this,o),(a=r.call(this)).code=t,a.state=n,a.error=i,a}return n(o,[{key:"parse",value:function(e,t){return{code:this.code,state:this.state,error:this.error}}}]),o}(K.BasicQueryStringUtils),oe=function(){function t(){e(this,t),this.config=null,this.fetchRequestor=new N.FetchRequestor,this.tokenHandler=new te.BaseTokenRequestHandler(this.fetchRequestor)}return n(t,[{key:"recieveMessage",value:function(e){var t=e.data,n=t.state,r=t.error,o=t.code,i=this;return(0,c.Z)(regeneratorRuntime.mark(function e(){var t,a,s,c,u,l,p,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,f.d)("silent_auth","Received message event"),null==i.authorizationHandler){e.next=35;break}if(!(0,d.i)(o)||!(0,d.i)(n)){e.next=30;break}if(t=i.config||{},a=t.LOGIN_REDIRECT_URL,s=t.CLIENT_ID,(0,d.i)(s)){e.next=5;break}throw new Error("config was not set on silent auth service");case 5:return i.authorizationHandler.locationLike=w.w.location,i.authorizationHandler.utils=new re(o,n,null),e.prev=6,e.next=9,i.authorizationHandler.completeAuthorizationRequest();case 9:c=e.sent,e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(6),(0,f.e)("silent_auth","Complete authorization request failed: ".concat(JSON.stringify(e.t0.message))),e.t0;case 15:return(0,f.d)("silent_auth","Authorization Request Response received. Trying to get token..."),e.prev=16,l=new ne.TokenRequest({client_id:s,redirect_uri:a,grant_type:ne.GRANT_TYPE_AUTHORIZATION_CODE,code:c.response.code,refresh_token:void 0,extras:{prompt:"none",code_verifier:c.request.internal.code_verifier}}),e.next=20,i.tokenHandler.performTokenRequest(i.authorizationServiceConfiguration,l);case 20:u=e.sent,e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(16),(0,f.e)("silent_auth","Token request failed: ".concat(JSON.stringify(e.t1.message))),e.t1;case 26:if((0,f.d)("silent_auth","Token request completed successfully"),!(0,d.i)(u.accessToken)){e.next=28;break}return e.abrupt("return",u.accessToken);case 28:throw p="Token request failed: access token not present in response",(0,f.e)("silent_auth",p),new Error(p);case 30:if(!(0,d.i)(r)){e.next=33;break}throw h="Received error from message, ".concat(r),(0,f.e)("silent_auth",h),new Error(h);case 33:e.next=36;break;case 35:(0,f.d)("silent_auth","Received message event but authorizationHandler not initialised");case 36:case"end":return e.stop()}},e,null,[[6,12],[16,23]])}))()}},{key:"setConfig",value:function(e){var t=this;return(0,c.Z)(regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.config=e,r=t.config||{},o=r.LOGIN_BASE_URL,n.t0=(0,d.i)(o),!n.t0){n.next=7;break}return n.next=6,j.AuthorizationServiceConfiguration.fetchFromIssuer(o,t.fetchRequestor);case 6:t.authorizationServiceConfiguration=n.sent;case 7:case"end":return n.stop()}},n)}))()}},{key:"fetchAccessToken",value:function(){var e=this.config||{},t=e.CLIENT_ID,n=e.LOGIN_REDIRECT_URL;if(!(0,d.i)(t)||!(0,d.i)(n))throw new Error("Config has not been set.");if(void 0===this.authorizationServiceConfiguration)throw new Error("oauth config has not been fetched.");if(void 0===this.locationLike&&(this.locationLike=w.w.getIframeLocationLike("auth-iframe-navigation-header")),"function"!=typeof this.locationLike.assign)throw new Error("unable to perform authorization request due to incompatible locationLike");var r=new W.LocalStorageBackend(w.w.sessionStorage);if("function"!=typeof r.setItem)throw new Error("invalid storage backend provided");this.authorizationHandler=new X.RedirectRequestHandler(r,new re(null,null,null),this.locationLike,{generateRandom:w.w.generateRandom,deriveChallenge:w.w.deriveChallenge});var o=new V.AuthorizationRequest({client_id:t,redirect_uri:n,scope:"openid",response_type:V.AuthorizationRequest.RESPONSE_TYPE_CODE,state:void 0,extras:{prompt:"none"}},{generateRandom:w.w.generateRandom,deriveChallenge:w.w.deriveChallenge});this.authorizationHandler.performAuthorizationRequest(this.authorizationServiceConfiguration,o)}}]),t}(),ie=function(){function t(n){e(this,t),this.config=null,this.isPorscheCom=!1,this.silentAuthService=null,this.initialisingSilentAuthService=!1,this.locale=n}return n(t,[{key:"setConfig",value:function(e){var t=this;return(0,c.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("object"!=typeof e||null===e){n.next=14;break}if(t.config=e,t.isPorscheCom=t.config.PORSCHE_COM_URL.some(function(e){return e.includes(w.w.location.origin)}),null===t.silentAuthService){n.next=12;break}return n.prev=2,n.next=5,t.silentAuthService.setConfig(t.config);case 5:n.next=12;break;case 7:return n.prev=7,n.t0=n.catch(2),(0,f.e)("user_service_set_config","Could not set silent auth config: ".concat(n.t0)),n.next=12,t.silentAuthService.setConfig(null);case 12:n.next=15;break;case 14:t.config=null,t.isPorscheCom=!1;case 15:case"end":return n.stop()}},n,null,[[2,7]])}))()}},{key:"getUserData",value:function(e){var t=this;return(0,c.Z)(regeneratorRuntime.mark(function n(){var r,o,i,a,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={method:"GET",headers:{"Accept-Language":"".concat(t.locale.toHeaderString()),"x-trace-id":U(),apikey:t.config.CLIENT_ID,Authorization:"Bearer ".concat(e),Accept:"application/json"}},i=void 0===t.locale.country?"":"?country=".concat(t.locale.country),n.prev=1,n.next=4,fetch("".concat(t.config.PROFILE_API_URL).concat(i),o);case 4:r=n.sent,n.next=11;break;case 7:throw n.prev=7,n.t0=n.catch(1),a="Exception occurred while fetching user info: ".concat(JSON.stringify(n.t0.message)),(0,f.e)("user_profile",a),new Error(a);case 11:if(200===r.status){n.next=14;break}throw s="Error occurred: ".concat(r.status," ").concat(r.statusText),(0,f.e)("user_profile",s),new Error(s);case 14:return n.abrupt("return",r.json());case 15:case"end":return n.stop()}},n,null,[[1,7]])}))()}},{key:"getUnreadMessagesCount",value:function(e){var t=this;return(0,c.Z)(regeneratorRuntime.mark(function n(){var r,o,i,a,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={method:"GET",headers:{"x-trace-id":U(),apikey:t.config.CLIENT_ID,Authorization:"Bearer ".concat(e),Accept:"application/json"}},n.prev=1,n.next=4,fetch(t.config.UNREAD_MESSAGES_COUNT_API_URL,o);case 4:i=n.sent,n.next=11;break;case 7:n.prev=7,n.t0=n.catch(1),a="Exception occurred while fetching unread message count: ".concat(JSON.stringify(n.t0.message)),(0,f.e)("unread_messages_count",a);case 11:if(200!==i.status){n.next=19;break}return n.next=14,i.json();case 14:if(s=n.sent,"number"!=typeof(null===(r=null==s?void 0:s.data)||void 0===r?void 0:r.unreadCount)){n.next=17;break}return n.abrupt("return",s.data.unreadCount);case 17:n.next=20;break;case 19:(0,f.e)("unread_messages_count","Error occurred: ".concat(i.status," ").concat(i.statusText));case 20:return n.abrupt("return",0);case 21:case"end":return n.stop()}},n,null,[[1,7]])}))()}},{key:"newMessageEventReceived",value:function(e,t){var n=this;return(0,c.Z)(regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==n.silentAuthService){r.next=2;break}return r.abrupt("return",((0,f.i)("user_service","auth message received but silent auth service not initialised - venting"),t));case 2:return r.prev=2,r.next=5,n.silentAuthService.recieveMessage(e);case 5:o=r.sent,r.next=11;break;case 8:return r.prev=8,r.t0=r.catch(2),r.abrupt("return",void(_.n.state.loggedInState=d.L));case 11:return r.abrupt("return",(0,d.i)(o)?n.accessTokenUpdated(o,t,!0):t);case 12:case"end":return r.stop()}},r,null,[[2,8]])}))()}},{key:"accessTokenUpdated",value:function(e,n,r){var o=this;return(0,c.Z)(regeneratorRuntime.mark(function i(){var a,s,c,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e!==d.R){i.next=2;break}return i.abrupt("return",n);case 2:if(null!==o.config){i.next=4;break}return i.abrupt("return",e);case 4:if(_.n.state.loggedInState=d.a,s=0,c=d.L,!(0,d.i)(e)){i.next=29;break}return i.prev=7,i.next=10,o.getUserData(e);case 10:return u=i.sent,c=t.getUserNameFromUserData(u)||d.b,i.next=14,t.getUserIdFromUserData(u);case 14:a=i.sent,i.next=20;break;case 17:throw i.prev=17,i.t0=i.catch(7),_.n.state.unreadMessagesCount=s,_.n.state.loggedInState=c,i.t0;case 20:return i.prev=20,i.next=23,o.getUnreadMessagesCount(e);case 23:s=i.sent,i.next=28;break;case 26:i.prev=26,i.t1=i.catch(20);case 28:return i.abrupt("return",(_.n.state.unreadMessagesCount=s,_.n.state.loggedInState=c,m.a.state.userId=a,e));case 29:if(o.isPorscheCom&&r){i.next=31;break}return i.abrupt("return",(_.n.state.unreadMessagesCount=s,void(_.n.state.loggedInState=c)));case 31:if(o.initialisingSilentAuthService){i.next=46;break}if(i.prev=32,i.t2=null===o.silentAuthService,!i.t2){i.next=40;break}return o.initialisingSilentAuthService=!0,o.silentAuthService=new oe,i.next=39,o.silentAuthService.setConfig(o.config);case 39:o.initialisingSilentAuthService=!1;case 40:o.silentAuthService.fetchAccessToken(),i.next=46;break;case 43:i.prev=43,i.t3=i.catch(32),(0,f.e)("user_service","could not init silent auth service: ".concat(i.t3)),_.n.state.unreadMessagesCount=s,_.n.state.loggedInState=c;case 46:case"end":return i.stop()}},i,null,[[7,17],[20,26],[32,43]])}))()}},{key:"revokeAccessToken",value:function(e){var t=this;return(0,c.Z)(regeneratorRuntime.mark(function n(){var r,o,i,a,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==t.config&&(0,d.i)(e)){n.next=2;break}return n.abrupt("return");case 2:return r=t.config,o=r.LOGIN_BASE_URL,i=r.CLIENT_ID,n.prev=3,n.next=6,fetch("".concat(o,"/as/revoke_token.oauth2"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"token=".concat(encodeURIComponent(e),"&client_id=").concat(encodeURIComponent(i))});case 6:a=n.sent,n.next=13;break;case 9:throw n.prev=9,n.t0=n.catch(3),s="Exception occurred while revoking access token: ".concat(JSON.stringify(n.t0.message)),(0,f.e)("revoke_access_token",s),n.t0;case 13:if(a.ok){n.next=15;break}throw(0,f.e)("revoke_access_token",401===a.status?"Unauthorized revocation attempt":"Error when revoking acccess token"),new Error("Revoke access token failed");case 15:case"end":return n.stop()}},n,null,[[3,9]])}))()}}],[{key:"getUserNameFromUserData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";return(0,d.i)(e.firstName)?(t=e.firstName,(0,d.i)(e.middleName)?(t+=" ".concat(e.middleName),(0,d.i)(e.lastName)&&(t+=" ".concat(e.lastName))):(0,d.i)(e.lastName)&&(t+=" ".concat(e.lastName))):(0,d.i)(e.middleName)?(t=e.middleName,(0,d.i)(e.lastName)&&(t+=" ".concat(e.lastName))):(0,d.i)(e.lastName)&&(t=e.lastName),t}},{key:"getUserIdFromUserData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.w.hashString(e.porscheId);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}))()}}]),t}(),ae=function(){function t(n){e(this,t),(0,l.r)(this,n),this.accessTokenExpired=(0,l.c)(this,"accessTokenExpired",7),this.navigationDidLoad=(0,l.c)(this,"navigationDidLoad",7),this.phnLogout=(0,l.c)(this,"phnLogout",6),this.config=null,this.accessibilityStatement=d.c,this.countryRecommenderContent=d.d,this.scrolledPastHeader=!1,this.breakpoint=w.w.getBreakpoint(),this.showCountryRecommender=w.w.redirected,this.countryRecommenderClosed=!1,this.menuDrawerClosed=!0,this.localeObject=new h.L,this.userService=new ie(this.localeObject)}return n(t,[{key:"localeWatchHandler",value:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.localeObject.setLocale(e.locale),m.a.state.locale.setLocale(e.locale),t.next=4,e.initNavContentStore();case 4:case"end":return t.stop()}},t)}))()}},{key:"newAccessTokenReceived",value:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.accessToken!==d.R,!t.t0){t.next=7;break}if(t.t1=e.accessToken!==e.accessTokenState,!t.t1){t.next=6;break}return t.next=6,e.accessTokenStateUpdated(e.accessToken);case 6:e.accessToken=d.R;case 7:case"end":return t.stop()}},t)}))()}},{key:"newEnvReceived",value:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initEnvironment();case 2:return t.next=4,e.initNavContentStore();case 4:return t.next=6,e.accessTokenStateUpdated(e.accessTokenState);case 6:case"end":return t.stop()}},t)}))()}},{key:"scrollHandler",value:function(){this.scrolledPastHeader=this.el.getBoundingClientRect().bottom<=0}},{key:"newAuthMessageReceived",value:function(e){var t=this;return(0,c.Z)(regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.config||{},o=r.LOGIN_REDIRECT_URL,n.t0=(0,d.i)(o)&&o.startsWith(e.origin),!n.t0){n.next=6;break}return n.next=5,t.userService.newMessageEventReceived(e,t.accessTokenState);case 5:t.accessTokenState=n.sent;case 6:case"end":return n.stop()}},n)}))()}},{key:"handleLogout",value:function(e){var t=this;return(0,c.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.userService.revokeAccessToken(t.accessTokenState);case 3:n.next=8;break;case 5:return n.prev=5,n.t0=n.catch(0),n.abrupt("return");case 8:t.phnLogout.emit(),w.w.location=e.detail;case 9:case"end":return n.stop()}},n,null,[[0,5]])}))()}},{key:"resizeHandler",value:function(){this.breakpoint=w.w.getBreakpoint()}},{key:"accessTokenStateUpdated",value:function(e){var t=this;return(0,c.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=k.n.state.metafunctionalities.length>1,n.prev=1,n.next=4,t.userService.accessTokenUpdated(e,t.accessTokenState,r);case 4:t.accessTokenState=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),t.accessTokenExpired.emit(),t.accessTokenState=void 0;case 10:case"end":return n.stop()}},n,null,[[1,7]])}))()}},{key:"initEnvironment",value:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object.keys(x),!(0,d.i)(e.env)||!n.includes(e.env)){t.next=9;break}return e.config=x[e.env],g.f.setFeatures(e.env),t.next=6,e.userService.setConfig(e.config);case 6:m.a.set("environment",e.env),t.next=10;break;case 9:e.env=d.e;case 10:case"end":return t.stop()}},t)}))()}},{key:"initNavContentStore",value:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.localeObject.toString()&&null!==e.config){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,S(e.config.CONTENT_URL,e.localeObject);case 5:n=t.sent,t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(2),t.abrupt("return",void(e.locale=e.localeObject.setLocale().toString()));case 11:Object.keys(n).forEach(function(e){k.n.set(e,n[e])}),g.f.isFeatureEnabled(d.F,w.w.location.search)&&k.n.set("dealer",g.m),e.accessibilityStatement=k.n.state.accessibilityStatement,e.countryRecommenderContent=k.n.state.countryRecommender,(0,d.i)(e.clientId)&&(_.n.state.applicationClientId=e.clientId);case 12:case"end":return t.stop()}},t,null,[[2,8]])}))()}},{key:"componentWillLoad",value:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.el.style.setProperty("--scrollbar-width",w.w.getScrollbarWidth()),(0,d.i)(e.locale)&&(e.localeObject.setLocale(e.locale),m.a.state.locale.setLocale(e.locale)),t.next=4,e.initEnvironment();case 4:return t.next=6,e.initNavContentStore();case 6:(0,d.i)(e.accessToken)&&e.accessToken!==d.R&&(e.accessTokenState=e.accessToken,e.accessToken=d.R);case 7:case"end":return t.stop()}},t)}))()}},{key:"componentDidLoad",value:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=new E(m.a.state),(m.a.state.w.pagData=m.a.state.w.pagData||[]).push(n.event()),_.n.state.navigationLoaded?(w.w.navigationLoaded=!0,e.navigationDidLoad.emit()):_.n.onChange("navigationLoaded",function(){w.w.navigationLoaded=!0,e.navigationDidLoad.emit()}),w.w.version=d.V,t.next=6,e.accessTokenStateUpdated(e.accessTokenState);case 6:case"end":return t.stop()}},t)}))()}},{key:"skipToMainContent",value:function(e){e.stopPropagation();var t=this.el.shadowRoot.querySelector("#main");t.tabIndex=0,t.focus()}},{key:"mainContentTab",value:function(){this.el.shadowRoot.querySelector("#main").tabIndex=-1}},{key:"addFocus",value:function(){var e=this.el.shadowRoot.querySelector("phn-p-button.skip-content");e.classList.add("focused");var t=this.el.shadowRoot.querySelector("phn-crest phn-p-marque");e.style.left="".concat(t.getBoundingClientRect().left,"px")}},{key:"removeFocus",value:function(){var e=this.el.shadowRoot.querySelector("phn-p-button.skip-content");e.classList.remove("focused"),e.style.left=""}},{key:"render",value:function(){var e=this,t=this.config||{},n=t.ASSETS_URL,r=void 0===n?"":n,o=t.COUNTRY_SELECTOR_URL,i=void 0===o?"":o,a=t.FOOTER_ASSETS_URL,s=void 0===a?"":a,c=t.LOGIN_BASE_URL,u=void 0===c?"":c,h=t.DEALER_API_URL,f=void 0===h?"":h;return(0,d.i)(_.n.state.loggedInState)&&(m.a.state.loginStatus=(0,d.g)(_.n.state.loggedInState)),(0,l.h)(l.H,null,this.showCountryRecommender&&null!==this.countryRecommenderContent&&!this.countryRecommenderClosed?(0,l.h)("phn-country-recommender",{locale:this.localeObject,content:this.countryRecommenderContent,assetsURL:s,countrySelectorURL:i,env:this.env,role:"region","aria-label":"Change recommended Region or Language",onBannerClosed:function(){e.countryRecommenderClosed=!0}}):null,"en-US"===this.locale&&null!==this.accessibilityStatement?(0,l.h)("a",{class:"sr-only",href:this.accessibilityStatement.Link},this.accessibilityStatement.Text):null,(0,l.h)("phn-p-button",{variant:"primary",class:"skip-content",onFocus:function(){return e.addFocus()},onClick:function(t){return e.skipToMainContent(t)},onBlur:function(){return e.removeFocus()}},"Skip to main content"),(0,l.h)("header",null,(0,l.h)("phn-p-flex",{class:"header-content","justify-content":"space-between"},(0,l.h)("phn-crest",{breakpoint:this.breakpoint}),this.breakpoint<p.b.l?(0,l.h)("phn-burger-button",{onClick:function(t){e.usingKeyboard=(0,d.f)(t),e.menuDrawerClosed=!e.menuDrawerClosed}}):(0,l.h)("phn-menu-desktop-level-1",{assetsURL:r,loginURL:u,breakpoint:this.breakpoint})),this.breakpoint<p.b.l&&!this.menuDrawerClosed?(0,l.h)("phn-menu-drawer",{assetsURL:r,loginURL:u,breakpoint:this.breakpoint,initialUsingKeyboard:this.usingKeyboard,dealerApiUrl:f,onDrawerClosed:function(t){var n,r=t.detail.usingKeyboard;e.menuDrawerClosed=!0,e.usingKeyboard=r,r&&(null===(n=(0,d.h)(e.el.shadowRoot.querySelector("phn-burger-button phn-p-button-pure")))||void 0===n||n.focus())}}):null),(0,l.h)("div",{class:"header-border"}),"preview"===this.env?(0,l.h)("phn-preview-badge",{versionString:"Header ".concat(d.V," - PP content")}):null,(0,l.h)("div",{id:"main",tabindex:"-1",class:"main-content",onBlur:function(){return e.mainContentTab()}}))}},{key:"el",get:function(){return(0,l.g)(this)}}],[{key:"assetsDirs",get:function(){return["auth"]}},{key:"watchers",get:function(){return{locale:["localeWatchHandler"],accessToken:["newAccessTokenReceived"],env:["newEnvReceived"]}}}]),t}();ae.style='@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeIn{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeIn{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}:host{display:block;position:relative;background-color:#fff;visibility:visible;height:auto !important}:host header{font-family:"Porsche Next", "Arial Narrow", Arial, "Heiti SC", SimHei, sans-serif;font-weight:400;height:3.8125rem;color:#000;-webkit-box-sizing:content-box;box-sizing:content-box;margin:0 7vw}@media (min-width: 1000px){:host header{padding-left:var(--scrollbar-width)}}@media (min-width: 1760px){:host header{margin:0 10vw}}@media (min-width: 1920px){:host header{margin:0 auto;width:96rem}}@media (min-width: 760px){:host header{height:4.4375rem}}@media (min-width: 1300px){:host header{height:7.3125rem;-ms-flex-direction:row;flex-direction:row}}@media (min-width: 1760px){:host header{height:7.6875rem}}:host header .header-content{height:100%}:host header phn-crest{z-index:1;-webkit-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0)}@media (min-width: 1300px){:host header phn-crest{z-index:400}}:host header .burger-button:focus{outline-width:2px;outline-style:solid;outline-offset:1px;outline-color:currentColor}:host .header-border{height:1px;background-color:#e3e4e5}:host phn-p-button.skip-content{display:none}@media (min-width: 1000px){:host phn-p-button.skip-content{display:-ms-inline-flexbox;display:inline-flex;left:-999px;position:absolute;width:auto;height:auto;overflow:hidden;z-index:-999}}:host phn-p-button.skip-content.focused{outline-width:2px;outline-style:solid;outline-offset:1px;outline-color:currentColor;overflow:visible;z-index:999}:host .main-content{width:20px}:host .main-content:focus{outline-style:none}:host .sr-only{position:absolute;width:1px;height:1px;white-space:nowrap;overflow:hidden;clip:rect(1px, 1px, 1px, 1px);-webkit-clip-path:inset(50%);clip-path:inset(50%)}'}}])}();