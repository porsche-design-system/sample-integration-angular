"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[114],{114:(V,O,v)=>{v.d(O,{G:()=>C});var d=v(496),a=v(436),w=Object.defineProperty,o=(s,e,t)=>(((s,e,t)=>{e in s?w(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t})(s,"symbol"!=typeof e?e+"":e,t),t);const R={clean:{enabled:!1,executionPlace:"AFTER_MERGE",values:["",void 0,null]},logging:{enabled:!0,level:"warn"},validation:{enabled:!1,allowUnknown:!1,verbose:!0},webProperties:{enabled:!0,eventNamePattern:/.*/,reactiveUrl:!0,reactiveDimensions:!0}};class F{create(e){return"string"!=typeof e.event||0===e.event.length?{}:{context:{eventAction:e.event}}}}const M=(s,e)=>{let t;for(t in s)if(s&&s[t]&&!1===e(s[t],t))return!1;return!0},D=(s,e)=>M(s,(t,n)=>{for(const i in s[n])if(!1===e(t[i],i,t,n))return!1;return!0}),L=s=>{for(const e in s)return!1;return!0},T=(s,e=(t=>null==(t=R.clean)?void 0:t.values)()||[])=>(D(s,(t,n,i,r)=>{e.includes(t)&&(delete i[n],L(i)&&delete s[r])}),s),I=s=>(M(s,(e,t)=>("function"!=typeof e||(s[t]=e()),!0)),D(s,(e,t,n)=>("function"!=typeof e||(n[t]=e()),!0)),s),x=(s,e)=>{const t=e.split(".");if(2!==t.length)return;const n=s[t[0]];return n?n[t[1]]:void 0},_=R.logging;var A=(s=>(s[s.error=0]="error",s[s.warn=1]="warn",s[s.log=2]="log",s))(A||{});const S=class J{constructor(e,t){o(this,"prefix"),o(this,"settings"),this.prefix=e,this.settings={..._,...t}}_getMergedSettings(e){return e?{...this.settings,...e}:this.settings}_isAllowed(e,t){if(!J.isAvailable||!t.enabled)return!1;const n=A[t.level];switch(e){case"error":case"warn":return n>=A[e];case"info":case"log":case"debug":case"dir":return n>=2;default:return!1}}_log(e,t="log",n){const i=this._getMergedSettings(n);this._isAllowed(t,i)&&("dir"===t?(console.log(`[${this.prefix}] ${t}:`),console[t](e)):console[t](`[${this.prefix}] ${e}`))}log(e,t){this._log(e,"log",t)}dir(e,t){this._log(e,"dir",t)}debug(e,t){this._log(e,"debug",t)}error(e,t){this._log(e,"error",t)}info(e,t){this._log(e,"info",t)}warn(e,t){this._log(e,"warn",t)}};o(S,"isAvailable",typeof console<"u");let $=S;const h=(...s)=>{const e={};return s.forEach(t=>{if(L(t))return;const n={...e,...t};let i;for(i in n)e[i]="object"!=typeof n[i]||Array.isArray(n[i])?n[i]:{...e[i],...t[i]}}),e};class X{create(e){return T({context:{timestamp:e.timestamp,server:e.hostname},pageExperience:{pageId:e.url},visitor:{deviceBrowserBreakpoint:e.breakpoint,deviceBrowserHeight:e.height,deviceBrowserOrientation:e.orientation,deviceBrowserWidth:e.width,deviceType:e.deviceType,useragent:e.userAgent}},[void 0])}}const Z=R.webProperties,K=()=>window.location.href.replace(/[?#].*/,""),b=()=>window.innerHeight.toString(),k=()=>window.innerHeight>window.innerWidth?"p":"l",l=()=>window.innerWidth.toString(),G=s=>{if(!s.breakpoints||s.breakpoints.length<1)return;const{breakpoints:e}=s,t=()=>{const n=window.innerWidth;let i=0,r=0;for(;r<e.length&&n>=e[r];)i=e[r],r++;return i.toString()};return s.reactiveDimensions?t:t()},ee=(s,e)=>{switch(e){case"string":case"number":case"boolean":return typeof s===e;case"any[]":return Array.isArray(s)&&s.length>0;case"Record<string, any>":return"object"==typeof s&&!Array.isArray(s)&&Object.keys(s).length>0;case"any":return!0;default:if(("boolean"==typeof s||"number"==typeof s||"string"==typeof s)&&e.indexOf("|")>0)return e.split("|").map(t=>{const n=t.trim();return/^'.*'$/.test(n)?n.replace(/(^ ?'?|'? ?$)/g,""):/^(true|false)$/.test(n)?"true"===n:/^-?(\d*\.)?\d+$/.test(n)?Number.parseFloat(n):n.replace(/(^ ?'?|'? ?$)/g,"")}).includes(s)}return!0};class ne{constructor(e,t,n="GlobalDataLayer"){o(this,"_className"),o(this,"_settings"),o(this,"_defaultProperties"),o(this,"_logger"),o(this,"_webPropertiesHandled",!1),o(this,"_dataLayerStore"),o(this,"_extensions",new Map);const i=h(R,e||{});this._className=n,this._logger=new $(this._className,i.logging),this._settings=i,t?this._dataLayerStore=t:typeof window<"u"?(this._dataLayerStore=window.pagData=window.pagData||[],this._logger.info("`dataLayerStore` was set to default `window.pagData`")):(this._dataLayerStore=[],this._logger.info("`dataLayerStore` was set to default `[]`")),this._defaultProperties=[]}setup(){this._handleDefaultWebProperties()}get Settings(){return this._settings}get DataLayerStore(){return this._dataLayerStore}getRegisteredExtension(e){const t=new e;return this.getRegisteredExtensionByClassName(t.className)}getRegisteredExtensionByClassName(e){return this._extensions.has(e)?this._extensions.get(e):void 0}getRegisteredExtensions(){const e=[];for(const t of this._extensions.values())e.push(t);return e}registerExtension(e,t=!1){t||!this._extensions.has(e.className)?(e.dataLayerInstance=this,this._extensions.set(e.className,e),this._logger.info(t?`Overriden registration for extension class <${e.className}>.`:`Registered extension class <${e.className}>.`)):this._logger.warn(`Tried to register extension class <${e.className}> which already exists.`)}removeExtension(e){const t=new e;this._extensions.has(t.className)?this._extensions.delete(t.className):this._logger.warn(`Tried to remove not existing extension class <${t.className}>.`)}removeExtensionByClassName(e){this._extensions.has(e)?this._extensions.delete(e):this._logger.warn(`Tried to remove not existing extension class <${e}>.`)}push(e,t=[{}],n){var i,r;if(0===e.length)return!1;const c=n&&!L(n)?h(this._settings,n):this._settings;Array.isArray(t)||(t=[t]),t.forEach(I);const W=this._eventNamePayloadFactory.create({event:e}),H=I(this.getDefaultProperties(e));c.clean.enabled&&"BEFORE_MERGE"===c.clean.executionPlace&&[H||{},...t].forEach(E=>T(E,c.clean.values));const P=h(W,H||{},...t);if(c.clean.enabled&&"AFTER_MERGE"===c.clean.executionPlace&&T(P,c.clean.values),null!=(i=c?.validation)&&i.enabled&&null!=(r=c?.validation)&&r.eventMatrix){const E=((s,e,t)=>{const n={level:null,issues:[]};if(!t.enabled||!t.eventMatrix)return n;const{events:i,...r}=t.eventMatrix,c=i.indexOf(s);if(-1===c)return n.level="error",n.issues.push({level:"error",type:"EVENT_NOT_FOUND",name:s,message:`'${s}': Event does not exist.`}),n;const W=(s=>{if(!s)return[];const e=[];return D(s,(t,n,i,r)=>{e.push(`${r.toString()}.${n.toString()}`)}),e})(e),H=Object.keys(r),P=W.filter(g=>!H.includes(g));let E;for(E in P.length>0&&(t.allowUnknown||((s,e)=>{s&&D(s,(t,n,i,r)=>{e.includes(`${r.toString()}.${n.toString()}`)&&(delete i[n],L(i)&&delete s[r])})})(e,P),P.forEach(g=>{n.level=n.level??"warn",n.issues.push({level:"warn",type:"PROPERTY_DOES_NOT_EXIST",name:g,message:`'${g}': Property does not exist in the given Event Matrix.${t.allowUnknown?"":" It was omitted from the DataLayer payload."}`})})),r){const g=r[E],y=typeof g.e[c]<"u",U=1===g.r,j=e?x(e,E):void 0,z=typeof j<"u";if(y&&U&&!z&&(n.level="error",n.issues.push({level:"error",type:"REQUIRED_PROPERTY_MISSING",name:E,message:`'${E}': The required property is missing.`}),!t.verbose)||z&&!ee(j,g.t)&&(n.level="error",n.issues.push({level:"error",type:"WRONG_PROPERTY_TYPE",name:E,message:`'${E}': Wrong type detected. Expected '${g.t}', got '${typeof j}'.`}),!t.verbose))return n}return n})(e,P,c.validation),g=E.issues.sort((y,U)=>y.level!==U.level&&"warn"===U.level?-1:0).map(y=>`- [${y.level}]: ${y.message}`).join("\n");switch(E.level){case"error":return this._logger.error(`Validation failed for event '${e}' with errors/warnings: \n${g}`,c.logging),!1;case"warn":this._logger.warn(`Validation success for event '${e}' with warnings: \n${g}`,c.logging);break;default:this._logger.info(`Validation success for event '${e}'.`,c.logging)}}return this._dataLayerStore.push(P),!0}getDefaultProperties(e){const t={byName:[],byArray:[],byRegex:[]};this._defaultProperties.forEach(i=>i.identifier===e?t.byName.push(i.data):Array.isArray(i.identifier)&&i.identifier.includes(e)?t.byArray.push(i.data):i.identifier instanceof RegExp&&i.identifier.test(e)?t.byRegex.push(i.data):void 0);const n=[...t.byRegex,...t.byArray,...t.byName];if(n.length)return h(...n)}setDefaultProperties(e,t){const n=this._defaultProperties.find(i=>i.identifier===e);n?n.data=h(n.data,t):this._defaultProperties.push({identifier:e,data:t})}_handleDefaultWebProperties(){if(this._webPropertiesHandled||!this._settings.webProperties.enabled)return;const e=((s,e)=>{const t={...Z,...this._settings.webProperties},n={breakpoint:G(t),timestamp:(new Date).toISOString(),hostname:window.location.hostname,url:t.reactiveUrl?K:K(),height:t.reactiveDimensions?b:b(),orientation:t.reactiveDimensions?k:k(),width:t.reactiveDimensions?l:l(),deviceType:window.matchMedia("(hover: none), (pointer: coarse)").matches?"mobile":"desktop",userAgent:window.navigator.userAgent};return e?e.create(n):n})(0,this._webPayloadFactory);this.setDefaultProperties(this._settings.webProperties.eventNamePattern,e),this._webPropertiesHandled=!0}}class se extends ne{constructor(e,t,n="GlobalDataLayer"){super(e,t,n),o(this,"_eventNamePayloadFactory"),o(this,"_webPayloadFactory"),this._eventNamePayloadFactory=new F,this._webPayloadFactory=new X,this.setup()}setup(){super.setup()}}function ie(s){switch(s){case d.E.PRODUCTION:return"P";case d.E.PREVIEW:return"PP";default:return"K"}}class C{constructor(){this.homeNavEventId=/^PAGHomeNav_/,this.initialise()}static getInstance(){return C.instance||(C.instance=new C),C.instance}initialise(){this.gdl=new se}pushDataLayerEvent(e,t){t?this.gdl.push(e,t):this.gdl.push(e)}setEnvironment(e){this.gdl.setDefaultProperties(this.homeNavEventId,{context:{environment:ie(e)}})}setPageName(e){this.gdl.setDefaultProperties(this.homeNavEventId,{pageExperience:{pageName:e}})}setUser(e,t){this.gdl.setDefaultProperties(this.homeNavEventId,{ids:{userId:e},visitor:{loginStatus:t}})}setLocale(e){try{const{country:t,language:n}=(0,a.s)(e);this.gdl.setDefaultProperties(this.homeNavEventId,{context:{country:t,language:n}})}catch{}}setDefaultProperties(e,t){let n={context:{applicationId:a.a},visitor:{loginStatus:!1}};try{const{country:i,language:r}=(0,a.s)(e);n=Object.assign(Object.assign({},n),{context:Object.assign(Object.assign({},n.context),{country:i,language:r,applicationName:a.D})})}catch{}(0,d.i)(t)&&(n=Object.assign(Object.assign({},n),{pageExperience:{pageName:t}})),this.gdl.setDefaultProperties(this.homeNavEventId,n)}}},436:(V,O,v)=>{v.d(O,{C:()=>R,D:()=>o,E:()=>w,a:()=>u,b:()=>F,c:()=>f,d:()=>T,e:()=>M,f:()=>b,g:()=>D,h:()=>L,i:()=>x,n:()=>k,s:()=>Y});var d=v(129),a=v(496);const w={GENERAL_LOAD:"PAGHomeNav_General_Load",COUNTRY_RECOMMENDER_LOAD:"PAGHomeNav_CountryRecommender_Load",COUNTRY_RECOMMENDER_CHANGE:"PAGHomeNav_CountryRecommenderChange_Click",COUNTRY_RECOMMENDER_CLOSE:"PAGHomeNav_CountryRecommenderClose_Click",CREST_CLICK:"PAGHomeNav_Crest_Click",NAVIGATION_LOAD:"PAGHomeNav_Navigation_Load",MODEL_OVERLAY_LOAD:"PAGHomeNav_ModelRangeOverlay_Load",MENU_BACK_CLICK:"PAGHomeNav_MenuBack_Click",MENU_CLOSE_CLICK:"PAGHomeNav_MenuClose_Click",META_FUNCTION_CLICK:"PAGHomeNav_MetaFunction_Click",MODEL_CLICK:"PAGHomeNav_Model_Click",MODEL_META_FUNCTION_CLICK:"PAGHomeNav_ModelMetaFunction_Click",MODEL_CTA_CLICK:"PAGHomeNav_ModelCTA_Click",MODEL_RANGE_CLICK:"PAGHomeNav_ModelRange_Click",MORE_CLICK:"PAGHomeNav_More_Click",NAVIGATION_CLICK:"PAGHomeNav_Navigation_Click",NAVIGATION_LINK_CLICK:"PAGHomeNav_NavigationLink_Click",DEALER_SEARCH_SCREEN_LOAD:"PAGHomeNav_FindADealerSearchScreen_Load",DEALER_RESULTS_SCREEN_LOAD:"PAGHomeNav_FindADealerResultsScreen_Load",DEALER_SEARCH_CLICK:"PAGHomeNav_FindADealerSearch_Click",DEALER_DROPDOWN_CLICK:"PAGHomeNav_FindADealerDropdown_Click",DEALER_DROPDOWN_SELECT_CLICK:"PAGHomeNav_FindADealerDropdownSelect_Click",DEALER_GEOLOCATION_CLICK:"PAGHomeNav_FindADealerLocateMe_Click",DEALER_RESULT_CLICK:"PAGHomeNav_FindADealerDealer_Click",DEALER_DETAILS_SCREEN_LOAD:"PAGHomeNav_FindADealerDealerScreen_Load",DEALER_CONTACT_CLICK:"PAGHomeNav_FindADealerDealerContact_Click",DEALER_MAP_CLICK:"PAGHomeNav_FindADealerMap_Click",CONTEXTUAL_BUTTON_CLICK:"PAGHomeNav_IconContextLink_Click",DRAWER_LOAD:"PAGHomeNav_Drawer_Load",PCOM_SEARCH_CLICK:"PAGHomeNav_IconGlobalLink_Click"},u="nav",o="edgecast_CDN",f={closeButton:"close-button",backdrop:"backdrop",backButton:"back-button",menuItem:"menu-item",sideDrawerItem:"side-drawer-item",doubleDrawer:"double-drawer",singleDrawer:"single-drawer",bodyTypeButton:"body-type-button",myPorscheDrawer:"my-porsche-drawer",dealerSearchForm:"dealer-search-form"},R={Link:"link",Button:"button",Image:"image"},F={SingleDrawer:"singleDrawer",DoubleDrawer:"doubleDrawer"},M="level1-mainmenu_level2-find_a_dealer",D="level1-mainmenu_level3-dealer-details",L="level2_dealer-search-form",T="level3_dealer-details",m={ASIA_PACIFIC:"asia-pacific",EASTERN_EUROPE:"eastern-europe",MIDDLE_EAST:"middle-east",LATIN_AMERICA:"latin-america",INTERNATIONAL:"international"},I={AP:m.ASIA_PACIFIC,CE:m.EASTERN_EUROPE,LL:m.LATIN_AMERICA,WW:m.INTERNATIONAL};function x(l){return Object.values(m).includes(l)}function Y(l){if(!(0,a.i)(l))throw new d.N("empty locale passed",d.a.NO_INPUT);const N=l.substring(0,l.indexOf("-")).toLowerCase();let p=l.substring(l.indexOf("-")+1).toLowerCase();if(x(p)||(p=p.toUpperCase()),!(0,a.i)(N)||!(0,a.i)(p))throw new d.N(`invalid locale ${l} passed`,d.a.INVALID_INPUT);return{language:N,country:(0,a.h)(I,p)?I[p]:p}}const _={id:"",text:"",link:"",icon:"",description:""},A={id:"",text:"",description:""},h={id:"",text:"",link:"",children:[]};function b(l,N){if(!(0,a.i)(N))return null;if(null!==l){if(l.id===N)return l;if(!Array.isArray(l.children))return null;for(const p of l.children){const G=b(p,N);if(null!==G)return G}}return null}const k=(0,a.u)({menu:A,crest:_,back:A,close:A,accessibilityStatement:_,countryRecommender:{statement:"",region:"",language:"",change:A},contextualButtons:{},contextualLinks:{},models:{text:"",id:"",all:{id:"",text:"",link:"",icon:"",description:""},series:[]},dealer:{id:"",text:"",numberOfDealers:42,search:{id:"",text:"",form:{inputPlaceholder:"",inputDescription:""},clear:A,or:"",geolocation:A,dropdown:{province:"",city:"",selectAProvince:"",selectACity:""},load:"",map:_,outboundLink:_},details:{id:"",finder:_,bookService:_,testDrive:_,backToSearch:""},openingHours:null},myPorsche:{id:"",text:"",link:"",loggedInFallback:"",login:_,loginText:"",logout:_,messages:_,more:null,signup:_,signupText:"",links:[],savedSearches:null,savedVehicles:null},vehiclePurchase:h,shop:{cart:"",wishlist:null,additionalContent:[],id:"",text:"",link:"",children:[],availableLocales:[],availableLocalesOnlyForShop:[],logoLinksToShopLocales:[]},externalShop:_,experience:h,services:h,error:{wrong:"",retry:"",noResults:"",noInput:"",invalidInput:"",geolocationDenied:""},loadingDescription:"",legacyMore:h,legacyShop:h})},129:(V,O,v)=>{v.d(O,{N:()=>d,a:()=>a,g:()=>w});class d extends Error{constructor(o,f){super(o),this.type=f,Object.setPrototypeOf(this,d.prototype)}}const a={NO_INPUT:"NO_INPUT",INVALID_INPUT:"INVALID_INPUT",NO_RESULTS:"NO_RESULTS",GENERAL:"GENERAL",RETRY:"RETRY",GEOLOCATION_DENIED:"GEOLOCATION_DENIED",UNAUTHORIZED:"UNAUTHORIZED"};function w(u,o){if(!(o instanceof d))return u.wrong;switch(o.type){case a.NO_INPUT:return u.noInput;case a.INVALID_INPUT:return u.invalidInput;case a.NO_RESULTS:return u.noResults;case a.GENERAL:return u.wrong;case a.RETRY:return u.retry;case a.GEOLOCATION_DENIED:return u.geolocationDenied;default:return u.wrong}}}}]);