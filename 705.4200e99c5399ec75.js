"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[705],{213:(D,T,_)=>{_.d(T,{a:()=>b,d:()=>S});var h=_(861),s=_(556),m=_(997),l=_(49),E=_(181);const S=(0,s.d)({searchTerm:"",results:null,savedDealerCookie:function A(){try{return JSON.parse(m.w.getCookie(l.S))}catch{return null}}(),ppnDealers:{},dealersOfRegion:{regions:[]}});S.onChange("savedDealerCookie",y=>{m.w.setCookie(l.S,JSON.stringify(y))});const O={},w=new class C{constructor(){this.client=null,this.experiments=[]}init(){var i=this;return(0,h.Z)(function*(){if(E.f.isABTestingToggleActive())try{yield i.setClient(),yield i.loadExperiments()}catch(t){E.l.error("Could not initialize AbTesting",t)}})()}execute(i){if(E.f.isABTestingToggleActive())try{const t=this.getExperiment(i);this.getVariation(t).activate()}catch(t){E.l.error(`Could not execute experiment ${i}`,t)}}executeContentChange(i){if(E.f.isABTestingToggleActive())try{const t=this.getExperiment(i.experienceName),e=this.getVariation(t);return"original"===e.name?i.children:e.activate()}catch(t){E.l.error(`Could not execute experiment ${i.experienceName}`,t)}return i.children}setClient(){var i=this;return(0,h.Z)(function*(){if(i.client)return Promise.resolve(i.client);yield i.injectScript();const t=window;return i.client=t.Matomo,i.client})()}loadExperiments(){var i=this;return(0,h.Z)(function*(){const e=i.getClient().AbTesting.Experiment,n=i.getAbTestingDefinitions();for(const o in n){const d=new e(n[o]);i.experiments.push(d)}})()}loadContentGeneratorExperiments(){var i=this;return(0,h.Z)(function*(){if(E.f.isABTestingToggleActive()){const e=i.getClient().AbTesting.Experiment,n=s.a.state.abExperiences;if(n)for(const o of n){const c=o.variations.map(g=>({name:g.name,activate:()=>g.children}));c.push({name:"original",activate:()=>null});const d=new e(Object.assign(Object.assign({},o),{variations:c}));i.experiments.push(d)}}})()}getExperiment(i){const t=this.experiments.find(e=>e.name===i);if(!t)throw new l.N(`No experiment with name: ${i} found`,l.a.GENERAL);return t}getVariation(i){const t=i.getActivatedVariationName(),e=i.variations.find(n=>n.name===t);if(!e)throw new l.N(`No variation in experiment: ${i.name} with name: ${t} found`,l.a.GENERAL);return e}getClient(){if(!this.client)throw new l.N("No client is set, you must call init first",l.a.GENERAL);return this.client}injectScript(){return new Promise((i,t)=>{const e=document.createElement("script");e.text=this.getMatomoScript(),document.head.appendChild(e);const n=(0,l.u)(document.querySelector('script[src="//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js"]'));n?(n.onload=()=>{i(!0)},n.onerror=()=>t(new l.N("Could not inject Matomo script",l.a.GENERAL))):t(new l.N("There is no HTML Script element available",l.a.GENERAL))})}getAbTestingDefinitions(){return O}getMatomoScript(){return`var _paq = window._paq = window._paq || [];\n    _paq.push(['trackPageView']);\n    _paq.push(['enableLinkTracking']);\n    (function() {\n      var u="https://porsche.matomo.cloud/";\n      _paq.push(['setTrackerUrl', u+'matomo.php']);\n      _paq.push(['setSiteId', ${"production"===s.n.state.env?"7":"8"}]);\n      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n      g.async=true; g.src='//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);\n    })\n   ();`}};function b(){return w}},181:(D,T,_)=>{_.d(T,{F:()=>S,f:()=>p,l:()=>d});var h=_(861),s=_(556),m=_(49),l=_(997);const S="porsche_75_years_logo",n={local:{featureOverrideEnabled:{enabled:!0},homenav_1723:{enabled:!0},navi_3:{enabled:!1},porsche_75_years_logo:{enabled:!1},one_ui:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}},preview:{featureOverrideEnabled:{enabled:!0},homenav_1723:{enabled:!0},navi_3:{enabled:!1},porsche_75_years_logo:{enabled:!1},one_ui:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}},test:{featureOverrideEnabled:{enabled:!0},homenav_1723:{enabled:!0},navi_3:{enabled:!0},porsche_75_years_logo:{enabled:!1},one_ui:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}},production:{featureOverrideEnabled:{enabled:!1},homenav_1723:{enabled:!1},navi_3:{enabled:!0},porsche_75_years_logo:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}}},d=new class c{constructor(){this.env=null,this.version=m.V,this.breakpoint=0,this.locale=null}init(r,a,u){this.env=r,this.breakpoint=a,this.locale=u}log(r,a,u,f,v){if(this.env!==s.b.TEST)try{const R=JSON.stringify({name:r,level:a,env:this.env,breakpoint:this.breakpoint,locale:this.locale,version:this.version,hostname:l.w.location.hostname,pathname:l.w.location.pathname,id:u,errorType:v||"",message:f});this.env===s.b.PRODUCTION?"debug"!==a&&fetch("https://logs.nav.porsche.com",{method:"POST",body:R,mode:"no-cors"}):console[a](R)}catch{}}info(r,a=""){this.log("PHN_HEADER_LOG_ENTRY","info",r,a)}error(r,a){this.log("PHN_HEADER_LOG_ENTRY","error",r,a.message,a instanceof m.N?a.type:m.a.GENERAL)}},p=new class g{constructor(r=(0,s.g)(m.w),a=n){this.featureEnvMap=a,this.features={},this.env="local",this.isShopToggleActive=()=>this.isFeatureEnabled("shop",l.w.location.search),this.isPcomSearchToggleActive=()=>this.isFeatureEnabled("pcom_search",l.w.location.search),this.isSavedItemsToggleActive=()=>this.isFeatureEnabled("saved_items",l.w.location.search),this.isABTestingToggleActive=()=>this.isFeatureEnabled("ab",l.w.location.search),this.isDealerSearchChinaEnabled=()=>this.isFeatureEnabled("dealer_search_china",l.w.location.search),this.env=r,this.features=this.featureEnvMap[r]}loadRemoteToggles(){var r=this;return(0,h.Z)(function*(){try{const a=(0,m.b)(r.env).BFF_ENDPOINT,u=yield fetch(`${a}/toggles?env=${r.env}`);if(!u.ok){const v=yield u.text();throw new Error(v)}const f=yield u.json();r.features=f}catch(a){throw new m.N(`Load Feature Toggles failed with error: ${a}`,m.a.GENERAL)}})()}stringToBooleanStrict(r){return"true"===r||"false"!==r&&null}getUrlFeatureToggleOverride(r,a){var u,f;const v=null===(f=null===(u=a.split("?")[1])||void 0===u?void 0:u.split("&").find(R=>R.includes(r)))||void 0===f?void 0:f.split("=")[1];return(0,m.i)(v)?this.stringToBooleanStrict(v||""):null}getLocalStorageFeatureToggleOverride(r){const a=localStorage.getItem(`phn.${r}`);return(0,m.i)(a)?this.stringToBooleanStrict(a):null}isFeatureEnabled(r,a){var u;if(void 0===this.features||this.env===s.b.PRODUCTION&&this.isOnSecurityLayer(r))return!1;if(null!==(u=this.features.featureOverrideEnabled)&&void 0!==u&&u.enabled){const f=[this.getUrlFeatureToggleOverride(r,a),this.getLocalStorageFeatureToggleOverride(r)];for(const v of f)if(null!==v)return v}return void 0!==this.features[r]&&this.features[r].enabled}setFeatures(r){var a=this;return(0,h.Z)(function*(){a.env=r;try{if("test"===r)return void(a.features=a.featureEnvMap[r]);yield a.loadRemoteToggles()}catch(u){d.error("INIT_APP_CONFIG",u),a.features=a.featureEnvMap[r]}})()}isOnSecurityLayer(r){return[""].includes(r)}}},862:(D,T,_)=>{_.d(T,{R:()=>m,a:()=>s,b:()=>i,c:()=>A,d:()=>y,e:()=>l,f:()=>E,g:()=>w,h:()=>S,i:()=>C,j:()=>O,r:()=>b});var h=_(49);const s={MAIN_MENU:"mainmenu",DEALER_SEARCH:"find_a_dealer",MORE:"more",SHOP:"shop",SERIES:"series",MY_PORSCHE:"my_porsche",VEHICLE_PURCHASE:"vehicle_purchase",EXPERIENCE:"experience",SERVICES:"services",MODELS:"models"};var m=function(t){return t[t.LEVEL_ZERO=-1]="LEVEL_ZERO",t[t.LEVEL_ONE=0]="LEVEL_ONE",t[t.LEVEL_TWO=1]="LEVEL_TWO",t}(m||{});function l(...t){return t.reduce((e,n)=>[...e,...(0,h.g)(n).split("/")],[]).filter(Boolean).join("/")}function E(t){if((0,h.i)(t))return Object.values(s).find(e=>t.startsWith(e))}function S(...t){return l(s.MODELS,...t)}function A(...t){return l(s.DEALER_SEARCH,...t)}function O(...t){return l(s.MY_PORSCHE,...t)}function C(...t){return l(s.VEHICLE_PURCHASE,...t)}function w(t){return t.split("/").slice(-1)[0]}function b(t){return t.split("/").slice(0,-1).join("/")}function y(t){switch(E(t)){case s.MAIN_MENU:return 1;case t:return 2;default:return t.split("/").length+1}}function i(t){const e=b(t);return(0,h.i)(e)?e:s.MAIN_MENU}},997:(D,T,_)=>{_.d(T,{w:()=>i});var h=_(861),s=_(49);const w={base:0,xs:480,s:760,m:1e3,l:1300,xl:1760,xxl:1920},i=new class b{constructor(){this.initialBodyStyleValues={top:"",position:"",inlineSize:"",overflowY:""},this.initialDocumentScrollTop=0}get location(){return window.location}set location(e){window.location=e}get sessionStorage(){return window.sessionStorage}get localStorage(){return window.localStorage}set version(e){Object.assign(window,{PHN_HEADER_VERSION:e})}set navigationLoaded(e){Object.assign(window,{PHN_NAVIGATION_LOADED:e})}get bodyOverflow(){return document.body.style.overflow}get bodyHeight(){return document.body.style.height}requestAnimationFrame(e){return window.requestAnimationFrame(e)}createDiv(){return window.document.createElement("div")}getBreakpoint(){const e=Math.max(window.document.documentElement.clientWidth,window.innerWidth||0),n=Object.keys(w).reverse().find(o=>(0,s.v)(w,o)&&e>=w[o]);return"string"==typeof n&&(0,s.v)(w,n)?w[n]:0}get redirected(){return!0===window.REDIRECTED||window.location.search.includes("cs_redirect=")}createIframe(e,n){const o=window.document.createElement("iframe");o.id=e,o.style.display="none",o.src=n,window.document.body.appendChild(o)}removeElement(e){var n;null===(n=window.document.getElementById(e))||void 0===n||n.remove()}redirectToUrl(e){window.location.assign(e)}generateRandom(e){const o=new Uint8Array(e);window.crypto.getRandomValues(o);const c=[];for(let d=0;d<o.byteLength;d+=1)c.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[o[d]%62]);return c.join("")}maybeCheckMarketingConsent(e){var n,o,c,d,g,p,L,r,a,u,f;const v={processorId:null!==(c=null===(o=null===(n=window.GlobalConsent)||void 0===n?void 0:n.Processor)||void 0===o?void 0:o.googleMaps)&&void 0!==c?c:"Google Maps",timeoutVar:{},mapContainer:"",callbacks:{success:e}};return"function"==typeof(null===(g=null===(d=window.PCOM)||void 0===d?void 0:d.globalConsent)||void 0===g?void 0:g.checkConsent)?(null===(r=null===(L=null===(p=window.PCOM)||void 0===p?void 0:p.globalConsent)||void 0===L?void 0:L.checkConsent)||void 0===r||r.call(L,v),!0):"function"==typeof(null===(a=window.ucPrivacyShield)||void 0===a?void 0:a.checkConsent)?(null===(f=null===(u=window.ucPrivacyShield)||void 0===u?void 0:u.checkConsent)||void 0===f||f.call(u,v),!0):(e(),!1)}deriveChallenge(e){return(0,h.Z)(function*(){if(e.length<43||e.length>128)throw new s.N("invalid code length",s.a.INVALID_INPUT);const n=new ArrayBuffer(e.length),o=new Uint8Array(n);for(let p=0;p<e.length;p++)o[p]=e.charCodeAt(p);const c=yield window.crypto.subtle.digest("SHA-256",o),d=new Uint8Array(c);let g="";for(let p=0;p<d.byteLength;p++)g+=String.fromCharCode(d[p]);return window.btoa(g).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})()}hashString(e){return(0,h.Z)(function*(){const n=(new TextEncoder).encode(e),o=yield window.crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(o)).map(d=>d.toString(16).padStart(2,"0")).join("")})()}getScrollbarWidth(){const e=window.document.createElement("div");e.style.overflow="scroll",window.document.body.appendChild(e);const n=e.offsetWidth-e.clientWidth;return window.document.body.removeChild(e),Number.isNaN(n)?"0px":`${n}px`}fetchGoogleMapsApi(e,n=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places`){return(0,h.Z)(function*(){if(void 0!==window.google&&void 0!==window.google.maps&&void 0!==window.google.maps.version||document.getElementById("googleMaps"))return window.google;const c=document.createElement("script");return c.src=n,c.id="googleMaps",document.head.appendChild(c),new Promise((d,g)=>{c.onerror=()=>{g(new s.N("Failed to load google maps script.",s.a.GENERAL))},c.onload=()=>{d(window.google)}})})()}getNavigatorLatLong(){return(0,h.Z)(function*(){return new Promise((e,n)=>{window.navigator.geolocation.getCurrentPosition(({coords:{latitude:o,longitude:c}})=>{e({latitude:o,longitude:c})},o=>n(new s.N(`geolocation.getCurrentPosition failed with ${o.code}: ${o.message}`,function y(t){switch(t.code){case t.PERMISSION_DENIED:return s.a.GEOLOCATION_DENIED;case t.POSITION_UNAVAILABLE:case t.TIMEOUT:return s.a.RETRY;default:return s.a.GENERAL}}(o))))})})()}getCookie(e){var n;return(0,s.g)(null===(n=document.cookie.split("; ").find(o=>o.startsWith(`${e}=`)))||void 0===n?void 0:n.split("=")[1])}setCookie(e,n){document.cookie=`${e}=${n};domain=${s.C};expires=${new Date(Date.now()+10*s.M).toUTCString()};`}btoa(e){return window.btoa(e)}lockScroll(){this.initialBodyStyleValues=(0,s.x)(document.body.style,this.initialBodyStyleValues),this.initialDocumentScrollTop=document.documentElement.scrollTop,document.body.style.top=`-${document.documentElement.scrollTop}px`,document.body.style.position="fixed",document.body.style.inlineSize="100%",document.body.style.overflowY="scroll"}unlockScroll(){Object.entries(this.initialBodyStyleValues).forEach(([e,n])=>document.body.style.setProperty((0,s.y)(e),n)),document.documentElement.scrollTop=this.initialDocumentScrollTop}hasScrollbar(){return window.document.body.offsetHeight>window.innerHeight}waitForElement(e,n){return(0,h.Z)(function*(){if(!(0,s.i)(n))return e;const o=(0,s.u)(e.querySelector(n));return null!==o?o:new Promise(c=>{const d=new MutationObserver(()=>{const g=(0,s.u)(e.querySelector(n));null!==g&&(c(g),d.disconnect())});d.observe(e,{childList:!0,subtree:!0})})})()}}}}]);