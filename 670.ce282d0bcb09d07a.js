"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[670],{355:(H,R,u)=>{u.d(R,{a:()=>A});var l=u(861),e=u(172),h=u(35),_=u(58);const M={},x=new class I{constructor(){this.client=null,this.experiments=[]}init(){var i=this;return(0,l.Z)(function*(){if(h.f.isABTestingToggleActive())try{yield i.setClient(),yield i.loadExperiments()}catch(o){h.l.error("Could not initialize AbTesting",o)}})()}execute(i){if(h.f.isABTestingToggleActive())try{const o=this.getExperiment(i);this.getVariation(o).activate()}catch(o){h.l.error(`Could not execute experiment ${i}`,o)}}executeContentChange(i){if(h.f.isABTestingToggleActive())try{const o=this.getExperiment(i.experienceName),E=this.getVariation(o);return"original"===E.name?i.children:E.activate()}catch(o){h.l.error(`Could not execute experiment ${i.experienceName}`,o)}return i.children}setClient(){var i=this;return(0,l.Z)(function*(){if(i.client)return Promise.resolve(i.client);yield i.injectScript();const o=window;return i.client=o.Matomo,i.client})()}loadExperiments(){var i=this;return(0,l.Z)(function*(){const E=i.getClient().AbTesting.Experiment,f=i.getAbTestingDefinitions();for(const P in f){const a=new E(f[P]);i.experiments.push(a)}})()}loadContentGeneratorExperiments(){var i=this;return(0,l.Z)(function*(){if(h.f.isABTestingToggleActive()){const E=i.getClient().AbTesting.Experiment,f=e.b.state.abExperiences;if(f)for(const P of f){const s=P.variations.map(n=>({name:n.name,activate:()=>n.children}));s.push({name:"original",activate:()=>null});const a=new E(Object.assign(Object.assign({},P),{variations:s}));i.experiments.push(a)}}})()}getExperiment(i){const o=this.experiments.find(E=>E.name===i);if(!o)throw new e.N(`No experiment with name: ${i} found`,e.a.GENERAL);return o}getVariation(i){const o=i.getActivatedVariationName(),E=i.variations.find(f=>f.name===o);if(!E)throw new e.N(`No variation in experiment: ${i.name} with name: ${o} found`,e.a.GENERAL);return E}getClient(){if(!this.client)throw new e.N("No client is set, you must call init first",e.a.GENERAL);return this.client}injectScript(){return new Promise((i,o)=>{const E=document.createElement("script");E.text=this.getMatomoScript(),document.head.appendChild(E);const f=(0,_.t)(document.querySelector('script[src="//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js"]'));f?(f.onload=()=>{i(!0)},f.onerror=()=>o(new e.N("Could not inject Matomo script",e.a.GENERAL))):o(new e.N("There is no HTML Script element available",e.a.GENERAL))})}getAbTestingDefinitions(){return M}getMatomoScript(){return`var _paq = window._paq = window._paq || [];\n    _paq.push(['trackPageView']);\n    _paq.push(['enableLinkTracking']);\n    (function() {\n      var u="https://porsche.matomo.cloud/";\n      _paq.push(['setTrackerUrl', u+'matomo.php']);\n      _paq.push(['setSiteId', ${"production"===e.n.state.env?"7":"8"}]);\n      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n      g.async=true; g.src='//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);\n    })\n   ();`}};function A(){return x}},670:(H,R,u)=>{u.d(R,{a:()=>s});var l=u(740),e=u(63),h=u(172),_=u(58),M=u(135);const I={};function A(a){const{drawerType:n}=I,r=((0,_.i)(a)?(0,l.b)(a):e.r.state.routingKeyHistory[e.r.state.routingKeyPointer])||"",m=(0,l.g)(r),d=(0,l.d)(r),c=d-1;if(!(0,_.i)(r))return"level0";const g=(0,_.i)(r)?`level${d}-${m}`:`level${d-1}-unknown`;return"doubleDrawer"===n?""===r?`level${c}-unknown_level${d}-unknown`:`level${c}-${(0,M.g)(r)}_${g}`:g}function O(a,n,r){const{drawerType:m}=I,d=(0,l.d)(a);if("doubleDrawer"===m){let c=d;return r&&(c-=1),`level${c}_${n}`}return(0,_.i)(a)?`level${d}_${n}`:`level${d-1}_${n}`}function E(){return I.drawerType}const s={setDrawerType:function x(a){I.drawerType=a},getDealerResultsLoadDisplayElementId:function f(a){return"doubleDrawer"===E()?a:A()},calculateDisplayElementId:A,getDealerResultsLoadDisplayElementType:function P(){return"doubleDrawer"===E()?h.j:O("",h.h.dealerSearchForm)},calculateDisplayElementType:O,getModelName:function i(a){const n=a.link.split("/"),r=n[n.length-1];let m;return m=""===r?void 0===n[n.length-2]?"":n[n.length-2].split("-").join(" "):r.split("-").join(" "),m},getModelTargetElement:function o(a,n){if(a.includes("models"))return`level${(0,l.d)(a)}_${n.toLowerCase()}`}}},135:(H,R,u)=>{u.d(R,{a:()=>E,b:()=>f,c:()=>P,d:()=>A,e:()=>x,f:()=>i,g:()=>O});var l=u(172),e=u(740),h=u(416),_=u(58),M=u(35),I=u(355);function x(s,a,n,r,m,d){var c,g;const{dealer:t,models:v,myPorsche:C,vehiclePurchase:y,shop:p,experience:S,services:T}=s,{savedDealerCookie:N,ppnDealers:j}=a,{app:U}=l.n.state,D=null!==N?j[N.id]:void 0;let K;"en-SG"===n&&t.search.outboundLink&&(K=null===(c=t.search.outboundLink)||void 0===c?void 0:c.link);const k=[e.a.DEALER_SEARCH];void 0!==D&&1!=(null===(g=h.d.state.results)||void 0===g?void 0:g.length)&&k.push((0,e.e)(D.ppnDealer.id));const w=[{elementId:e.a.MODELS,routingKeys:[e.a.MODELS],analyticsId:v.id,text:v.text},{elementId:e.a.VEHICLE_PURCHASE,routingKeys:[e.a.VEHICLE_PURCHASE],analyticsId:y.id,text:y.text},{elementId:e.a.SERVICES,routingKeys:[e.a.SERVICES],analyticsId:T.id,text:T.text},{elementId:e.a.EXPERIENCE,routingKeys:[e.a.EXPERIENCE],analyticsId:S.id,text:S.text}],b={elementId:e.a.DEALER_SEARCH,routingKeys:k,analyticsId:t.id,text:t.text,link:K,iconRight:"en-SG"===n&&t.search.outboundLink?"none":"arrow-head-right"};if(null!==p&&""!==p.text&&w.splice(2,0,{elementId:e.a.SHOP,routingKeys:[e.a.SHOP],analyticsId:p.id,text:p.text,link:U!==_.A.shop?p.link:void 0,datalayerEventAction:l.E.NAVIGATION_LINK_CLICK,iconRight:"none"}),function o(s,a){try{const{country:n}=(0,l.s)(s),r=!(0,l.i)(n)&&a;return(M.f.isDealerSearchChinaEnabled()||"CN"!==n)&&r}catch{}return!0}(n,d)){const L="en"===(0,l.s)(n).language?D?.ppnDealer.name:(0,_.i)(D?.ppnDealer.nameLocalized)?D?.ppnDealer.nameLocalized:D?.ppnDealer.name;(0,_.i)(L)&&(b.subtext=L)}else b.link=t.search.map.link,b.onClick=void 0;if(w.push(b),null!==C){const L=(0,_.I)(r),B=L?(0,_.z)(r,C.loggedInFallback):void 0;w.push({elementId:e.a.MY_PORSCHE,routingKeys:[e.a.MY_PORSCHE],analyticsId:C.id,text:C.text,subtext:B,showIconModifier:L&&m>0})}return w}function A(s,a,n,r,m,d,c){const g=(0,e.f)(d);switch(g){case d:break;case e.a.MODELS:return s.models.series.map(t=>({elementId:(0,e.h)(t.id),routingKeys:[(0,e.h)(t.id)],analyticsId:t.id,text:t.name,subtext:t.tags.map(v=>v.text).join(" | "),renderSignatures:!0,datalayerEventAction:l.E.MODEL_RANGE_CLICK}));case e.a.SHOP:case e.a.VEHICLE_PURCHASE:case e.a.SERVICES:case e.a.EXPERIENCE:{const t=(0,e.r)(d),v=i(s,t,g);if(null!==v)return v.children.map(C=>({elementId:(0,e.c)(t,C.id),routingKeys:[(0,e.c)(t,C.id)],analyticsId:C.id,text:C.text,link:C.link}));break}}return x(s,a,n,r,m,c)}function O(s){switch((0,e.f)(s)){case s:break;case e.a.DEALER_SEARCH:return e.a.DEALER_SEARCH;case e.a.MODELS:return e.a.MODELS;case e.a.SHOP:case e.a.VEHICLE_PURCHASE:case e.a.SERVICES:case e.a.EXPERIENCE:{const n=(0,e.r)(s);return(0,e.g)(n)}}return e.a.MAIN_MENU}function i(s,a,n){const{vehiclePurchase:r,experience:m,shop:d,legacyMore:c,services:g}=s,t={[e.a.VEHICLE_PURCHASE]:r,[e.a.EXPERIENCE]:m,[e.a.SHOP]:d,[e.a.MORE]:c,[e.a.SERVICES]:g}[n];if(null==t)return null;(0,_.i)(t.experienceName)&&(t.children=(0,I.a)().executeContentChange(t));const v=(0,e.g)(a);return v===n?t:(0,l.k)(t,v)}function E(s,a){if(!(0,_.i)(a))return"";const n=(0,e.f)(a);switch(n){case e.a.MODELS:return s.models.text;case e.a.DEALER_SEARCH:return 1===s.dealer.numberOfDealers?"":s.dealer.details.backToSearch;case e.a.SHOP:case e.a.VEHICLE_PURCHASE:case e.a.MORE:case e.a.EXPERIENCE:{const r=i(l.b.state,a,n);if(null!==r)return r.text;break}}return""}function f(s,a,n){var r;const{dealer:m,myPorsche:d,models:c,vehiclePurchase:g,experience:t,shop:v,legacyMore:C,services:y}=s;let p;switch(n){case e.a.MORE:case e.a.SHOP:case e.a.EXPERIENCE:case e.a.SERVICES:case e.a.VEHICLE_PURCHASE:{if(p={[e.a.VEHICLE_PURCHASE]:g,[e.a.EXPERIENCE]:t,[e.a.SHOP]:v,[e.a.MORE]:C,[e.a.SERVICES]:y}[n],void 0===p)return"";const S=(0,e.g)(a);return S===n?p?.text:null===(r=(0,l.k)(p,S))||void 0===r?void 0:r.text}case e.a.SERIES:case e.a.MODELS:{const S=(0,e.g)(a);return p=c.series.find(T=>S===T.id),void 0===p?c.text:p?.id}case e.a.DEALER_SEARCH:return m.search.text;case e.a.MY_PORSCHE:return d?.text}return""}function P(s,a,n){const{myPorsche:r,models:m}=l.b.state,{loggedInState:d}=l.n.state;if(s===e.a.MY_PORSCHE)return(0,_.I)(d)?(0,_.z)(d,r?.loggedInFallback||""):"";if(s===e.a.DEALER_SEARCH){const{savedDealerCookie:c,ppnDealers:g}=h.d.state,t=null!==c?g[c.id]:void 0,v=n&&"en"===(0,l.s)(n).language?t?.ppnDealer.name:(0,_.i)(t?.ppnDealer.nameLocalized)?t?.ppnDealer.nameLocalized:t?.ppnDealer.name;return c?v:""}if(s===e.a.MODELS&&(0,_.i)(a)){const c=(0,e.g)(a),g=m.series.find(t=>c===t.id);if(g)return g.tags.map(t=>t.text).join(" | ")}return""}},63:(H,R,u)=>{u.d(R,{r:()=>e});const e=(0,u(172).e)({routingKeyHistory:[],routingKeyPointer:-1,animatingPointer:-1,initialRoutingKeyHistory:null,initialRoutingKeyPointer:null})}}]);