"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[667],{667:(C,m,i)=>{i.r(m),i.d(m,{phn_single_drawer:()=>f});var u=i(861),n=i(565),_=i(862),w=i(916),D=i(551),r=i(49),P=i(22),v=i(945),c=i(556),h=i(622),p=i(247),b=i(276),E=i(150);function y({routingKey:e,previousRoutingKey:s,breakpoint:t,locale:d,showBackButton:o,receivedContent:a}){const{menu:l}=c.a.state,g=(0,v.a)(c.a.state,s??"")||l.text;return(0,n.h)(n.F,null,(0,n.h)("div",{class:"bottom-gradient"}),(0,n.h)("div",{class:"drawer-content"},(0,n.h)("phn-drawer-header",{showBackButton:o,backButtonAnalyticsId:l.id,backButtonText:g,activeRoutingKey:e,breakpoint:t,receivedContent:a,locale:d}),(0,n.h)("phn-router",{activeRoutingKey:e,breakpoint:t,locale:d,receivedContent:a})))}i(997),i(213),i(181),i(843);const f=class{constructor(e){(0,n.r)(this,e),this.drawerClosed=(0,n.c)(this,"drawerClosed",7),this.drawerChanged=(0,n.c)(this,"drawerChanged",7),this.drawerStartsClosing=(0,n.c)(this,"drawerStartsClosing",7),this.backdropClosed=(0,n.c)(this,"backdropClosed",7),this.phnDrawerStatus=(0,n.c)(this,"phnDrawerStatus",7),this.focusTimeout=new P.T(0),this.operationPipeline=[],this.breakpoint=void 0,this.locale=void 0,this.usingKeyboard=!1,this.routingKeyHistory=void 0,this.routingKeyPointer=void 0,this.receivedContent=!1,this.animatingPointer=-1}handleKeyDown(e){if("Tab"!==e.key)return;const s=(0,r.u)(e.target);if(null===s)return;let t=(0,b.g)(this.el.querySelector(".active"));if(0===t.length)return;this.routingKeyHistory[this.routingKeyPointer].startsWith(_.a.DEALER_SEARCH)&&(t=t.filter(l=>"BUTTON"!==l.nodeName&&"A"!==l.nodeName));const o=t[0],a=t[t.length-1];return s===o&&e.shiftKey?(e.preventDefault(),void(null!==a&&(0,r.p)(a))):s!==a||e.shiftKey?void 0:(e.preventDefault(),void(null!==o&&(0,r.p)(o)))}handleMobileMenuItemClick(e){(0,h.i)()?e.stopPropagation():this.animatingPointer=this.routingKeyPointer}handleClickDrawerHeaderClose(e){(0,h.i)()&&e.stopPropagation()}handleClickDrawerHeaderBack(e){(0,h.i)()?e.stopPropagation():this.animatingPointer=this.routingKeyPointer}onTransitionEnd(){var e=this;const s=this.animatingPointer>this.routingKeyPointer?this.routingKeyHistory[this.animatingPointer]:"";this.animatingPointer=this.routingKeyPointer,this.drawerChanged.emit(this.routingKeyPointer<this.routingKeyHistory.length-1),this.focusTimeout.set((0,u.Z)(function*(){e.focusOnActiveDrawer(s)})),this.sendDataLayerEvent()}componentWillLoad(){(0,h.r)({onAnimationStarts:()=>{this.phnDrawerStatus.emit({status:r.B.startOpening})},onAnimationEnds:()=>{this.onTransitionEnd(),this.phnDrawerStatus.emit({status:r.B.finishOpening})}}),(0,h.a)({onAnimationStarts:()=>{this.phnDrawerStatus.emit({status:r.B.startClosing})},onAnimationEnds:()=>{this.backdropClosed.emit(),this.phnDrawerStatus.emit({status:r.B.finishClosing})}}),(0,h.b)({onAnimationEnds:()=>this.onTransitionEnd()}),(0,h.c)({onAnimationEnds:()=>this.onTransitionEnd()})}focusOnActiveDrawer(e){const s=(0,r.u)(this.el.querySelector(".active .autofocus"));if(null===s)if(this.usingKeyboard){let t=null;(0,r.i)(e)&&(t=(0,r.u)(this.el.querySelector(`.active [data-id="${e}"]`))),null===t&&(t=(0,r.u)(this.el.querySelector(`.active ${r.F}`))),null!==t&&(0,r.p)(t)}else{const t=(0,r.u)(this.el.querySelector(".first-focus"));null!==t&&(0,r.p)(t)}else(0,r.p)(s)}sendDataLayerEvent(){p.a.setDrawerType(c.e.SingleDrawer),D.g.pushDataLayerEvent(c.E.DRAWER_LOAD,{componentDisplay:{displayElementType:p.a.calculateDisplayElementType(this.routingKeyHistory[this.routingKeyPointer],c.f.singleDrawer),displayElementId:p.a.calculateDisplayElementId(),displayElementName:"Single Drawer"}})}disconnectedCallback(){this.focusTimeout.cancel()}componentDidRender(){var e=this;return(0,u.Z)(function*(){const s=[];for(const t of e.operationPipeline){const d=t();(0,r.t)(d)&&s.push(d)}yield Promise.all(s),e.operationPipeline.splice(0,e.operationPipeline.length)})()}render(){var e,s;const t=this.routingKeyPointer>this.animatingPointer,d=this.routingKeyPointer<this.animatingPointer;let o=-1,a=this.routingKeyPointer;t?(o=this.routingKeyPointer,a=this.animatingPointer,a!==_.R.LEVEL_ZERO&&this.operationPipeline.push((0,u.Z)(function*(){w.a.play(E.A.TRANSITION_NEXT_LEVEL_SINGLE_DRAWER)}))):d&&(o=this.animatingPointer,a!==_.R.LEVEL_ZERO&&this.operationPipeline.push((0,u.Z)(function*(){w.a.play(E.A.TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER)})));const l=null!==(e=this.routingKeyHistory[o])&&void 0!==e?e:"",g=null!==(s=this.routingKeyHistory[a])&&void 0!==s?s:"";return(0,n.h)(n.H,null,(0,r.i)(g)?(0,n.h)("div",{class:"drawer active",key:g},(0,n.h)("span",{class:"first-focus",tabIndex:-1,"aria-hidden":"true"}),(0,n.h)(y,{routingKey:g,previousRoutingKey:this.routingKeyHistory[a-1],breakpoint:this.breakpoint,locale:this.locale,showBackButton:a>0,receivedContent:this.receivedContent})):null,(0,r.i)(l)?(0,n.h)("div",{class:"drawer animating",style:t?{right:"-100%"}:{},key:l},(0,n.h)(y,{routingKey:l,previousRoutingKey:this.routingKeyHistory[o-1],breakpoint:this.breakpoint,locale:this.locale,showBackButton:o>0,receivedContent:this.receivedContent})):null)}get el(){return(0,n.g)(this)}};f.style=".sc-phn-single-drawer-h{display:block}.sc-phn-single-drawer-h .drawer.sc-phn-single-drawer{z-index:301;background-color:#fff;position:fixed;top:0;bottom:0;right:0;width:100vw}.sc-phn-single-drawer-h .drawer.sc-phn-single-drawer .drawer-content.sc-phn-single-drawer{overflow-y:auto;height:100vh;width:100vw;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 1.6875rem 6.25rem 1.6875rem}@media (min-width: 480px){.sc-phn-single-drawer-h .drawer.sc-phn-single-drawer .drawer-content.sc-phn-single-drawer{padding:0 2.1875rem 6.25rem 2.1875rem}}@media (min-width: 760px){.sc-phn-single-drawer-h .drawer.sc-phn-single-drawer .drawer-content.sc-phn-single-drawer{padding:0 3.375rem 6.25rem 3.375rem}}@media (min-width: 1000px){.sc-phn-single-drawer-h .drawer.sc-phn-single-drawer .drawer-content.sc-phn-single-drawer{padding:0 2.25rem 6.25rem 2.25rem}}.sc-phn-single-drawer-h .drawer.sc-phn-single-drawer .drawer-content.sc-phn-single-drawer phn-drawer-header.sc-phn-single-drawer{-webkit-box-sizing:border-box;box-sizing:border-box;margin-top:1.125rem;margin-bottom:1.9375rem}@media (min-width: 480px){.sc-phn-single-drawer-h .drawer.sc-phn-single-drawer .drawer-content.sc-phn-single-drawer phn-drawer-header.sc-phn-single-drawer{margin-top:2rem;margin-bottom:2.3125rem}}@media (min-width: 760px){.sc-phn-single-drawer-h .drawer.sc-phn-single-drawer .drawer-content.sc-phn-single-drawer phn-drawer-header.sc-phn-single-drawer{margin-bottom:1.25rem}}.sc-phn-single-drawer-h .drawer.sc-phn-single-drawer .drawer-content.sc-phn-single-drawer phn-router.sc-phn-single-drawer{padding-bottom:4rem}.sc-phn-single-drawer-h .drawer.sc-phn-single-drawer .bottom-gradient.sc-phn-single-drawer{height:10rem;background:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0)), to(rgb(255, 255, 255)));background:linear-gradient(to bottom, rgba(255, 255, 255, 0), rgb(255, 255, 255));opacity:1;position:absolute;width:100%;bottom:0;margin-left:-1.5rem;pointer-events:none;margin-left:0;z-index:1}"}}]);