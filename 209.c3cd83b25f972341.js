"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[209],{499:(x,y,_)=>{_.d(y,{a:()=>C,d:()=>f});var g=_(861),i=_(195),s=_(250),E=_(681);const f=(0,i.e)({searchTerm:"",results:null,savedDealerCookie:function T(){try{return JSON.parse(s.w.getCookie(E.S))}catch{return null}}(),ppnDealers:{},dealersOfRegion:{regions:[]}});f.onChange("savedDealerCookie",p=>{s.w.setCookie(E.S,JSON.stringify(p))});const S={},O=new class A{constructor(){this.client=null,this.experiments=[]}init(){var r=this;return(0,g.Z)(function*(){if(s.f.isABTestingToggleActive())try{yield r.setClient(),yield r.loadExperiments()}catch(c){s.l.error("Could not initialize AbTesting",c)}})()}execute(r){if(s.f.isABTestingToggleActive())try{const c=this.getExperiment(r);this.getVariation(c).activate()}catch(c){s.l.error(`Could not execute experiment ${r}`,c)}}executeContentChange(r){if(s.f.isABTestingToggleActive())try{const c=this.getExperiment(r.experienceName),o=this.getVariation(c);return"original"===o.name?r.children:o.activate()}catch(c){s.l.error(`Could not execute experiment ${r.experienceName}`,c)}return r.children}setClient(){var r=this;return(0,g.Z)(function*(){if(r.client)return Promise.resolve(r.client);yield r.injectScript();const c=window;return r.client=c.Matomo,r.client})()}loadExperiments(){var r=this;return(0,g.Z)(function*(){const o=r.getClient().AbTesting.Experiment,d=r.getAbTestingDefinitions();for(const v in d){const R=new o(d[v]);r.experiments.push(R)}})()}loadContentGeneratorExperiments(){var r=this;return(0,g.Z)(function*(){if(s.f.isABTestingToggleActive()){const o=r.getClient().AbTesting.Experiment,d=i.b.state.abExperiences;if(d)for(const v of d){const b=v.variations.map(N=>({name:N.name,activate:()=>N.children}));b.push({name:"original",activate:()=>null});const R=new o(Object.assign(Object.assign({},v),{variations:b}));r.experiments.push(R)}}})()}getExperiment(r){const c=this.experiments.find(o=>o.name===r);if(!c)throw new i.N(`No experiment with name: ${r} found`,i.a.GENERAL);return c}getVariation(r){const c=r.getActivatedVariationName(),o=r.variations.find(d=>d.name===c);if(!o)throw new i.N(`No variation in experiment: ${r.name} with name: ${c} found`,i.a.GENERAL);return o}getClient(){if(!this.client)throw new i.N("No client is set, you must call init first",i.a.GENERAL);return this.client}injectScript(){return new Promise((r,c)=>{const o=document.createElement("script");o.text=this.getMatomoScript(),document.head.appendChild(o);const d=(0,E.r)(document.querySelector('script[src="//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js"]'));d?(d.onload=()=>{r(!0)},d.onerror=()=>c(new i.N("Could not inject Matomo script",i.a.GENERAL))):c(new i.N("There is no HTML Script element available",i.a.GENERAL))})}getAbTestingDefinitions(){return S}getMatomoScript(){return`var _paq = window._paq = window._paq || [];\n    _paq.push(['trackPageView']);\n    _paq.push(['enableLinkTracking']);\n    (function() {\n      var u="https://porsche.matomo.cloud/";\n      _paq.push(['setTrackerUrl', u+'matomo.php']);\n      _paq.push(['setSiteId', ${"production"===i.n.state.env?"7":"8"}]);\n      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n      g.async=true; g.src='//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);\n    })\n   ();`}};function C(){return O}},250:(x,y,_)=>{_.d(y,{F:()=>f,f:()=>H,l:()=>U,w:()=>m});var g=_(861),i=_(195),s=_(681);const f="porsche_75_years_logo",p="opening_hours",r="sentry",b={local:{featureOverrideEnabled:{enabled:!0},homenav_1723:{enabled:!0},navi_3:{enabled:!1},porsche_75_years_logo:{enabled:!1},one_ui:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}},preview:{featureOverrideEnabled:{enabled:!0},homenav_1723:{enabled:!0},navi_3:{enabled:!1},porsche_75_years_logo:{enabled:!1},one_ui:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}},test:{featureOverrideEnabled:{enabled:!0},homenav_1723:{enabled:!0},navi_3:{enabled:!0},porsche_75_years_logo:{enabled:!1},one_ui:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}},production:{featureOverrideEnabled:{enabled:!1},homenav_1723:{enabled:!1},navi_3:{enabled:!0},porsche_75_years_logo:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}}},m=new class R{constructor(){this.initialBodyStyleValues={top:"",position:"",inlineSize:"",overflowY:""},this.initialDocumentScrollTop=0}get location(){return window.location}set location(e){window.location=e}get sessionStorage(){return window.sessionStorage}get localStorage(){return window.localStorage}set version(e){Object.assign(window,{PHN_HEADER_VERSION:e})}set navigationLoaded(e){Object.assign(window,{PHN_NAVIGATION_LOADED:e})}get bodyOverflow(){return document.body.style.overflow}get bodyHeight(){return document.body.style.height}requestAnimationFrame(e){return window.requestAnimationFrame(e)}createDiv(){return window.document.createElement("div")}getBreakpoint(){const e=Math.max(window.document.documentElement.clientWidth,window.innerWidth||0),t=Object.keys(s.o).reverse().find(n=>(0,s.t)(s.o,n)&&e>=s.o[n]);return"string"==typeof t&&(0,s.t)(s.o,t)?s.o[t]:0}get redirected(){return!0===window.REDIRECTED||window.location.search.includes("cs_redirect=")}createIframe(e,t){const n=window.document.createElement("iframe");n.id=e,n.style.display="none",n.src=t,window.document.body.appendChild(n)}removeElement(e){var t;null===(t=window.document.getElementById(e))||void 0===t||t.remove()}redirectToUrl(e){window.location.assign(e)}generateRandom(e){const n=new Uint8Array(e);window.crypto.getRandomValues(n);const a=[];for(let l=0;l<n.byteLength;l+=1)a.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[n[l]%62]);return a.join("")}maybeCheckMarketingConsent(e){var t,n,a,l,u,h,D,M,P,L,I;const k={processorId:null!==(a=null===(n=null===(t=window.GlobalConsent)||void 0===t?void 0:t.Processor)||void 0===n?void 0:n.googleMaps)&&void 0!==a?a:"Google Maps",timeoutVar:{},mapContainer:"",callbacks:{success:e}};return"function"==typeof(null===(u=null===(l=window.PCOM)||void 0===l?void 0:l.globalConsent)||void 0===u?void 0:u.checkConsent)?(null===(M=null===(D=null===(h=window.PCOM)||void 0===h?void 0:h.globalConsent)||void 0===D?void 0:D.checkConsent)||void 0===M||M.call(D,k),!0):"function"==typeof(null===(P=window.ucPrivacyShield)||void 0===P?void 0:P.checkConsent)?(null===(I=null===(L=window.ucPrivacyShield)||void 0===L?void 0:L.checkConsent)||void 0===I||I.call(L,k),!0):(e(),!1)}deriveChallenge(e){return(0,g.Z)(function*(){if(e.length<43||e.length>128)throw new i.N("invalid code length",i.a.INVALID_INPUT);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let h=0;h<e.length;h++)n[h]=e.charCodeAt(h);const a=yield window.crypto.subtle.digest("SHA-256",n),l=new Uint8Array(a);let u="";for(let h=0;h<l.byteLength;h++)u+=String.fromCharCode(l[h]);return window.btoa(u).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})()}hashString(e){return(0,g.Z)(function*(){const t=(new TextEncoder).encode(e),n=yield window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(l=>l.toString(16).padStart(2,"0")).join("")})()}getScrollbarWidth(){const e=window.document.createElement("div");e.style.overflow="scroll",window.document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return window.document.body.removeChild(e),Number.isNaN(t)?"0px":`${t}px`}fetchGoogleMapsApi(e,t=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places`){return(0,g.Z)(function*(){if(void 0!==window.google&&void 0!==window.google.maps&&void 0!==window.google.maps.version||document.getElementById("googleMaps"))return window.google;const a=document.createElement("script");return a.src=t,a.id="googleMaps",document.head.appendChild(a),new Promise((l,u)=>{a.onerror=()=>{u(new i.N("Failed to load google maps script.",i.a.GENERAL))},a.onload=()=>{l(window.google)}})})()}getNavigatorLatLong(){return(0,g.Z)(function*(){return new Promise((e,t)=>{window.navigator.geolocation.getCurrentPosition(({coords:{latitude:n,longitude:a}})=>{e({latitude:n,longitude:a})},n=>t(new i.N(`geolocation.getCurrentPosition failed with ${n.code}: ${n.message}`,function N(w){switch(w.code){case w.PERMISSION_DENIED:return i.a.GEOLOCATION_DENIED;case w.POSITION_UNAVAILABLE:case w.TIMEOUT:return i.a.RETRY;default:return i.a.GENERAL}}(n))))})})()}getCookie(e){var t;return(0,s.g)(null===(t=document.cookie.split("; ").find(n=>n.startsWith(`${e}=`)))||void 0===t?void 0:t.split("=")[1])}setCookie(e,t){document.cookie=`${e}=${t};domain=${s.C};expires=${new Date(Date.now()+10*s.M).toUTCString()};`}btoa(e){return window.btoa(e)}lockScroll(){this.initialBodyStyleValues=(0,s.v)(document.body.style,this.initialBodyStyleValues),this.initialDocumentScrollTop=document.documentElement.scrollTop,document.body.style.top=`-${document.documentElement.scrollTop}px`,document.body.style.position="fixed",document.body.style.inlineSize="100%",document.body.style.overflowY="scroll"}unlockScroll(){Object.entries(this.initialBodyStyleValues).forEach(([e,t])=>document.body.style.setProperty((0,s.w)(e),t)),document.documentElement.scrollTop=this.initialDocumentScrollTop}hasScrollbar(){return window.document.body.offsetHeight>window.innerHeight}waitForElement(e,t){return(0,g.Z)(function*(){if(!(0,s.i)(t))return e;const n=(0,s.r)(e.querySelector(t));return null!==n?n:new Promise(a=>{const l=new MutationObserver(()=>{const u=(0,s.r)(e.querySelector(t));null!==u&&(a(u),l.disconnect())});l.observe(e,{childList:!0,subtree:!0})})})()}},U=new class B{constructor(){this.version=s.V,this.breakpoint=0,this.locale=null}init(e,t){this.breakpoint=m.getBreakpoint(),this.locale=t}log(e,t,n,a,l){const{env:u}=i.n.state;if(u!==i.c.TEST)try{const h=JSON.stringify({name:e,level:t,env:u,breakpoint:this.breakpoint,locale:this.locale,version:this.version,hostname:m.location.hostname,pathname:m.location.pathname,id:n,errorType:l||"",message:a});u!==i.c.PRODUCTION&&console[t](h)}catch{}}info(e,t=""){this.log("PHN_HEADER_LOG_ENTRY","info",e,t)}error(e,t){this.log("PHN_HEADER_LOG_ENTRY","error",e,t.message,t instanceof i.N?t.type:i.a.GENERAL)}},H=new class F{constructor(e=(0,i.g)(s.u),t=b){this.featureEnvMap=t,this.features={},this.env="local",this.isShopToggleActive=()=>this.isFeatureEnabled("shop",m.location.search),this.isPcomSearchToggleActive=()=>this.isFeatureEnabled("pcom_search",m.location.search),this.isSavedItemsToggleActive=()=>this.isFeatureEnabled("saved_items",m.location.search),this.isABTestingToggleActive=()=>this.isFeatureEnabled("ab",m.location.search),this.isDealerSearchChinaEnabled=()=>this.isFeatureEnabled("dealer_search_china",m.location.search),this.isDealerSearchOpeningHoursEnabled=()=>this.isFeatureEnabled(p,m.location.search),this.isSentryEnabled=()=>this.isFeatureEnabled(r,m.location.search),this.env=e,this.features=this.featureEnvMap[e]}loadRemoteToggles(){var e=this;return(0,g.Z)(function*(){try{const t=(0,s.a)(e.env).BFF_ENDPOINT,n=yield fetch(`${t}/toggles?env=${e.env}`);if(!n.ok){const l=yield n.text();throw new Error(l)}const a=yield n.json();e.features=a}catch(t){throw new i.N(`Load Feature Toggles failed with error: ${t}`,i.a.GENERAL)}})()}stringToBooleanStrict(e){return"true"===e||"false"!==e&&null}getUrlFeatureToggleOverride(e,t){var n,a;const l=null===(a=null===(n=t.split("?")[1])||void 0===n?void 0:n.split("&").find(u=>u.includes(e)))||void 0===a?void 0:a.split("=")[1];return(0,s.i)(l)?this.stringToBooleanStrict(l||""):null}getLocalStorageFeatureToggleOverride(e){const t=localStorage.getItem(`phn.${e}`);return(0,s.i)(t)?this.stringToBooleanStrict(t):null}isFeatureEnabled(e,t){var n;if(void 0===this.features||this.env===i.c.PRODUCTION&&this.isOnSecurityLayer(e))return!1;if(null!==(n=this.features.featureOverrideEnabled)&&void 0!==n&&n.enabled){const a=[this.getUrlFeatureToggleOverride(e,t),this.getLocalStorageFeatureToggleOverride(e)];for(const l of a)if(null!==l)return l}return void 0!==this.features[e]&&this.features[e].enabled}setFeatures(e){var t=this;return(0,g.Z)(function*(){t.env=e;try{if("test"===e)return void(t.features=t.featureEnvMap[e]);yield t.loadRemoteToggles()}catch(n){U.error("INIT_APP_CONFIG",n),t.features=t.featureEnvMap[e]}})()}isOnSecurityLayer(e){return[r,p].includes(e)}}},598:(x,y,_)=>{_.d(y,{R:()=>s,a:()=>i,b:()=>c,c:()=>S,d:()=>r,e:()=>E,f:()=>f,g:()=>C,h:()=>T,i:()=>O,j:()=>A,r:()=>p});var g=_(681);const i={MAIN_MENU:"mainmenu",DEALER_SEARCH:"find_a_dealer",MORE:"more",SHOP:"shop",SERIES:"series",MY_PORSCHE:"my_porsche",VEHICLE_PURCHASE:"vehicle_purchase",EXPERIENCE:"experience",SERVICES:"services",MODELS:"models"};var s=function(o){return o[o.LEVEL_ZERO=-1]="LEVEL_ZERO",o[o.LEVEL_ONE=0]="LEVEL_ONE",o[o.LEVEL_TWO=1]="LEVEL_TWO",o}(s||{});function E(...o){return o.reduce((d,v)=>[...d,...(0,g.g)(v).split("/")],[]).filter(Boolean).join("/")}function f(o){if((0,g.i)(o))return Object.values(i).find(d=>o.startsWith(d))}function T(...o){return E(i.MODELS,...o)}function S(...o){return E(i.DEALER_SEARCH,...o)}function A(...o){return E(i.MY_PORSCHE,...o)}function O(...o){return E(i.VEHICLE_PURCHASE,...o)}function C(o){return o.split("/").slice(-1)[0]}function p(o){return o.split("/").slice(0,-1).join("/")}function r(o){switch(f(o)){case i.MAIN_MENU:return 1;case o:return 2;default:return o.split("/").length+1}}function c(o){const d=p(o);return(0,g.i)(d)?d:i.MAIN_MENU}}}]);