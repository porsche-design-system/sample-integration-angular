"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[592],{675:(A,S,o)=>{o.d(S,{a:()=>E});var l=o(641),e=o(568),i=o(491),d=o(977);const _={},E={setDrawerType:function h(u){_.drawerType=u},calculateDisplayElementId:function I(u){const{drawerType:r}=_,n=((0,i.i)(u)?(0,l.b)(u):e.r.state.routingKeyHistory[e.r.state.routingKeyPointer])||"",a=(0,l.g)(n),t=(0,l.d)(n),s=t-1;if(!(0,i.i)(n))return"level0";const c=(0,i.i)(n)?`level${t}-${a}`:`level${t-1}-unknown`;return"doubleDrawer"===r?""===n?`level${s}-unknown_level${t}-unknown`:`level${s}-${(0,d.g)(n)}_${c}`:c},calculateDisplayElementType:function g(u,r,n){const{drawerType:a}=_,t=(0,l.d)(u);if("doubleDrawer"===a){let s=t;return n&&(s-=1),`level${s}_${r}`}return(0,i.i)(u)?`level${t}_${r}`:`level${t-1}_${r}`},getModelName:function m(u){const r=u.link.split("/"),n=r[r.length-1];let a;return a=""===n?void 0===r[r.length-2]?"":r[r.length-2].split("-").join(" "):n.split("-").join(" "),a},getModelTargetElement:function p(u,r){if(u.includes("models"))return`level${(0,l.d)(u)}_${r.toLowerCase()}`}}},816:(A,S,o)=>{o.d(S,{f:()=>I,g:()=>n});var l=o(861),e=o(244),i=o(491),d=o(442),_=o(383);const h=new Map;function I(t,s){return g.apply(this,arguments)}function g(){return g=(0,l.Z)(function*(t,s){var c;const f=(0,i.h)(e.f.env),D=e.f.isOneUiToggleActive()&&e.f.isShopToggleActive()&&s===i.A.shop,R=function m(t,s){return p.apply(this,arguments)}(f.CONTENT_URL,t),O=D?function E(t,s){return u.apply(this,arguments)}(f.SHOP_CONTENT_URL,t):Promise.resolve(null),[P,C]=yield Promise.allSettled([R,O]);if("rejected"===P.status)throw P.reason;const v=(0,d.r)(t,s,P.value),L="fulfilled"===C.status?C.value:null;return null===L||null===v.shop?v:Object.assign(Object.assign({},v),{shop:Object.assign(Object.assign({},v.shop),{children:L.menuItems||(null===(c=v.shop)||void 0===c?void 0:c.children)||[],additionalContent:L.additionalContent,availableLocales:v.shop.availableLocales,availableLocalesOnlyForShop:v.shop.availableLocalesOnlyForShop})})}),g.apply(this,arguments)}function p(){return(p=(0,l.Z)(function*(t,s){const{country:c,language:f}=(0,e.s)(s),D=(0,i.c)(t,s),R=h.get(D);if(void 0!==R)return R;const O=yield fetch(`${t}/${f}-${c}.json`,{headers:{"Cache-Control":"no-cache","Content-Type":"application/json"}});if(404===O.status)throw new _.N(`No content for locale ${s} found`,_.a.NO_RESULTS);if(!O.ok)throw new _.N(`Could not get content for locale ${s}`,_.a.GENERAL);const P=yield O.json();return h.set(D,P),P})).apply(this,arguments)}function u(){return(u=(0,l.Z)(function*(t,s){const{country:c,language:f}=(0,e.s)(s),D=yield fetch(`${t}/${c.toLowerCase()}/${f}-${c}/navigation`,{headers:{"Cache-Control":"no-cache","Content-Type":"application/json","x-vercel-protection-bypass":"hXMkVgu6erfnX2ydOdeSCixWDWbPjBUk"}});if(404===D.status)throw new _.N(`No shop content for locale ${s} found`,_.a.NO_RESULTS);if(!D.ok)throw new _.N(`Could not get shop content for locale ${s}`,_.a.GENERAL);return D.json()})).apply(this,arguments)}function n(t,s){return a.apply(this,arguments)}function a(){return(a=(0,l.Z)(function*(t,s){try{const c=function r(t,s){const{country:c}=(0,e.s)(s);let f=c;return f.includes("-")&&!(0,e.i)(f)&&(f=c.split("-")[0]),`${t}/flags/${f}.svg`}(t,s);if((yield fetch(c)).ok)return c}catch{}return""})).apply(this,arguments)}},949:(A,S,o)=>{o.d(S,{s:()=>_});var l=o(244),e=o(58),i=o(675),d=o(641);function _({datalayerEventAction:h=l.E.NAVIGATION_CLICK,analyticsId:I,text:g,link:m,elementId:p,clickElementType:E,customDatalayerProperties:u={}}){e.g.pushDataLayerEvent(h,Object.assign(Object.assign({componentClick:Object.assign({clickElementId:I,clickElementName:g,targetElement:i.a.getModelTargetElement(p,g),clickElementType:E},E===l.C.Link?{targetUrl:m}:{}),componentDisplay:{displayElementId:i.a.calculateDisplayElementId(p),displayElementType:i.a.calculateDisplayElementType((0,d.r)(p),l.h.menuItem),displayElementName:g}},u),h===l.E.MODEL_RANGE_CLICK?{car:{modelRangeName:g.toLowerCase()}}:{}))}},45:(A,S,o)=>{o.d(S,{a:()=>h,f:()=>p,g:()=>g});var l=o(861),e=o(244),i=o(383),_=(o(491),function(E,u){var r={};for(var n in E)Object.prototype.hasOwnProperty.call(E,n)&&u.indexOf(n)<0&&(r[n]=E[n]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(E);a<n.length;a++)u.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(E,n[a])&&(r[n[a]]=E[n[a]])}return r});function h(E,u,r,n){return I.apply(this,arguments)}function I(){return(I=(0,l.Z)(function*(E,u,r,n){let a,t;try{const s=new Headers;s.set("Accept","*/*"),E===e.b.LOCAL&&s.set("Authorization","Basic "+i.w.btoa("undefined:undefined")),a=yield fetch(`${u}/${n}/dealers?coordinates=${r.latitude},${r.longitude}`,{method:"GET",headers:s})}catch{throw new i.N("Unable to fetch dealers",i.a.GENERAL)}if(400===a.status)throw new i.N("dealerService.getPPNDealers failed with invalid coordinates",i.a.GENERAL);if(404===a.status)throw new i.N("dealerService.getPPNDealers failed with invalid country code and therefore responded with no results",i.a.NO_RESULTS);if(200!==a.status)throw new i.N("dealerService.getPPNDealers failed with invalid response",i.a.GENERAL);try{t=yield a.json()}catch{throw new i.N("dealerService.getPPNDealers could not parse response into json format",i.a.GENERAL)}return t.map(s=>{var{dealer:c}=s,f=_(s,["dealer"]);return Object.assign({ppnDealer:c},f)})})).apply(this,arguments)}function g(E,u,r,n,a){return m.apply(this,arguments)}function m(){return(m=(0,l.Z)(function*(E,u,r,n,a){let t;try{t=(yield h(E,u,n,a)).find(c=>r===c.ppnDealer.id)}catch{throw new i.N("Unable to fetch a dealer",i.a.GENERAL)}if(void 0===t)throw new i.N(`Requested dealer ${r} could not be found`,i.a.NO_RESULTS);return t})).apply(this,arguments)}const p=(0,e.d)({savedSearchesCount:0,savedVehiclesCount:0})},977:(A,S,o)=>{o.d(S,{a:()=>p,b:()=>E,c:()=>u,d:()=>h,e:()=>_,f:()=>g,g:()=>I});var l=o(244),e=o(641),i=o(364),d=o(491);function _(r,n,a,t,s,c){const{dealer:f,models:D,myPorsche:R,vehiclePurchase:O,shop:P,experience:C,services:v}=r,{savedDealerCookie:L,ppnDealers:w}=n,{app:U}=l.n.state,y=null!==L?w[L.id]:void 0,b=[e.a.DEALER_SEARCH];void 0!==y&&b.push((0,e.c)(y.ppnDealer.id));const T=[{elementId:e.a.MODELS,routingKeys:[e.a.MODELS],analyticsId:D.id,text:D.text},{elementId:e.a.VEHICLE_PURCHASE,routingKeys:[e.a.VEHICLE_PURCHASE],analyticsId:O.id,text:O.text},{elementId:e.a.SERVICES,routingKeys:[e.a.SERVICES],analyticsId:v.id,text:v.text},{elementId:e.a.EXPERIENCE,routingKeys:[e.a.EXPERIENCE],analyticsId:C.id,text:C.text}],N={elementId:e.a.DEALER_SEARCH,routingKeys:b,analyticsId:f.id,text:f.text};if(null!==P&&""!==P.text&&T.splice(2,0,{elementId:e.a.SHOP,routingKeys:[e.a.SHOP],analyticsId:P.id,text:P.text,link:U!==d.A.shop?P.link:void 0,datalayerEventAction:l.E.NAVIGATION_LINK_CLICK,iconRight:"external"}),function m(r,n){try{const{country:a}=(0,l.s)(r);return"CN"!==a&&!(0,l.i)(a)&&n}catch{}return!0}(a,c)){const M=(0,d.i)(y?.ppnDealer.nameLocalized)?y?.ppnDealer.nameLocalized:y?.ppnDealer.name;(0,d.i)(M)&&(N.subtext=M)}else N.link=f.search.map.link,N.onClick=void 0;if(T.push(N),null!==R){const M=(0,d.I)(t),x=M?(0,d.v)(t,R.loggedInFallback):void 0;T.push({elementId:e.a.MY_PORSCHE,routingKeys:[e.a.MY_PORSCHE],analyticsId:R.id,text:R.text,subtext:x,showIconModifier:M&&s>0})}return T}function h(r,n,a,t,s,c,f){const D=l.f.isOneUiToggleActive(),R=(0,e.f)(c);switch(R){case c:break;case e.a.MODELS:return r.models.series.map(O=>({elementId:(0,e.h)(O.id),routingKeys:[(0,e.h)(O.id)],analyticsId:O.id,text:O.name,subtext:O.tags.map(P=>P.text).join(" | "),renderSignatures:D,datalayerEventAction:l.E.MODEL_RANGE_CLICK}));case e.a.SHOP:case e.a.VEHICLE_PURCHASE:case e.a.SERVICES:case e.a.EXPERIENCE:{const O=(0,e.r)(c),P=g(r,O,R);if(null!==P)return P.children.map(C=>({elementId:(0,e.e)(O,C.id),routingKeys:[(0,e.e)(O,C.id)],analyticsId:C.id,text:C.text,link:C.link}));break}}return _(r,n,a,t,s,f)}function I(r){switch((0,e.f)(r)){case r:break;case e.a.DEALER_SEARCH:return e.a.DEALER_SEARCH;case e.a.MODELS:return e.a.MODELS;case e.a.SHOP:case e.a.VEHICLE_PURCHASE:case e.a.SERVICES:case e.a.EXPERIENCE:{const a=(0,e.r)(r);return(0,e.g)(a)}}return e.a.MAIN_MENU}function g(r,n,a){const{vehiclePurchase:t,experience:s,shop:c,legacyMore:f,services:D}=r,R={[e.a.VEHICLE_PURCHASE]:t,[e.a.EXPERIENCE]:s,[e.a.SHOP]:c,[e.a.MORE]:f,[e.a.SERVICES]:D}[a];if(void 0===R)return null;const O=(0,e.g)(n);return O===a?R:(0,l.j)(R,O)}function p(r,n){if(!(0,d.i)(n))return"";const a=(0,e.f)(n);switch(a){case e.a.MODELS:return r.models.text;case e.a.DEALER_SEARCH:return r.dealer.details.backToSearch;case e.a.SHOP:case e.a.VEHICLE_PURCHASE:case e.a.MORE:case e.a.EXPERIENCE:{const t=g(l.a.state,n,a);if(null!==t)return t.text;break}}return""}function E(r,n,a){var t;const{dealer:s,myPorsche:c,models:f,vehiclePurchase:D,experience:R,shop:O,legacyMore:P,services:C}=r;let v;switch(a){case e.a.MORE:case e.a.SHOP:case e.a.EXPERIENCE:case e.a.SERVICES:case e.a.VEHICLE_PURCHASE:{if(v={[e.a.VEHICLE_PURCHASE]:D,[e.a.EXPERIENCE]:R,[e.a.SHOP]:O,[e.a.MORE]:P,[e.a.SERVICES]:C}[a],void 0===v)return"";const L=(0,e.g)(n);return L===a?v?.text:null===(t=(0,l.j)(v,L))||void 0===t?void 0:t.text}case e.a.SERIES:case e.a.MODELS:{const L=(0,e.g)(n);return v=f.series.find(w=>L===w.id),void 0===v?f.text:v?.id}case e.a.DEALER_SEARCH:return s.search.text;case e.a.MY_PORSCHE:return c?.text}return""}function u(r,n){const{myPorsche:a,models:t}=l.a.state,{loggedInState:s}=l.n.state;if(r===e.a.MY_PORSCHE)return(0,d.I)(s)?(0,d.v)(s,a?.loggedInFallback||""):"";if(r===e.a.DEALER_SEARCH){const{savedDealerCookie:c,ppnDealers:f}=i.d.state;return c?f[c.id].ppnDealer.name:""}if(r===e.a.MODELS&&(0,d.i)(n)){const c=(0,e.g)(n),f=t.series.find(D=>c===D.id);if(f)return f.tags.map(D=>D.text).join(" | ")}return""}},125:(A,S,o)=>{o.d(S,{c:()=>i});var l=o(861),e=o(383);function i(_,h){return d.apply(this,arguments)}function d(){return d=(0,l.Z)(function*(_,h,...I){if(null===_)return null;const g=function(){var E=(0,l.Z)(function*(u){const r=yield e.w.waitForElement(_,u);return"function"==typeof r?.componentOnReady&&(yield r.componentOnReady()),r});return function(r){return E.apply(this,arguments)}}(),m=I.length>0?I.map(g):[g()],p=new Promise(E=>h.set((0,l.Z)(function*(){return E(null)})));return Promise.race([Promise.all(m),p])}),d.apply(this,arguments)}},442:(A,S,o)=>{o.d(S,{a:()=>I,b:()=>p,f:()=>m,g:()=>r,i:()=>_,l:()=>E,r:()=>g,s:()=>d});var l=o(965),e=o(244),i=o(491);const d=(0,e.d)({wishlistItemsNumber:0,numberOfShoppingItems:0});function _(n,a){var t;const s=null===(t=e.a.state.shop)||void 0===t?void 0:t.availableLocales;return e.f.isOneUiToggleActive()&&e.f.isShopToggleActive()&&void 0!==s&&s.includes(n)&&a===i.A.shop}function I(n,a,t){return _(n,a)&&function h(n){var a;return(null===(a=e.a.state.shop)||void 0===a?void 0:a.availableLocalesOnlyForShop.includes(n))||!1}(n)&&null!==t}function g(n,a,t){const{shop:s}=t;return null===s?t:!s?.availableLocales.includes(n)||s?.availableLocalesOnlyForShop.includes(n)&&a!==i.A.shop?Object.assign(Object.assign({},t),{shop:Object.assign(Object.assign({},s),{text:""})}):t}function m(n,a){return n?.filter(t=>a.includes(null==t.authStatus?null:t.authStatus))}function p(){const{myPorsche:n}=e.a.state,{loggedInState:a}=e.n.state,{wishlistItemsNumber:t}=d.state;return{wishlistItemsNumber:t,username:(0,i.v)(a,n?.loggedInFallback||"")}}function E(n){d.set("wishlistItemsNumber",n.wishlistItemsNumber),d.set("numberOfShoppingItems",n.numberOfShoppingItems)}function u(){const{env:n}=e.n.state,{wishlistItemsNumber:a}=d.state,t=(0,l.e)(`${(0,i.h)(n).ASSETS_URL}/icon-assets`);return a>0?`${t}/heart-filled.svg`:`${t}/heart.svg`}function r(n){const t={wishlist:u}[n];return"function"!=typeof t?null:t()}},167:(A,S,o)=>{o.d(S,{a:()=>_,b:()=>h,c:()=>I,i:()=>g,r:()=>d});var l=o(261),e=o(244),i=o(782);const d=({onAnimationStarts:m,onAnimationEnds:p})=>{const E=e.f.isOneUiToggleActive();l.a.register(i.A.OPEN_SINGLE_DRAWER,(0,l.m)([[{onStart:m,elementSelector:"phn-single-drawer .drawer.animating",animation:{name:E?"slideInFromLeftFixed":"slideInFromRightFixed",duration:i.a.drawer,cleanUpAfterAnimation:!0}},{elementSelector:"phn-backdrop",animation:{name:"fadeInBackdrop",duration:i.a.drawer,to:.6},onEnd:p}]]))},_=({onAnimationStarts:m,onAnimationEnds:p})=>{const E=e.f.isOneUiToggleActive();l.a.register(i.A.CLOSE_SINGLE_DRAWER,(0,l.m)([[{onStart:m,elementSelector:"phn-single-drawer .drawer.animating",animation:{name:E?"slideOutToLeftFixed":"slideOutToRightFixed",duration:i.a.drawer,timingFunction:"easeInOutQuad"}},{elementSelector:"phn-backdrop",animation:{name:"fadeOutBackdrop",duration:i.a.drawer,from:.6},onEnd:p}]]))},h=({onAnimationEnds:m})=>{l.a.register(i.A.TRANSITION_NEXT_LEVEL_SINGLE_DRAWER,(0,l.m)([[{elementSelector:"phn-single-drawer .drawer.animating",animation:{name:"slideInFromRightFixed",duration:i.a.drawer,timingFunction:"easeInOutQuad"},onEnd:m}]]))},I=({onAnimationEnds:m})=>{l.a.register(i.A.TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER,(0,l.m)([[{elementSelector:"phn-single-drawer .drawer.animating",animation:{name:"slideOutToRightFixed",duration:i.a.drawer,timingFunction:"easeInOutQuad"},onEnd:m}]]))},g=()=>{try{return[i.A.OPEN_SINGLE_DRAWER,i.A.CLOSE_SINGLE_DRAWER,i.A.TRANSITION_NEXT_LEVEL_SINGLE_DRAWER,i.A.TRANSITION_PREVIOUS_LEVEL_SINGLE_DRAWER].some(p=>{try{return l.a.isPlaying(p)}catch{return!1}})}catch{return!1}}},22:(A,S,o)=>{o.d(S,{T:()=>e});var l=o(861);class e{constructor(d){this.delay=d,this.timer=null}set(d){var _=this;this.cancel(),this.timer=setTimeout((0,l.Z)(function*(){yield d(),_.cancel()}),this.delay)}cancel(){null!==this.timer&&(clearTimeout(this.timer),"function"==typeof this.timer.unref&&this.timer.unref(),this.timer=null)}}},113:(A,S,o)=>{o.d(S,{T:()=>i,a:()=>d});var l=o(244),e=o(965);function i(_,h){return l.f.isOneUiToggleActive()?(0,e.h)("phn-tmp-menu-item",Object.assign({},_),h):(0,e.h)("phn-p-button-pure",Object.assign({},_),h)}function d(_,h){return l.f.isOneUiToggleActive()?(0,e.h)("phn-tmp-menu-item",Object.assign({},_),h):(0,e.h)("phn-p-link-pure",Object.assign({},_),h)}}}]);