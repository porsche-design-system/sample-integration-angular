"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[677],{661:(G,$,v)=>{v.d($,{f:()=>R,g:()=>c});var p=v(861),m=v(556),u=v(49),C=v(946),g=v(181);const S=new Map;function R(r,l){return L.apply(this,arguments)}function L(){return L=(0,p.Z)(function*(r,l){var d;const _=(0,u.b)(g.f.env),w=g.f.isShopToggleActive()&&l===u.A.shop,P=function j(r,l){return E.apply(this,arguments)}(_.CONTENT_URL,r),A=w?function D(r,l){return N.apply(this,arguments)}(_.SHOP_CONTENT_URL,r):Promise.resolve(null),[I,M]=yield Promise.allSettled([P,A]);if("rejected"===I.status)throw I.reason;const O=(0,C.r)(r,l,I.value),U="fulfilled"===M.status?M.value:null;return null===U||null===O.shop?O:Object.assign(Object.assign({},O),{shop:Object.assign(Object.assign({},O.shop),{children:U.menuItems||(null===(d=O.shop)||void 0===d?void 0:d.children)||[],additionalContent:U.additionalContent,availableLocales:O.shop.availableLocales,availableLocalesOnlyForShop:O.shop.availableLocalesOnlyForShop})})}),L.apply(this,arguments)}function E(){return(E=(0,p.Z)(function*(r,l){const{country:d,language:_}=(0,m.s)(l),w=(0,u.e)(r,l),P=S.get(w);if(void 0!==P)return P;const A=yield fetch(`${r}/${_}-${d}.json`,{headers:{"Cache-Control":"no-cache","Content-Type":"application/json"}});if(404===A.status)throw new u.N(`No content for locale ${l} found`,u.a.NO_RESULTS);if(!A.ok)throw new u.N(`Could not get content for locale ${l}`,u.a.GENERAL);const I=yield A.json();return S.set(w,I),I})).apply(this,arguments)}function N(){return(N=(0,p.Z)(function*(r,l){const{country:d,language:_}=(0,m.s)(l),w=yield fetch(`${r}/${d.toLowerCase()}/${_}-${d}/navigation`,{headers:{"Content-Type":"application/json","x-vercel-protection-bypass":"hXMkVgu6erfnX2ydOdeSCixWDWbPjBUk"}});if(404===w.status)throw new u.N(`No shop content for locale ${l} found`,u.a.NO_RESULTS);if(!w.ok)throw new u.N(`Could not get shop content for locale ${l}`,u.a.GENERAL);return w.json()})).apply(this,arguments)}function c(r,l){return o.apply(this,arguments)}function o(){return(o=(0,p.Z)(function*(r,l){try{const d=function a(r,l){const{country:d}=(0,m.s)(l);let _=d;return _.includes("-")&&!(0,m.i)(_)&&(_=d.split("-")[0]),`${r}/flags/${_}.svg`}(r,l);if((yield fetch(d)).ok)return d}catch{}return""})).apply(this,arguments)}},551:(G,$,v)=>{v.d($,{g:()=>ie});var p=v(556),m=v(49),u=Object.defineProperty,g=(n,e,t)=>(((n,e,t)=>{e in n?u(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t})(n,"symbol"!=typeof e?e+"":e,t),t);const R={clean:{enabled:!1,executionPlace:"AFTER_MERGE",values:["",void 0,null]},logging:{enabled:!0,level:"warn"},validation:{enabled:!1,allowUnknown:!1,verbose:!0},webProperties:{enabled:!0,eventNamePattern:/.*/,reactiveUrl:!0,reactiveDimensions:!0}};class L{create(e){return"string"!=typeof e.event||0===e.event.length?{}:{context:{eventAction:e.event}}}}const E=(n,e)=>((n,e)=>{let t;for(t in n)if(n&&n[t]&&!1===e(n[t],t))return!1;return!0})(n,(t,s)=>{for(const i in n[s])if(!1===e(t[i],i,t,s))return!1;return!0}),D=n=>{for(const e in n)return!1;return!0},N=(n,e=(t=>null==(t=R.clean)?void 0:t.values)()||[])=>(E(n,(t,s,i,h)=>{e.includes(t)&&(delete i[s],D(i)&&delete n[h])}),n),c=n=>(E(n,(e,t,s)=>("function"!=typeof e||(s[t]=e()),!0)),n),o=(n,e)=>{const t=e.split(".");if(2!==t.length)return;const s=n[t[0]];return s?s[t[1]]:void 0},l=R.logging;var d=(n=>(n[n.error=0]="error",n[n.warn=1]="warn",n[n.log=2]="log",n))(d||{});const _=class{constructor(n,e){g(this,"prefix"),g(this,"settings"),this.prefix=n,this.settings={...l,...e}}_getMergedSettings(n){return n?{...this.settings,...n}:this.settings}_isAllowed(n,e){if(!_.isAvailable||!e.enabled)return!1;const t=d[e.level];switch(n){case"error":case"warn":return t>=d[n];case"info":case"log":case"debug":case"dir":return t>=2;default:return!1}}_log(n,e="log",t){const s=this._getMergedSettings(t);this._isAllowed(e,s)&&("dir"===e?(console.log(`[${this.prefix}] ${e}:`),console[e](n)):console[e](`[${this.prefix}] ${n}`))}log(n,e){this._log(n,"log",e)}dir(n,e){this._log(n,"dir",e)}debug(n,e){this._log(n,"debug",e)}error(n,e){this._log(n,"error",e)}info(n,e){this._log(n,"info",e)}warn(n,e){this._log(n,"warn",e)}};let w=_;g(w,"isAvailable",typeof console<"u");const P=(...n)=>{const e={};return n.forEach(t=>{if(D(t))return;const s={...e,...t};let i;for(i in s)e[i]="object"!=typeof s[i]||Array.isArray(s[i])?s[i]:{...e[i],...t[i]}}),e};class A{create(e){return N({context:{timestamp:e.timestamp,server:e.hostname},pageExperience:{pageId:e.url},visitor:{deviceBrowserBreakpoint:e.breakpoint,deviceBrowserHeight:e.height,deviceBrowserOrientation:e.orientation,deviceBrowserWidth:e.width,deviceType:e.deviceType,useragent:e.userAgent}},[void 0])}}const I=R.webProperties,M=()=>window.location.href.replace(/[?#].*/,""),K=()=>window.innerHeight.toString(),H=()=>window.innerHeight>window.innerWidth?"p":"l",V=()=>window.innerWidth.toString(),z=n=>{if(!n.breakpoints||n.breakpoints.length<1)return;const{breakpoints:e}=n,t=()=>{const s=window.innerWidth;let i=0,h=0;for(;h<e.length&&s>=e[h];)i=e[h],h++;return i.toString()};return n.reactiveDimensions?t:t()},J=(n,e)=>{switch(e){case"string":case"number":case"boolean":return typeof n===e;case"any[]":return Array.isArray(n)&&n.length>0;case"Record<string, any>":return"object"==typeof n&&!Array.isArray(n)&&Object.keys(n).length>0;case"any":return!0;default:if(e.indexOf("|")>0){const t=e.split("|").map(s=>s.trim().replace(/(^ ?'?|'? ?$)/g,""));return"string"==typeof n&&t.includes(n)}}return!0};class ee{constructor(e,t,s="GlobalDataLayer"){g(this,"_className"),g(this,"_settings"),g(this,"_defaultProperties"),g(this,"_logger"),g(this,"_webPropertiesHandled",!1),g(this,"_dataLayerStore"),g(this,"_extensions",new Map);const i=P(R,e||{});this._className=s,this._logger=new w(this._className,i.logging),this._settings=i,t?this._dataLayerStore=t:typeof window<"u"?(this._dataLayerStore=window.pagData=window.pagData||[],this._logger.info("`dataLayerStore` was set to default `window.pagData`")):(this._dataLayerStore=[],this._logger.info("`dataLayerStore` was set to default `[]`")),this._defaultProperties=[]}setup(){this._handleDefaultWebProperties()}get Settings(){return this._settings}get DataLayerStore(){return this._dataLayerStore}getRegisteredExtension(e){const t=new e;return this.getRegisteredExtensionByClassName(t.className)}getRegisteredExtensionByClassName(e){return this._extensions.has(e)?this._extensions.get(e):void 0}getRegisteredExtensions(){const e=[];for(const t of this._extensions.values())e.push(t);return e}registerExtension(e,t=!1){t||!this._extensions.has(e.className)?(e.dataLayerInstance=this,this._extensions.set(e.className,e),this._logger.info(t?`Overriden registration for extension class <${e.className}>.`:`Registered extension class <${e.className}>.`)):this._logger.warn(`Tried to register extension class <${e.className}> which already exists.`)}removeExtension(e){const t=new e;this._extensions.has(t.className)?this._extensions.delete(t.className):this._logger.warn(`Tried to remove not existing extension class <${t.className}>.`)}removeExtensionByClassName(e){this._extensions.has(e)?this._extensions.delete(e):this._logger.warn(`Tried to remove not existing extension class <${e}>.`)}push(e,t=[{}],s){var i,h;if(0===e.length)return!1;const f=s&&!D(s)?P(this._settings,s):this._settings;Array.isArray(t)||(t=[t]),t.forEach(c);const F=this._eventNamePayloadFactory.create({event:e}),k=c(this.getDefaultProperties(e));f.clean.enabled&&"BEFORE_MERGE"===f.clean.executionPlace&&[k||{},...t].forEach(y=>N(y,f.clean.values));const T=P(F,k||{},...t);if(f.clean.enabled&&"AFTER_MERGE"===f.clean.executionPlace&&N(T,f.clean.values),(null==(i=f?.validation)?void 0:i.enabled)&&(null==(h=f?.validation)?void 0:h.eventMatrix)){const y=((n,e,t)=>{const s={level:null,issues:[]};if(!t.enabled||!t.eventMatrix)return s;const{events:i,...h}=t.eventMatrix,f=i.indexOf(n);if(-1===f)return s.level="error",s.issues.push({level:"error",type:"EVENT_NOT_FOUND",name:n,message:`'${n}': Event does not exist.`}),s;const F=(n=>{if(!n)return[];const e=[];return E(n,(t,s,i,h)=>{e.push(`${h.toString()}.${s.toString()}`)}),e})(e),k=Object.keys(h),T=F.filter(b=>!k.includes(b));let y;for(y in T.length>0&&(t.allowUnknown||((n,e)=>{n&&E(n,(t,s,i,h)=>{!e.includes(`${h.toString()}.${s.toString()}`)||(delete i[s],D(i)&&delete n[h])})})(e,T),T.forEach(b=>{var x;s.level=null!=(x=s.level)?x:"warn",s.issues.push({level:"warn",type:"PROPERTY_DOES_NOT_EXIST",name:b,message:`'${b}': Property does not exist in the given Event Matrix.${t.allowUnknown?"":" It was omitted from the DataLayer payload."}`})})),h){const b=h[y],x=typeof b.e[f]<"u",B=1===b.r,W=e?o(e,y):void 0,Y=typeof W<"u";if(x&&B&&!Y&&(s.level="error",s.issues.push({level:"error",type:"REQUIRED_PROPERTY_MISSING",name:y,message:`'${y}': The required property is missing.`}),!t.verbose)||Y&&!J(W,b.t)&&(s.level="error",s.issues.push({level:"error",type:"WRONG_PROPERTY_TYPE",name:y,message:`'${y}': Wrong type detected. Expected '${b.t}', got '${typeof W}'.`}),!t.verbose))return s}return s})(e,T,f.validation),b=y.issues.sort((x,B)=>x.level!==B.level&&"warn"===B.level?-1:0).map(x=>`- [${x.level}]: ${x.message}`).join("\n");switch(y.level){case"error":return this._logger.error(`Validation failed for event '${e}' with errors/warnings: \n${b}`,f.logging),!1;case"warn":this._logger.warn(`Validation success for event '${e}' with warnings: \n${b}`,f.logging);break;default:this._logger.info(`Validation success for event '${e}'.`,f.logging)}}return this._dataLayerStore.push(T),!0}getDefaultProperties(e){const t={byName:[],byArray:[],byRegex:[]};this._defaultProperties.forEach(i=>i.identifier===e?t.byName.push(i.data):Array.isArray(i.identifier)&&i.identifier.includes(e)?t.byArray.push(i.data):i.identifier instanceof RegExp&&i.identifier.test(e)?t.byRegex.push(i.data):void 0);const s=[...t.byRegex,...t.byArray,...t.byName];if(s.length)return P(...s)}setDefaultProperties(e,t){const s=this._defaultProperties.find(i=>i.identifier===e);s?s.data=P(s.data,t):this._defaultProperties.push({identifier:e,data:t})}_handleDefaultWebProperties(){if(this._webPropertiesHandled||!this._settings.webProperties.enabled)return;const e=((n,e)=>{const t={...I,...this._settings.webProperties},s={breakpoint:z(t),timestamp:(new Date).toISOString(),hostname:window.location.hostname,url:t.reactiveUrl?M:M(),height:t.reactiveDimensions?K:K(),orientation:t.reactiveDimensions?H:H(),width:t.reactiveDimensions?V:V(),deviceType:window.matchMedia("(hover: none), (pointer: coarse)").matches?"mobile":"desktop",userAgent:window.navigator.userAgent};return e?e.create(s):s})(0,this._webPayloadFactory);this.setDefaultProperties(this._settings.webProperties.eventNamePattern,e),this._webPropertiesHandled=!0}}class te extends ee{constructor(e,t,s="GlobalDataLayer"){super(e,t,s),g(this,"_eventNamePayloadFactory"),g(this,"_webPayloadFactory"),this._eventNamePayloadFactory=new L,this._webPayloadFactory=new A,this.setup()}setup(){super.setup()}}function ne(n){switch(n){case p.b.PRODUCTION:return"P";case p.b.PREVIEW:return"PP";default:return"K"}}const ie=new class se{constructor(){this.homeNavEventId=/^PAGHomeNav_/,this.initialise()}initialise(){this.gdl=new te}pushDataLayerEvent(e,t){t?this.gdl.push(e,t):this.gdl.push(e)}setEnvironment(e){this.gdl.setDefaultProperties(this.homeNavEventId,{context:{environment:ne(e)}})}setPageName(e){this.gdl.setDefaultProperties(this.homeNavEventId,{pageExperience:{pageName:e}})}setUser(e,t){this.gdl.setDefaultProperties(this.homeNavEventId,{ids:{userId:e},visitor:{loginStatus:t}})}setLocale(e){try{const{country:t,language:s}=(0,p.s)(e);this.gdl.setDefaultProperties(this.homeNavEventId,{context:{country:t,language:s}})}catch{}}setDefaultProperties(e,t){let s={context:{applicationId:p.c},visitor:{loginStatus:!1}};try{const{country:i,language:h}=(0,p.s)(e);s=Object.assign(Object.assign({},s),{context:Object.assign(Object.assign({},s.context),{country:i,language:h,applicationName:p.D})})}catch{}(0,m.i)(t)&&(s=Object.assign(Object.assign({},s),{pageExperience:{pageName:t}})),this.gdl.setDefaultProperties(this.homeNavEventId,s)}}},946:(G,$,v)=>{v.d($,{a:()=>S,b:()=>j,f:()=>L,g:()=>N,i:()=>C,l:()=>E,r:()=>R,s:()=>u});var p=v(49),m=v(556);const u=(0,m.d)({wishlistItemsNumber:0,numberOfShoppingItems:0,shopInformation:{numberOfShoppingItems:0,wishlistItemsNumber:0,subTotal:"0"}});function C(a,c){var o;const r=null===(o=m.a.state.shop)||void 0===o?void 0:o.availableLocales;return void 0!==r&&r.includes(a)&&c===p.A.shop}function S(a,c,o){return C(a,c)&&function g(a){var c,o;return(null===(o=null===(c=m.a.state.shop)||void 0===c?void 0:c.logoLinksToShopLocales)||void 0===o?void 0:o.includes(a))||!1}(a)&&null!==o}function R(a,c,o){const{shop:r,externalShop:l}=o;return null===r?o:l&&c!==p.A.shop?Object.assign(Object.assign({},o),{shop:Object.assign(Object.assign({},r),l)}):!r?.availableLocales.includes(a)||r?.availableLocalesOnlyForShop.includes(a)&&c!==p.A.shop?Object.assign(Object.assign({},o),{shop:Object.assign(Object.assign({},r),{text:""})}):o}function L(a,c){return a?.filter(o=>c.includes(null==o.authStatus?null:o.authStatus))}function j(){const{myPorsche:a}=m.a.state,{loggedInState:c}=m.n.state;let{wishlistItemsNumber:o}=u.state.shopInformation;return 0===o&&(o=u.state.wishlistItemsNumber),{wishlistItemsNumber:o,username:(0,p.z)(c,a?.loggedInFallback||"")}}function E(a){u.set("wishlistItemsNumber",a.wishlistItemsNumber),u.set("numberOfShoppingItems",a.numberOfShoppingItems),u.set("shopInformation",a.shopInformation)}function D(){const{shopInformation:a}=u.state,{wishlistItemsNumber:c}=u.state;return(a.wishlistItemsNumber>0?a.wishlistItemsNumber:c)>0?"heart-filled":"heart"}function N(a){const o={wishlist:D}[a];return"function"!=typeof o?null:o()}}}]);