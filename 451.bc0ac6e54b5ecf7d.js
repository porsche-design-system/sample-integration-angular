"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[451],{355:(T,D,c)=>{c.d(D,{a:()=>P});var d=c(861),e=c(172),w=c(35),u=c(58);const C={},I=new class O{constructor(){this.client=null,this.experiments=[]}init(){var i=this;return(0,d.Z)(function*(){if(w.f.isABTestingToggleActive())try{yield i.setClient(),yield i.loadExperiments()}catch(s){w.l.error("Could not initialize AbTesting",s)}})()}execute(i){if(w.f.isABTestingToggleActive())try{const s=this.getExperiment(i);this.getVariation(s).activate()}catch(s){w.l.error(`Could not execute experiment ${i}`,s)}}executeContentChange(i){if(w.f.isABTestingToggleActive())try{const s=this.getExperiment(i.experienceName),o=this.getVariation(s);return"original"===o.name?i.children:o.activate()}catch(s){w.l.error(`Could not execute experiment ${i.experienceName}`,s)}return i.children}setClient(){var i=this;return(0,d.Z)(function*(){if(i.client)return Promise.resolve(i.client);yield i.injectScript();const s=window;return i.client=s.Matomo,i.client})()}loadExperiments(){var i=this;return(0,d.Z)(function*(){const o=i.getClient().AbTesting.Experiment,m=i.getAbTestingDefinitions();for(const y in m){const a=new o(m[y]);i.experiments.push(a)}})()}loadContentGeneratorExperiments(){var i=this;return(0,d.Z)(function*(){if(w.f.isABTestingToggleActive()){const o=i.getClient().AbTesting.Experiment,m=e.b.state.abExperiences;if(m)for(const y of m){const n=y.variations.map(r=>({name:r.name,activate:()=>r.children}));n.push({name:"original",activate:()=>null});const a=new o(Object.assign(Object.assign({},y),{variations:n}));i.experiments.push(a)}}})()}getExperiment(i){const s=this.experiments.find(o=>o.name===i);if(!s)throw new e.N(`No experiment with name: ${i} found`,e.a.GENERAL);return s}getVariation(i){const s=i.getActivatedVariationName(),o=i.variations.find(m=>m.name===s);if(!o)throw new e.N(`No variation in experiment: ${i.name} with name: ${s} found`,e.a.GENERAL);return o}getClient(){if(!this.client)throw new e.N("No client is set, you must call init first",e.a.GENERAL);return this.client}injectScript(){return new Promise((i,s)=>{const o=document.createElement("script");o.text=this.getMatomoScript(),document.head.appendChild(o);const m=(0,u.t)(document.querySelector('script[src="//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js"]'));m?(m.onload=()=>{i(!0)},m.onerror=()=>s(new e.N("Could not inject Matomo script",e.a.GENERAL))):s(new e.N("There is no HTML Script element available",e.a.GENERAL))})}getAbTestingDefinitions(){return C}getMatomoScript(){return`var _paq = window._paq = window._paq || [];\n    _paq.push(['trackPageView']);\n    _paq.push(['enableLinkTracking']);\n    (function() {\n      var u="https://porsche.matomo.cloud/";\n      _paq.push(['setTrackerUrl', u+'matomo.php']);\n      _paq.push(['setSiteId', ${"production"===e.n.state.env?"7":"8"}]);\n      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n      g.async=true; g.src='//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);\n    })\n   ();`}};function P(){return I}},135:(T,D,c)=>{c.d(D,{a:()=>o,b:()=>m,c:()=>y,d:()=>P,e:()=>I,f:()=>i,g:()=>R});var d=c(172),e=c(740),w=c(416),u=c(58),C=c(35),O=c(355);function I(n,a,r,l,x,E){var f,h;const{dealer:t,models:g,myPorsche:v,vehiclePurchase:S,shop:p,experience:b,services:A}=n,{savedDealerCookie:H,ppnDealers:K}=a,{app:U}=d.n.state,_=null!==H?K[H.id]:void 0;let j;"en-SG"===r&&t.search.outboundLink&&(j=null===(f=t.search.outboundLink)||void 0===f?void 0:f.link);const N=[e.a.DEALER_SEARCH];void 0!==_&&1!=(null===(h=w.d.state.results)||void 0===h?void 0:h.length)&&N.push((0,e.e)(_.ppnDealer.id));const L=[{elementId:e.a.MODELS,routingKeys:[e.a.MODELS],analyticsId:g.id,text:g.text},{elementId:e.a.VEHICLE_PURCHASE,routingKeys:[e.a.VEHICLE_PURCHASE],analyticsId:S.id,text:S.text},{elementId:e.a.SERVICES,routingKeys:[e.a.SERVICES],analyticsId:A.id,text:A.text},{elementId:e.a.EXPERIENCE,routingKeys:[e.a.EXPERIENCE],analyticsId:b.id,text:b.text}],M={elementId:e.a.DEALER_SEARCH,routingKeys:N,analyticsId:t.id,text:t.text,link:j,iconRight:"en-SG"===r&&t.search.outboundLink?"none":"arrow-head-right"};if(null!==p&&""!==p.text&&L.splice(2,0,{elementId:e.a.SHOP,routingKeys:[e.a.SHOP],analyticsId:p.id,text:p.text,link:U!==u.A.shop?p.link:void 0,datalayerEventAction:d.E.NAVIGATION_LINK_CLICK,iconRight:"none"}),function s(n,a){try{const{country:r}=(0,d.s)(n),l=!(0,d.i)(r)&&a;return(C.f.isDealerSearchChinaEnabled()||"CN"!==r)&&l}catch{}return!0}(r,E)){const k="en"===(0,d.s)(r).language?_?.ppnDealer.name:(0,u.i)(_?.ppnDealer.nameLocalized)?_?.ppnDealer.nameLocalized:_?.ppnDealer.name;(0,u.i)(k)&&(M.subtext=k)}else M.link=t.search.map.link,M.onClick=void 0;if(L.push(M),null!==v){const k=(0,u.I)(l),B=k?(0,u.z)(l,v.loggedInFallback):void 0;L.push({elementId:e.a.MY_PORSCHE,routingKeys:[e.a.MY_PORSCHE],analyticsId:v.id,text:v.text,subtext:B,showIconModifier:k&&x>0})}return L}function P(n,a,r,l,x,E,f){const h=(0,e.f)(E);switch(h){case E:break;case e.a.MODELS:return n.models.series.map(t=>({elementId:(0,e.h)(t.id),routingKeys:[(0,e.h)(t.id)],analyticsId:t.id,text:t.name,subtext:t.tags.map(g=>g.text).join(" | "),renderSignatures:!0,datalayerEventAction:d.E.MODEL_RANGE_CLICK}));case e.a.SHOP:case e.a.VEHICLE_PURCHASE:case e.a.SERVICES:case e.a.EXPERIENCE:{const t=(0,e.r)(E),g=i(n,t,h);if(null!==g)return g.children.map(v=>({elementId:(0,e.c)(t,v.id),routingKeys:[(0,e.c)(t,v.id)],analyticsId:v.id,text:v.text,link:v.link}));break}}return I(n,a,r,l,x,f)}function R(n){switch((0,e.f)(n)){case n:break;case e.a.DEALER_SEARCH:return e.a.DEALER_SEARCH;case e.a.MODELS:return e.a.MODELS;case e.a.SHOP:case e.a.VEHICLE_PURCHASE:case e.a.SERVICES:case e.a.EXPERIENCE:{const r=(0,e.r)(n);return(0,e.g)(r)}}return e.a.MAIN_MENU}function i(n,a,r){const{vehiclePurchase:l,experience:x,shop:E,legacyMore:f,services:h}=n,t={[e.a.VEHICLE_PURCHASE]:l,[e.a.EXPERIENCE]:x,[e.a.SHOP]:E,[e.a.MORE]:f,[e.a.SERVICES]:h}[r];if(null==t)return null;(0,u.i)(t.experienceName)&&(t.children=(0,O.a)().executeContentChange(t));const g=(0,e.g)(a);return g===r?t:(0,d.k)(t,g)}function o(n,a){if(!(0,u.i)(a))return"";const r=(0,e.f)(a);switch(r){case e.a.MODELS:return n.models.text;case e.a.DEALER_SEARCH:return 1===n.dealer.numberOfDealers?"":n.dealer.details.backToSearch;case e.a.SHOP:case e.a.VEHICLE_PURCHASE:case e.a.MORE:case e.a.EXPERIENCE:{const l=i(d.b.state,a,r);if(null!==l)return l.text;break}}return""}function m(n,a,r){var l;const{dealer:x,myPorsche:E,models:f,vehiclePurchase:h,experience:t,shop:g,legacyMore:v,services:S}=n;let p;switch(r){case e.a.MORE:case e.a.SHOP:case e.a.EXPERIENCE:case e.a.SERVICES:case e.a.VEHICLE_PURCHASE:{if(p={[e.a.VEHICLE_PURCHASE]:h,[e.a.EXPERIENCE]:t,[e.a.SHOP]:g,[e.a.MORE]:v,[e.a.SERVICES]:S}[r],void 0===p)return"";const b=(0,e.g)(a);return b===r?p?.text:null===(l=(0,d.k)(p,b))||void 0===l?void 0:l.text}case e.a.SERIES:case e.a.MODELS:{const b=(0,e.g)(a);return p=f.series.find(A=>b===A.id),void 0===p?f.text:p?.id}case e.a.DEALER_SEARCH:return x.search.text;case e.a.MY_PORSCHE:return E?.text}return""}function y(n,a,r){const{myPorsche:l,models:x}=d.b.state,{loggedInState:E}=d.n.state;if(n===e.a.MY_PORSCHE)return(0,u.I)(E)?(0,u.z)(E,l?.loggedInFallback||""):"";if(n===e.a.DEALER_SEARCH){const{savedDealerCookie:f,ppnDealers:h}=w.d.state,t=null!==f?h[f.id]:void 0,g=r&&"en"===(0,d.s)(r).language?t?.ppnDealer.name:(0,u.i)(t?.ppnDealer.nameLocalized)?t?.ppnDealer.nameLocalized:t?.ppnDealer.name;return f?g:""}if(n===e.a.MODELS&&(0,u.i)(a)){const f=(0,e.g)(a),h=x.series.find(t=>f===t.id);if(h)return h.tags.map(t=>t.text).join(" | ")}return""}},451:(T,D,c)=>{c.r(D),c.d(D,{phn_side_drawer:()=>s});var d=c(702),e=c(135),w=c(416),u=c(172),C=c(58);c(740),c(35),c(355);const s=class{constructor(o){(0,d.r)(this,o),this.sideDrawerItemClick=(0,d.c)(this,"sideDrawerItemClick",7),this.activeRoutingKey=void 0,this.locale=void 0}render(){const{loggedInState:o,unreadMessagesCount:m,userConsent:y}=u.n.state,n=(0,e.d)(u.b.state,w.d.state,this.locale,o,m,this.activeRoutingKey,y);return(0,d.h)("nav",null,n.map(a=>{var{routingKeys:r}=a,l=function(o,m){var y={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&m.indexOf(n)<0&&(y[n]=o[n]);if(null!=o&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(o);a<n.length;a++)m.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(o,n[a])&&(y[n[a]]=o[n[a]])}return y}(a,["routingKeys"]);const x=r.includes(this.activeRoutingKey);return(0,d.h)(d.F,null,(0,d.h)("phn-side-drawer-item",Object.assign({key:l.elementId,onClick:()=>{!(0,C.i)(l.link)&&!x&&this.sideDrawerItemClick.emit(r)},isActive:x,class:(0,C.K)(l.text)?"models":""},l)),x?(0,d.h)("div",{class:"item-highlight"}):null)}))}};s.style="@-webkit-keyframes transition-forward-in-animation{from{left:150%}to{left:0%}}@keyframes transition-forward-in-animation{from{left:150%}to{left:0%}}@-webkit-keyframes transition-backward-in-animation{from{left:-150%}to{left:0%}}@keyframes transition-backward-in-animation{from{left:-150%}to{left:0%}}@-webkit-keyframes single-drawer-transition-forward-in-animation{from{left:100%}to{left:0%}}@keyframes single-drawer-transition-forward-in-animation{from{left:100%}to{left:0%}}@-webkit-keyframes fade-in-animation{from{opacity:0;background-color:rgba(0, 0, 0, 0)}to{opacity:1;background-color:rgba(0, 0, 0, 0.6)}}@keyframes fade-in-animation{from{opacity:0;background-color:rgba(0, 0, 0, 0)}to{opacity:1;background-color:rgba(0, 0, 0, 0.6)}}@-webkit-keyframes slide-in-from-left-absolute{from{left:-1000px}to{left:0px}}@keyframes slide-in-from-left-absolute{from{left:-1000px}to{left:0px}}@-webkit-keyframes slideDown{from{max-height:0}to{max-height:1000px}}@keyframes slideDown{from{max-height:0}to{max-height:1000px}}@-webkit-keyframes slideUp{from{max-height:1000px}to{max-height:0}}@keyframes slideUp{from{max-height:1000px}to{max-height:0}}@-webkit-keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@keyframes slideLeft{from{max-width:0}to{max-width:1000px}}@-webkit-keyframes slideRight{from{max-width:1000px}to{max-width:0}}@keyframes slideRight{from{max-width:1000px}to{max-width:0}}@-webkit-keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@keyframes darken{from{background-color:rgba(0, 0, 0, 0)}to{background-color:rgba(0, 0, 0, 0.8)}}@-webkit-keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@keyframes lighten{from{background-color:rgba(0, 0, 0, 0.8)}to{background-color:rgba(0, 0, 0, 0)}}@-webkit-keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@keyframes fadeInFromBottom{0%{opacity:0;top:36px}100%{opacity:1;top:0px}}@-webkit-keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@keyframes fadeOutToTop{0%{opacity:1;bottom:0px}100%{opacity:0;bottom:16px}}@-webkit-keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@keyframes slideLeftDoubleDrawer{from{right:-1000px}to{right:0px}}@-webkit-keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@keyframes slideRightDoubleDrawer{from{right:0px}to{right:-1000px}}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}.transition-forward-animation-out.sc-phn-side-drawer{-webkit-transition:left 250ms;transition:left 250ms;position:relative !important;left:-150% !important}.transition-forward-animation-in.sc-phn-side-drawer{position:relative;-webkit-animation:transition-forward-in-animation 250ms;animation:transition-forward-in-animation 250ms}.transition-backward-animation-out.sc-phn-side-drawer{-webkit-transition:left 250ms;transition:left 250ms;position:relative !important;left:150% !important}.transition-backward-animation-in.sc-phn-side-drawer{position:relative !important;-webkit-animation:transition-backward-in-animation 250ms;animation:transition-backward-in-animation 250ms}.slide-out-to-right-fixed.sc-phn-side-drawer{-webkit-transition:left 400ms;transition:left 400ms;position:fixed;left:100% !important}.slide-in-from-right-fixed.sc-phn-side-drawer{position:fixed;-webkit-animation:single-drawer-transition-forward-in-animation 400ms;animation:single-drawer-transition-forward-in-animation 400ms}.phn-flex-col.sc-phn-side-drawer{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.phn-flex-row.sc-phn-side-drawer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row}.phn-align-center.sc-phn-side-drawer{-ms-flex-align:center;align-items:center}.phn-justify-around.sc-phn-side-drawer{-ms-flex-pack:distribute;justify-content:space-around}.phn-justify-between.sc-phn-side-drawer{-ms-flex-pack:justify;justify-content:space-between}.phn-flex-wrap.sc-phn-side-drawer{-ms-flex-wrap:wrap;flex-wrap:wrap}.sc-phn-side-drawer-h{display:block;width:100%}.sc-phn-side-drawer-h .item-highlight.sc-phn-side-drawer{display:none}.sc-phn-side-drawer-h phn-side-drawer-item.sc-phn-side-drawer{margin-top:2.25rem}@media (min-width: 1000px){.sc-phn-side-drawer-h phn-side-drawer-item.sc-phn-side-drawer{margin-top:0.85rem}}@media (min-width: 1920px){.sc-phn-side-drawer-h phn-side-drawer-item.sc-phn-side-drawer{margin-top:1rem}}.sc-phn-side-drawer-h phn-side-drawer-item.models.sc-phn-side-drawer{margin-top:0.5rem}@media (min-width: 1920px){.sc-phn-side-drawer-h phn-side-drawer-item.models.sc-phn-side-drawer{margin-top:1rem}}.sc-phn-side-drawer-h phn-side-drawer-item.sc-phn-side-drawer:first-of-type{margin-top:0}"}}]);