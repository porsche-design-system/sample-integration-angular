"use strict";(self.webpackChunksample_integration_angular=self.webpackChunksample_integration_angular||[]).push([[484],{97:(R,O,g)=>{g.d(O,{a:()=>u,d:()=>v});var m=g(861),i=g(62),f=g(273),l=g(243),p=g(926);const v=(0,i.d)({searchTerm:"",results:null,savedDealerCookie:function t(){try{return JSON.parse(f.w.getCookie(l.S))}catch{return null}}(),ppnDealers:{},dealersOfRegion:{regions:[]}});v.onChange("savedDealerCookie",_=>{f.w.setCookie(l.S,JSON.stringify(_))});const o={},d=new class r{constructor(){this.client=null,this.experiments=[]}init(){var n=this;return(0,m.Z)(function*(){if(p.f.isABTestingToggleActive())try{yield n.setClient(),yield n.loadExperiments()}catch(e){p.l.error("Could not initialize AbTesting",e)}})()}execute(n){if(p.f.isABTestingToggleActive())try{const e=this.getExperiment(n);this.getVariation(e).activate()}catch(e){p.l.error(`Could not execute experiment ${n}`,e)}}executeContentChange(n){if(p.f.isABTestingToggleActive())try{const e=this.getExperiment(n.experienceName),c=this.getVariation(e);return"original"===c.name?n.children:c.activate()}catch(e){p.l.error(`Could not execute experiment ${n.experienceName}`,e)}return n.children}setClient(){var n=this;return(0,m.Z)(function*(){if(n.client)return Promise.resolve(n.client);yield n.injectScript();const e=window;return n.client=e.Matomo,n.client})()}loadExperiments(){var n=this;return(0,m.Z)(function*(){const c=n.getClient().AbTesting.Experiment,E=n.getAbTestingDefinitions();for(const w in E){const A=new c(E[w]);n.experiments.push(A)}})()}loadContentGeneratorExperiments(){var n=this;return(0,m.Z)(function*(){if(p.f.isABTestingToggleActive()){const c=n.getClient().AbTesting.Experiment,E=i.a.state.abExperiences;if(E)for(const w of E){const b=w.variations.map(S=>({name:S.name,activate:()=>S.children}));b.push({name:"original",activate:()=>null});const A=new c(Object.assign(Object.assign({},w),{variations:b}));n.experiments.push(A)}}})()}getExperiment(n){const e=this.experiments.find(c=>c.name===n);if(!e)throw new l.N(`No experiment with name: ${n} found`,l.a.GENERAL);return e}getVariation(n){const e=n.getActivatedVariationName(),c=n.variations.find(E=>E.name===e);if(!c)throw new l.N(`No variation in experiment: ${n.name} with name: ${e} found`,l.a.GENERAL);return c}getClient(){if(!this.client)throw new l.N("No client is set, you must call init first",l.a.GENERAL);return this.client}injectScript(){return new Promise((n,e)=>{const c=document.createElement("script");c.text=this.getMatomoScript(),document.head.appendChild(c);const E=(0,l.u)(document.querySelector('script[src="//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js"]'));E?(E.onload=()=>{n(!0)},E.onerror=()=>e(new l.N("Could not inject Matomo script",l.a.GENERAL))):e(new l.N("There is no HTML Script element available",l.a.GENERAL))})}getAbTestingDefinitions(){return o}getMatomoScript(){return`var _paq = window._paq = window._paq || [];\n    _paq.push(['trackPageView']);\n    _paq.push(['enableLinkTracking']);\n    (function() {\n      var u="https://porsche.matomo.cloud/";\n      _paq.push(['setTrackerUrl', u+'matomo.php']);\n      _paq.push(['setSiteId', ${"production"===i.n.state.env?"7":"8"}]);\n      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];\n      g.async=true; g.src='//cdn.matomo.cloud/porsche.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);\n    })\n   ();`}};function u(){return d}},926:(R,O,g)=>{g.d(O,{F:()=>v,f:()=>N,l:()=>S});var m=g(861),i=g(62),f=g(243),l=g(273);const v="porsche_75_years_logo",w={local:{featureOverrideEnabled:{enabled:!0},homenav_1723:{enabled:!0},navi_3:{enabled:!1},porsche_75_years_logo:{enabled:!1},one_ui:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}},preview:{featureOverrideEnabled:{enabled:!0},homenav_1723:{enabled:!0},navi_3:{enabled:!1},porsche_75_years_logo:{enabled:!1},one_ui:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}},test:{featureOverrideEnabled:{enabled:!0},homenav_1723:{enabled:!0},navi_3:{enabled:!0},porsche_75_years_logo:{enabled:!1},one_ui:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}},production:{featureOverrideEnabled:{enabled:!1},homenav_1723:{enabled:!1},navi_3:{enabled:!0},porsche_75_years_logo:{enabled:!1},mock_shop_content:{enabled:!1},shop:{enabled:!1},pcom_search:{enabled:!1}}},S=new class A{constructor(){this.env=null,this.version=f.V,this.breakpoint=0,this.locale=null}init(s,a,h){this.env=s,this.breakpoint=a,this.locale=h}log(s,a,h,y,T){if(this.env!==i.b.TEST)try{const C=JSON.stringify({name:s,level:a,env:this.env,breakpoint:this.breakpoint,locale:this.locale,version:this.version,hostname:l.w.location.hostname,pathname:l.w.location.pathname,id:h,errorType:T||"",message:y});this.env===i.b.PRODUCTION?"debug"!==a&&fetch("https://logs.nav.porsche.com",{method:"POST",body:C,mode:"no-cors"}):console[a](C)}catch{}}info(s,a=""){this.log("PHN_HEADER_LOG_ENTRY","info",s,a)}error(s,a){this.log("PHN_HEADER_LOG_ENTRY","error",s,a.message,a instanceof f.N?a.type:f.a.GENERAL)}},N=new class D{constructor(s=(0,i.g)(f.w),a=w){this.featureEnvMap=a,this.features={},this.env="local",this.isShopToggleActive=()=>this.isFeatureEnabled("shop",l.w.location.search),this.isPcomSearchToggleActive=()=>this.isFeatureEnabled("pcom_search",l.w.location.search),this.isSavedItemsToggleActive=()=>this.isFeatureEnabled("saved_items",l.w.location.search),this.isABTestingToggleActive=()=>this.isFeatureEnabled("ab",l.w.location.search),this.isDealerSearchChinaEnabled=()=>this.isFeatureEnabled("dealer_search_china",l.w.location.search),this.isDealerSearchOpeningHoursEnabled=()=>this.isFeatureEnabled("opening_hours",l.w.location.search),this.env=s,this.features=this.featureEnvMap[s]}loadRemoteToggles(){var s=this;return(0,m.Z)(function*(){try{const a=(0,f.b)(s.env).BFF_ENDPOINT,h=yield fetch(`${a}/toggles?env=${s.env}`);if(!h.ok){const T=yield h.text();throw new Error(T)}const y=yield h.json();s.features=y}catch(a){throw new f.N(`Load Feature Toggles failed with error: ${a}`,f.a.GENERAL)}})()}stringToBooleanStrict(s){return"true"===s||"false"!==s&&null}getUrlFeatureToggleOverride(s,a){var h,y;const T=null===(y=null===(h=a.split("?")[1])||void 0===h?void 0:h.split("&").find(C=>C.includes(s)))||void 0===y?void 0:y.split("=")[1];return(0,f.i)(T)?this.stringToBooleanStrict(T||""):null}getLocalStorageFeatureToggleOverride(s){const a=localStorage.getItem(`phn.${s}`);return(0,f.i)(a)?this.stringToBooleanStrict(a):null}isFeatureEnabled(s,a){var h;if(void 0===this.features||this.env===i.b.PRODUCTION&&this.isOnSecurityLayer(s))return!1;if(null!==(h=this.features.featureOverrideEnabled)&&void 0!==h&&h.enabled){const y=[this.getUrlFeatureToggleOverride(s,a),this.getLocalStorageFeatureToggleOverride(s)];for(const T of y)if(null!==T)return T}return void 0!==this.features[s]&&this.features[s].enabled}setFeatures(s){var a=this;return(0,m.Z)(function*(){a.env=s;try{if("test"===s)return void(a.features=a.featureEnvMap[s]);yield a.loadRemoteToggles()}catch(h){S.error("INIT_APP_CONFIG",h),a.features=a.featureEnvMap[s]}})()}isOnSecurityLayer(s){return["opening_hours"].includes(s)}}},376:(R,O,g)=>{g.d(O,{R:()=>f,a:()=>i,b:()=>n,c:()=>t,d:()=>_,e:()=>l,f:()=>p,g:()=>d,h:()=>v,i:()=>r,j:()=>o,r:()=>u});var m=g(243);const i={MAIN_MENU:"mainmenu",DEALER_SEARCH:"find_a_dealer",MORE:"more",SHOP:"shop",SERIES:"series",MY_PORSCHE:"my_porsche",VEHICLE_PURCHASE:"vehicle_purchase",EXPERIENCE:"experience",SERVICES:"services",MODELS:"models"};var f=function(e){return e[e.LEVEL_ZERO=-1]="LEVEL_ZERO",e[e.LEVEL_ONE=0]="LEVEL_ONE",e[e.LEVEL_TWO=1]="LEVEL_TWO",e}(f||{});function l(...e){return e.reduce((c,E)=>[...c,...(0,m.g)(E).split("/")],[]).filter(Boolean).join("/")}function p(e){if((0,m.i)(e))return Object.values(i).find(c=>e.startsWith(c))}function v(...e){return l(i.MODELS,...e)}function t(...e){return l(i.DEALER_SEARCH,...e)}function o(...e){return l(i.MY_PORSCHE,...e)}function r(...e){return l(i.VEHICLE_PURCHASE,...e)}function d(e){return e.split("/").slice(-1)[0]}function u(e){return e.split("/").slice(0,-1).join("/")}function _(e){switch(p(e)){case i.MAIN_MENU:return 1;case e:return 2;default:return e.split("/").length+1}}function n(e){const c=u(e);return(0,m.i)(c)?c:i.MAIN_MENU}},273:(R,O,g)=>{g.d(O,{w:()=>p});var m=g(861),i=g(243);const p=new class f{constructor(){this.initialBodyStyleValues={top:"",position:"",inlineSize:"",overflowY:""},this.initialDocumentScrollTop=0}get location(){return window.location}set location(t){window.location=t}get sessionStorage(){return window.sessionStorage}get localStorage(){return window.localStorage}set version(t){Object.assign(window,{PHN_HEADER_VERSION:t})}set navigationLoaded(t){Object.assign(window,{PHN_NAVIGATION_LOADED:t})}get bodyOverflow(){return document.body.style.overflow}get bodyHeight(){return document.body.style.height}requestAnimationFrame(t){return window.requestAnimationFrame(t)}createDiv(){return window.document.createElement("div")}getBreakpoint(){const t=Math.max(window.document.documentElement.clientWidth,window.innerWidth||0),o=Object.keys(i.q).reverse().find(r=>(0,i.v)(i.q,r)&&t>=i.q[r]);return"string"==typeof o&&(0,i.v)(i.q,o)?i.q[o]:0}get redirected(){return!0===window.REDIRECTED||window.location.search.includes("cs_redirect=")}createIframe(t,o){const r=window.document.createElement("iframe");r.id=t,r.style.display="none",r.src=o,window.document.body.appendChild(r)}removeElement(t){var o;null===(o=window.document.getElementById(t))||void 0===o||o.remove()}redirectToUrl(t){window.location.assign(t)}generateRandom(t){const r=new Uint8Array(t);window.crypto.getRandomValues(r);const d=[];for(let u=0;u<r.byteLength;u+=1)d.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[r[u]%62]);return d.join("")}maybeCheckMarketingConsent(t){var o,r,d,u,_,n,e,c,E,w,b;const A={processorId:null!==(d=null===(r=null===(o=window.GlobalConsent)||void 0===o?void 0:o.Processor)||void 0===r?void 0:r.googleMaps)&&void 0!==d?d:"Google Maps",timeoutVar:{},mapContainer:"",callbacks:{success:t}};return"function"==typeof(null===(_=null===(u=window.PCOM)||void 0===u?void 0:u.globalConsent)||void 0===_?void 0:_.checkConsent)?(null===(c=null===(e=null===(n=window.PCOM)||void 0===n?void 0:n.globalConsent)||void 0===e?void 0:e.checkConsent)||void 0===c||c.call(e,A),!0):"function"==typeof(null===(E=window.ucPrivacyShield)||void 0===E?void 0:E.checkConsent)?(null===(b=null===(w=window.ucPrivacyShield)||void 0===w?void 0:w.checkConsent)||void 0===b||b.call(w,A),!0):(t(),!1)}deriveChallenge(t){return(0,m.Z)(function*(){if(t.length<43||t.length>128)throw new i.N("invalid code length",i.a.INVALID_INPUT);const o=new ArrayBuffer(t.length),r=new Uint8Array(o);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);const d=yield window.crypto.subtle.digest("SHA-256",r),u=new Uint8Array(d);let _="";for(let n=0;n<u.byteLength;n++)_+=String.fromCharCode(u[n]);return window.btoa(_).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")})()}hashString(t){return(0,m.Z)(function*(){const o=(new TextEncoder).encode(t),r=yield window.crypto.subtle.digest("SHA-256",o);return Array.from(new Uint8Array(r)).map(u=>u.toString(16).padStart(2,"0")).join("")})()}getScrollbarWidth(){const t=window.document.createElement("div");t.style.overflow="scroll",window.document.body.appendChild(t);const o=t.offsetWidth-t.clientWidth;return window.document.body.removeChild(t),Number.isNaN(o)?"0px":`${o}px`}fetchGoogleMapsApi(t,o=`https://maps.googleapis.com/maps/api/js?key=${t}&libraries=places`){return(0,m.Z)(function*(){if(void 0!==window.google&&void 0!==window.google.maps&&void 0!==window.google.maps.version||document.getElementById("googleMaps"))return window.google;const d=document.createElement("script");return d.src=o,d.id="googleMaps",document.head.appendChild(d),new Promise((u,_)=>{d.onerror=()=>{_(new i.N("Failed to load google maps script.",i.a.GENERAL))},d.onload=()=>{u(window.google)}})})()}getNavigatorLatLong(){return(0,m.Z)(function*(){return new Promise((t,o)=>{window.navigator.geolocation.getCurrentPosition(({coords:{latitude:r,longitude:d}})=>{t({latitude:r,longitude:d})},r=>o(new i.N(`geolocation.getCurrentPosition failed with ${r.code}: ${r.message}`,function l(v){switch(v.code){case v.PERMISSION_DENIED:return i.a.GEOLOCATION_DENIED;case v.POSITION_UNAVAILABLE:case v.TIMEOUT:return i.a.RETRY;default:return i.a.GENERAL}}(r))))})})()}getCookie(t){var o;return(0,i.g)(null===(o=document.cookie.split("; ").find(r=>r.startsWith(`${t}=`)))||void 0===o?void 0:o.split("=")[1])}setCookie(t,o){document.cookie=`${t}=${o};domain=${i.C};expires=${new Date(Date.now()+10*i.M).toUTCString()};`}btoa(t){return window.btoa(t)}lockScroll(){this.initialBodyStyleValues=(0,i.x)(document.body.style,this.initialBodyStyleValues),this.initialDocumentScrollTop=document.documentElement.scrollTop,document.body.style.top=`-${document.documentElement.scrollTop}px`,document.body.style.position="fixed",document.body.style.inlineSize="100%",document.body.style.overflowY="scroll"}unlockScroll(){Object.entries(this.initialBodyStyleValues).forEach(([t,o])=>document.body.style.setProperty((0,i.y)(t),o)),document.documentElement.scrollTop=this.initialDocumentScrollTop}hasScrollbar(){return window.document.body.offsetHeight>window.innerHeight}waitForElement(t,o){return(0,m.Z)(function*(){if(!(0,i.i)(o))return t;const r=(0,i.u)(t.querySelector(o));return null!==r?r:new Promise(d=>{const u=new MutationObserver(()=>{const _=(0,i.u)(t.querySelector(o));null!==_&&(d(_),u.disconnect())});u.observe(t,{childList:!0,subtree:!0})})})()}}}}]);